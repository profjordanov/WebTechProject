if (self.CavalryLogger) { CavalryLogger.start_js(["JZ\/M1"]); }

__d("AdContentFeedbackTypes",[],(function a(b,c,d,e,f,g){f.exports={APPROVE:1,NEED_MANUAL_REVIEW:2,REJECT:3};}),null);
__d("AdsAPIOffsitePixelFields",[],(function a(b,c,d,e,f,g){f.exports={ID:"id",NAME:"name",TAG:"tag",STATUS:"status",CREATOR:"creator",JS_PIXEL:"js_pixel",LAST_FIRING_TIME:"last_firing_time",APP_EVENT:"app_event",SEVEN_DAYS_FIRING_COUNT:"seven_days_firing_count"};}),null);
__d("AdsTargetingSpecOverallRating",[],(function a(b,c,d,e,f,g){f.exports={BAD_TOO_BROAD:"BAD_TOO_BROAD",BAD_TOO_SMALL:"BAD_TOO_SMALL",VAGUE:"VAGUE",GOOD:"GOOD"};}),null);
__d("BoostedComponentStatus",[],(function a(b,c,d,e,f,g){f.exports={INACTIVE:"inactive",DRAFT:"draft",PENDING:"pending",ACTIVE:"active",PAUSED:"paused",REJECTED:"rejected",FINISHED:"finished",EXTENDABLE:"extendable",NO_CTA:"no_cta",CREATING:"creating",ERROR:"error",PENDING_FUNDING_SOURCE:"pending_funding_source"};}),null);
__d("VideoSpeechRecoTaskStatus",[],(function a(b,c,d,e,f,g){f.exports={FAILED:0,SCHEDULED:1};}),null);
__d("VideoSubtitleStatusType",[],(function a(b,c,d,e,f,g){f.exports={PROCESSING:0,SUCCEEDED:1,FAILED:2,PUBLISHED:3,SRT_REVIEWING:4,PRE_SRT_REVIEW:5,SRT_PUBLISHED:6};}),null);
__d('AdsImageUploadErrorActions',['AdsDispatcher','AdsActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h={setUploadFormatError:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({message:j,type:c('AdsActionTypes').IMAGE_UPLOAD.FORMAT_ERROR});},setUploadSizeError:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({message:j,type:c('AdsActionTypes').IMAGE_UPLOAD.SIZE_ERROR});},setUploadAPIError:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({message:j,type:c('AdsActionTypes').IMAGE_UPLOAD.API_ERROR});},removeErrors:function i(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsActionTypes').IMAGE_UPLOAD.REMOVE_ERRORS});}};f.exports=h;}),null);
__d('AdsShutterstockViewActions',['AdsActionTypes','AdsDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={searchTextChanged:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({data:{searchText:j},type:c('AdsActionTypes').SHUTTERSTOCK.SEARCH_TEXT_CHANGED});},searchDone:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({data:{searchText:j},type:c('AdsActionTypes').SHUTTERSTOCK.SEARCH_DONE});},endReached:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({data:{searchText:j},type:c('AdsActionTypes').SHUTTERSTOCK.END_REACHED});}};f.exports=h;}),null);
__d('AdsVideoActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h={ADS_VIDEO_CAPTION_UPLOAD:'',ADS_VIDEO_CAPTION_REMOVE:'',ADS_VIDEO_CAPTION_CHANGE_DEFAULT_LOCALE:'',ADS_VIDEO_CAPTION_CHANGE_DEFAULT_LOCALE_ERROR:'',ADS_VIDEO_CAPTION_EDIT_SUCCESS:'',ADS_VIDEO_CAPTION_EDITOR_OPENED:'',ADS_VIDEO_CAPTION_PUBLISHED:'',ADS_VIDEO_CAPTION_REMOVE_ERROR:'',ADS_VIDEO_CAPTION_UPLOAD_ERROR:''},i=c('keyMirrorRecursive')(h,'ADS_VIDEO');f.exports=i;}),null);
__d("XAdsCFImageUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ads\/create\/imageupload\/",{});}),null);
__d('AdsUploadProcess',['cx','AdsImageUploadConstants','AdsDaoGraph','AdsImageLegacy','ArbiterMixin','DOM','ImageReader','XAdsCFImageUploadController','GlobalCallback','getAsyncParams','mixin'],(function a(b,c,d,e,f,g,h){var i,j,k={IFRAME_NAME:"_57mk"},l=0;i=babelHelpers.inherits(m,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function m(n,o){'use strict';j.constructor.call(this);this.id=l;l++;this.file=n;this.iframe=null;this.$AdsUploadProcess1=o;}m.prototype.getID=function(){'use strict';return this.id;};m.prototype.upload=function(n){'use strict';if(window.FileReader){this.$AdsUploadProcess2();}else this.$AdsUploadProcess3(n);};m.prototype.$AdsUploadProcess2=function(){'use strict';var n=function(o){if(o===null){this.failed();return;}o=o.split(',');var p=function(r,s){if(r&&r.images){var t=this.file.name,u=new (c('AdsImageLegacy'))(r.images[t]);this.succeeded(u);}else{var v=s&&s.error;this.failed(v);}}.bind(this),q=function(r){this.progressData=r;this.progressPercent=r.loaded/r.total*100;this.inform('onProgress',r);}.bind(this);try{c('AdsDaoGraph').add.imageForAccount.one(p,{bytes:o[1],name:this.file.name,encoding:o[0],handleError:p,accountId:this.$AdsUploadProcess1},q);}catch(r){this.failed(r.message);throw new Error(r.message);}}.bind(this);c('ImageReader').read(this.file,n,c('AdsImageUploadConstants').maxWidth,c('AdsImageUploadConstants').maxHeight);};m.prototype.$AdsUploadProcess3=function(n){'use strict';var o=document.createElement('iframe');o.className="_57mi";var p=k.IFRAME_NAME+this.getID();o.name=p;n.target=p;var q=c('XAdsCFImageUploadController').getURIBuilder();n.action=q.getURI().getQualifiedURI().toString();var r=c('getAsyncParams')('POST');Object.assign(r,{account_id:this.$AdsUploadProcess1,callback:c('GlobalCallback').create(this.$AdsUploadProcess4.bind(this,o)),domain:document.domain});Object.keys(r).forEach(function(s){n.appendChild(c('DOM').create('input',{type:'hidden',name:s,value:r[s]}));});document.body.appendChild(o);n.submit();};m.prototype.$AdsUploadProcess4=function(n,o,p){'use strict';c('GlobalCallback').remove(o);c('DOM').remove(n);if(p&&p.url){this.succeeded(new (c('AdsImageLegacy'))(p));}else this.failed();};m.prototype.succeeded=function(n){'use strict';this.image=n;this.inform('succeeded',n);};m.prototype.failed=function(n){'use strict';this.inform('failed',n);};f.exports=m;}),null);
__d('AdsImageUploader',['cx','csx','fbt','invariant','Promise','AdsImageUploadErrorActions','AdsImageValidation','AdsUploadProcess','ArbiterMixin','CSS','DOMEventListener','DOMQuery','ads-lib-connect_DEPRECATED','mixin','Parent','React','ReactDOM','WebApiApplication','adsFormatErrorMessage','getDOMImageSize'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('ads-lib-connect_DEPRECATED').FB,o=b.URL||b.webkitURL,p={UPLOAD_ELEMENT:"_57mh",DRAG_OVER:"_57mj",CLICK_HIJACK:"_57mf",CLICK_HIJACK_FORM:"_5ecl"};l=babelHelpers.inherits(q,c('mixin')(c('ArbiterMixin')));m=l&&l.prototype;function q(r,s){m.constructor.call(this);this.handleFormInputMount=function(t){if(t)c('DOMEventListener').add(t,'change',function(u){this.handleInputChange(u,t);}.bind(this));this.onFormInputMount&&this.onFormInputMount(t);}.bind(this);s=s||{};this.accountId=s.accountId;this.accountId||k(0);this.acceptsMultiple='multiple' in s?s.multiple:true;this.acceptsMultiple=window.FileReader?this.acceptsMultiple:false;this.validateImageSize=s.validateImageSize;this.validateImageFormat=s.validateImageFormat;this.imageSpec=s.imageSpec;this.onFormInputMount=s.onFormInputMount;this.onGifUpload=s.onGifUpload;this.root=r;if(this.root){this.findAndDecorateUploadElements();this.createDragAndDropArea(this.root);}}q.prototype.findAndDecorateUploadElements=function(){var r=c('DOMQuery').scry(this.root,'.'+p.UPLOAD_ELEMENT);r.forEach(function(s){this.decorateUploadElement(s);},this);if(c('CSS').hasClass(this.root,p.UPLOAD_ELEMENT))this.decorateUploadElement(this.root);};q.prototype.createDragAndDropArea=function(r){c('DOMEventListener').add(r,'dragenter',function(s){s.preventDefault();c('CSS').addClass(this,p.DRAG_OVER);});c('DOMEventListener').add(r,'dragleave',function(s){s.preventDefault();c('CSS').removeClass(this,p.DRAG_OVER);});c('DOMEventListener').add(r,'dragover',function(s){s.preventDefault();s.dataTransfer.dropEffect='copy';});c('DOMEventListener').add(r,'drop',this.onDrop.bind(this));};q.prototype.onDrop=function(r){r.preventDefault();var s=c('DOMQuery').scry(this.root,'.'+p.CLICK_HIJACK_FORM)[0];this.upload(r.dataTransfer.files,s);};q.prototype.decorateUploadElement=function(r){var s=c('WebApiApplication').getAccessToken(),t=n.url('/act_'+this.accountId+'/adimages',null,s);if(c('DOMQuery').scry(r,'.'+p.CLICK_HIJACK).length)return;var u=document.createElement('div');u.className=p.CLICK_HIJACK;var v=c('React').createElement('form',{action:t,className:p.CLICK_HIJACK_FORM,encType:'multipart/form-data',method:'POST'},c('React').createElement('input',{accept:'image/*',className:"_57mg",multiple:this.acceptsMultiple,name:'fileToUpload',ref:this.handleFormInputMount,type:'file',onClick:this.handleInputClick.bind(this)}));v=c('ReactDOM').render(v,u);r.appendChild(u);};q.prototype.handleInputClick=function(){this.inform('onUploadClicked');};q.prototype.handleInputChange=function(r,s){var t=r.target||s,u=t.files||[t.value],v=c('Parent').byTag(t,'form');this.upload(u,v);};q.prototype.filterFiles=function(r){var s=r.filter(function(t){return !t.type||t.type.match(/image\.*/i);});return s;};q.prototype.containsGifFile=function(r){var s=r.findIndex(function(t){return t.type!=null&&t.type.match(/gif\.*/i);});return s!==-1;};q.prototype.getImageTooSmallErrorMessages=function(r){var s=j._("Image too small."),t=j._({"*":{"*":"This image is too small. Try one that's at least {width} x {height} px."}},[j.param('width',r.minWarningWidth,[0]),j.param('height',r.minWarningHeight,[0])]);return {shortMessage:s,longMessage:t};};q.prototype.getImageNotSupportedErrorMessages=function(r){var s=j._("Image format not supported."),t=!r?j._("The image format isn't supported. Please use a different image."):j._("The {image format} image format isn't supported. Please use a different image.",[j.param('image format',r)]);return {shortMessage:s,longMessage:t};};q.prototype.$AdsImageUploader1=function(r,s){return c('AdsImageValidation').isWarningSize({getWidth:function t(){return r;},getHeight:function t(){return s;}},this.imageSpec);};q.prototype.upload=function(r,s){r=Array.prototype.slice.call(r);if(!this.acceptsMultiple)r=[r[0]];r=this.filterFiles(r);if(!r)return;var t=[],u=[];if(this.validateImageFormat){r.forEach(function(w){if(c('AdsImageValidation').isValidFormat(w.type)){u.push(w);}else c('AdsImageUploadErrorActions').setUploadFormatError(this.getImageNotSupportedErrorMessages(w.type));}.bind(this));}else u=r;if(this.onGifUpload!=null&&this.containsGifFile(u))this.onGifUpload();var v=[];v=u.map(function(w){return new (c('Promise'))(function(x,y){c('getDOMImageSize')(o.createObjectURL(w),function(z,aa,ba){if(this.validateImageFormat&&z===0&&aa===0){c('AdsImageUploadErrorActions').setUploadFormatError(this.getImageNotSupportedErrorMessages());x(false);}else if(this.validateImageSize&&this.imageSpec&&!this.$AdsImageUploader1(z,aa)){c('AdsImageUploadErrorActions').setUploadSizeError(this.getImageTooSmallErrorMessages(this.imageSpec));x(false);}else{t.push(new (c('AdsUploadProcess'))(w,this.accountId));x(true);}}.bind(this));}.bind(this));}.bind(this));c('Promise').all(v).done(function(w){if(w.every(function(x){return x;}))c('AdsImageUploadErrorActions').removeErrors();this.startUploadProcesses(t,s);}.bind(this));};q.prototype.$AdsImageUploader2=function(r){var s=c('Parent').byClass(r,p.CLICK_HIJACK),t=s.parentNode;if(t){t.removeChild(s);this.decorateUploadElement(t);}};q.prototype.startUploadProcesses=function(r,s){this.inform('onUploadStarted',r);var t=[],u=0,v=r.map(function(w){return new (c('Promise'))(function(x,y){w.subscribe('succeeded',function(z,aa){t.push(aa);x();});w.subscribe('failed',function(z,aa){var ba=c('adsFormatErrorMessage')(aa);c('AdsImageUploadErrorActions').setUploadAPIError({shortMessage:j._("Upload error"),longMessage:ba});u++;x();});w.upload(s);});});c('Promise').all(v).done(function(){this.$AdsImageUploader2(s);this.uploadEnded(t,u);}.bind(this));};q.prototype.uploadEnded=function(r,s){this.inform('onUploadEnded',{succeededImages:r,numFailedImages:s});};f.exports={AdsImageUploader:q,AdsImageUploaderConstants:p};}),null);
__d('AdsCommonTargetingLoggingConstant',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirrorRecursive')({ALL_COMPONENTS_BOOTLOADED:'',CONTAINER_IMPRESSION:'',MTC_DID_LOAD:'',SESSION_DURATION:'',UI_SESSION:''},'AdsCommonTargeting');}),null);
__d('AdsTargetingTExActionTypes',['ImmutableObject','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('ImmutableObject'))(c('keyMirror')({SHOW_ADDITIONAL_TARGETING:null,HIDE_ADDITIONAL_TARGETING:null}));f.exports=h;}),null);
__d('AdsTargetingTExLoggingEvents',['ImmutableObject','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('ImmutableObject'))(c('keyMirror')({TEX_CLICK_ADDITIONAL_TARGETING_LINK:null}));f.exports=h;}),null);
__d('AdsCommonTargetingLoggerStore',['Random','Map','AdsCommonTargetingLoggingConstant','AdsCommonTargetingViewActionType','AdsDispatcher','AdsInterfacesLogEvents','AdsInterfacesLogger','AdsLocationActionTypes','AdsSavedAudienceActionTypes','AdsTargetingConnectionsLoggingEvents','AdsTargetingTExActionTypes','AdsTargetingTExLoggingEvents','ErrorUtils','FluxStore','AdsTargetingLocationLoggingEvents','TargetingActionTypes','TargetingViewLoggingEvents','performanceNow'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('AdsInterfacesLogEvents').EventCategory;h=babelHelpers.inherits(k,c('FluxStore'));i=h&&h.prototype;function k(){i.constructor.call(this,c('AdsDispatcher'));this.$AdsCommonTargetingLoggerStoreClass1=0;}k.prototype.__onDispatch=function(l){var m=l.action,n=m.methodName,o=m.type;switch(o){case c('AdsTargetingConnectionsLoggingEvents').PE_TARGETING_DIALOG_OPENED:this.$AdsCommonTargetingLoggerStoreClass1=c('performanceNow')();break;case c('AdsTargetingConnectionsLoggingEvents').PE_TARGETING_DIALOG_CANCELLED:case c('AdsTargetingConnectionsLoggingEvents').PE_TARGETING_DIALOG_CONFIRMED:c('AdsInterfacesLogger').log({eventName:c('AdsCommonTargetingLoggingConstant').SESSION_DURATION},c('AdsInterfacesLogger').LOG_TYPE_SECONDARY_APP);break;case c('AdsLocationActionTypes').BULK_INPUT_CHANGE_DEFAULT_RADIUS:c('AdsInterfacesLogger').log({eventName:c('AdsTargetingLocationLoggingEvents').GEO_LOCATION_BLIP_UPDATE_DEFAULT_RADIUS},c('AdsInterfacesLogger').LOG_TYPE_SECONDARY_APP);break;case c('AdsLocationActionTypes').BULK_INPUT_CHANGE_DEFAULT_COUNTRY:c('AdsInterfacesLogger').log({eventName:c('AdsTargetingLocationLoggingEvents').GEO_LOCATION_BLIP_UPDATE_DEFAULT_ZIP_COUNTRY},c('AdsInterfacesLogger').LOG_TYPE_SECONDARY_APP);break;case c('AdsLocationActionTypes').BULK_INPUT_FINISH_VALIDATION:c('AdsInterfacesLogger').log({eventName:c('AdsTargetingLocationLoggingEvents').GEO_LOCATION_BLIP_FINISH_VALIDATION},c('AdsInterfacesLogger').LOG_TYPE_SECONDARY_APP);break;case c('AdsLocationActionTypes').BULK_INPUT_REMOVE_ROW:c('AdsInterfacesLogger').log({eventName:c('AdsTargetingLocationLoggingEvents').GEO_LOCATION_BLIP_REMOVE_LOCATION},c('AdsInterfacesLogger').LOG_TYPE_SECONDARY_APP);break;case c('AdsLocationActionTypes').BULK_INPUT_UPDATE_VALIDATED_LOCATION:c('AdsInterfacesLogger').log({eventName:c('AdsTargetingLocationLoggingEvents').GEO_LOCATION_BLIP_UPDATE_LOCATION},c('AdsInterfacesLogger').LOG_TYPE_SECONDARY_APP);break;case c('AdsTargetingTExActionTypes').SHOW_ADDITIONAL_TARGETING:case c('AdsTargetingTExActionTypes').HIDE_ADDITIONAL_TARGETING:c('AdsInterfacesLogger').log({eventName:c('AdsTargetingTExLoggingEvents').TEX_CLICK_ADDITIONAL_TARGETING_LINK},c('AdsInterfacesLogger').LOG_TYPE_SECONDARY_APP);break;case c('AdsSavedAudienceActionTypes').VIEW.USER_CHANGE_NAV_TAB:case c('AdsSavedAudienceActionTypes').VIEW.CHANGE_NAV_TAB:c('AdsInterfacesLogger').log({eventName:o,eventCategory:j.USER_ACTION,data:{to_tab:m.navTabKey}},c('AdsInterfacesLogger').LOG_TYPE_SECONDARY_APP);break;case c('AdsSavedAudienceActionTypes').SAVED_AUDIENCE.BATCH_CREATED:c('AdsInterfacesLogger').log({eventName:o,eventCategory:j.USER_ACTION,data:{saved_audiences:m.savedAudiences}},c('AdsInterfacesLogger').LOG_TYPE_SECONDARY_APP);break;case c('AdsLocationActionTypes').INVALID_EXCLUDE:case c('TargetingActionTypes').SET_AGE_ERROR:c('AdsInterfacesLogger').log(babelHelpers['extends']({eventName:c('TargetingViewLoggingEvents').TARGETING_VIEW_DISPLAY_UI_ERROR},m),c('AdsInterfacesLogger').LOG_TYPE_SECONDARY_APP);break;default:break;}if(n===c('AdsCommonTargetingViewActionType').changeGeoLocations&&Math.floor(c('Random').random()*1000)===0)c('AdsInterfacesLogger').log({eventName:n,data:{stack_trace:c('ErrorUtils').normalizeError(new Error()).stack,vital:true}},c('AdsInterfacesLogger').LOG_TYPE_SECONDARY_APP);switch(n){case c('AdsCommonTargetingViewActionType').changeAndroidDeviceGroup:case c('AdsCommonTargetingViewActionType').changeInterestedIn:case c('AdsCommonTargetingViewActionType').changeIOSDevices:case c('AdsCommonTargetingViewActionType').changeRelationshipStatuses:case c('AdsCommonTargetingViewActionType').changeEducationStatuses:case c('AdsCommonTargetingViewActionType').changeGenders:case c('AdsCommonTargetingViewActionType').changeAgeMin:case c('AdsCommonTargetingViewActionType').changeAppInstallState:case c('AdsCommonTargetingViewActionType').changeUserAdclusters:case c('AdsCommonTargetingViewActionType').changeConjunctiveUserAdclusters:case c('AdsCommonTargetingViewActionType').changeAgeMax:case c('AdsCommonTargetingViewActionType').changeAgeMaxAndAgeMin:case c('AdsCommonTargetingViewActionType').changeMinAndroidVersion:case c('AdsCommonTargetingViewActionType').changeMinIOSVersion:case c('AdsCommonTargetingViewActionType').changeMinWindowsVersion:case c('AdsCommonTargetingViewActionType').changeMobileOperatingSystem:case c('AdsCommonTargetingViewActionType').changeWifiOnly:case c('AdsCommonTargetingViewActionType').changeGeoLocations:case c('AdsCommonTargetingViewActionType').changeLanguages:case c('AdsCommonTargetingViewActionType').changeTimezones:case c('AdsCommonTargetingViewActionType').changeConnections:case c('AdsCommonTargetingViewActionType').changeEngagements:case c('AdsCommonTargetingViewActionType').changeEducationStatus:case c('AdsCommonTargetingViewActionType').changeEducationMajors:case c('AdsCommonTargetingViewActionType').changeEducationSchools:case c('AdsCommonTargetingViewActionType').changeMaxGradYear:case c('AdsCommonTargetingViewActionType').changeMinGradYear:case c('AdsCommonTargetingViewActionType').changeTargetAllGraduationYears:case c('AdsCommonTargetingViewActionType').changeWorkEmployers:case c('AdsCommonTargetingViewActionType').changeKeywords:case c('AdsCommonTargetingViewActionType').changeCustomAudiences:case c('AdsCommonTargetingViewActionType').changeExcludedAudiences:case c('AdsCommonTargetingViewActionType').removeAudience:case c('AdsCommonTargetingViewActionType').excludeAudience:case c('AdsCommonTargetingViewActionType').includeAudience:case c('AdsCommonTargetingViewActionType').changeInterests:case c('AdsCommonTargetingViewActionType').changeWorkPositions:case c('AdsCommonTargetingViewActionType').changeFamilyStatuses:case c('AdsCommonTargetingViewActionType').changeIndustries:case c('AdsCommonTargetingViewActionType').changeLifeEvents:case c('AdsCommonTargetingViewActionType').changePolitics:case c('AdsCommonTargetingViewActionType').changeIncome:case c('AdsCommonTargetingViewActionType').changeNetWorth:case c('AdsCommonTargetingViewActionType').changeHomeType:case c('AdsCommonTargetingViewActionType').changeHomeOwnership:case c('AdsCommonTargetingViewActionType').changeHomeValue:case c('AdsCommonTargetingViewActionType').changeEthnicAffinity:case c('AdsCommonTargetingViewActionType').changeGeneration:case c('AdsCommonTargetingViewActionType').changeHouseholdComposition:case c('AdsCommonTargetingViewActionType').changeMoms:case c('AdsCommonTargetingViewActionType').changeOfficeType:case c('AdsCommonTargetingViewActionType').changeBehaviors:case c('AdsCommonTargetingViewActionType').changeFlexibleSpec:case c('AdsCommonTargetingViewActionType').changeCustomLocation:case c('AdsCommonTargetingViewActionType').changeCustomLocationCenter:case c('AdsCommonTargetingViewActionType').changeLocalGeoRadius:case c('AdsCommonTargetingViewActionType').fetchSuggestedRadius:case c('AdsCommonTargetingViewActionType').changeTargetingOptimization:case c('AdsCommonTargetingViewActionType').changePlacePageSetIDs:case c('AdsCommonTargetingViewActionType').changeAlternateAutoTargeting:c('AdsInterfacesLogger').log({eventName:n},c('AdsInterfacesLogger').LOG_TYPE_SECONDARY_APP);break;default:break;}};f.exports=new k();}),null);
__d('AdsCommonTargetingAgeEditor',['AdsCommonTargetingActions','AdsCommonTargetingSectionMixin','AdsCommonTargetingUtils','AdsLoadState','AdsValidationConsts','Bootloader','React','keyMirror','parseCustomProperties'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('keyMirror')({ageMin:null,ageMax:null}),j=c('React').createClass({displayName:'AdsCommonTargetingAgeEditor',mixins:[c('AdsCommonTargetingSectionMixin')],statics:{targetingSpecFields:{ageMin:true,ageMax:true}},propTypes:{extraData:h.object.isRequired,rowRenderer:h.func},componentDidMount:function k(){c('Bootloader').loadModules(["AdsTargetingAgeEditorSection.react"],this.updateSectionEditor,'AdsCommonTargetingAgeEditor');},renderSectionEditor:function k(){var l,m=this.getSectionEditor(),n=this.getDefaultTooltip(),o=this.getConfigValue(this.props.config.customProperties,'suggestedAgeRange'),p=this.props.extraData||{},q=Math.max(c('AdsValidationConsts').minAge,this.getConfigValue(this.props.config.customProperties,'ageMinLimit',c('AdsValidationConsts').minAge)),r=c('parseCustomProperties')(this.props.config,{ageMinOptions:[],ageMaxOptions:[]}),s=r.ageMinOptions,t=r.ageMaxOptions,u=this.getConfigValue(this.props.config.customProperties,'targetingFixStatus',{is_fixed:false,loadState:c('AdsLoadState').LOADED}),v=c('AdsCommonTargetingUtils').getFlatPermutationFragmentsFromStore(this.context.targetingMode,this.props.extraData.targetingSpecStore,(l={},l[i.ageMin]=c('AdsValidationConsts').minAgeDefault,l[i.ageMax]=c('AdsValidationConsts').maxAge,l));return c('React').createElement(m,{addPermutationVariantTooltip:p.addPermutationVariantTooltip,ageMaxOptions:t,ageMinLimit:q,ageMinOptions:s,callbackActions:{changeAgeMaxAndAgeMin:this.changeAgeMaxAndAgeMin},disableAddPermutationVariant:p.disableAddPermutationVariant,insightsLink:p.insightsLink,oneColumn:p.oneColumn,rowRenderer:this.props.rowRenderer,size:p.size,suggestedAgeRange:o,targetingDataVariants:v,targetingFixStatus:u,targetingMode:this.context.targetingMode,tooltip:n,width:this.getDefaultWidth(),onAddVariant:this._onAddVariant,onRemoveVariant:this._onRemoveVariant});},changeAgeMaxAndAgeMin:function k(l,m,n){c('AdsCommonTargetingActions').changeAgeMaxAndAgeMin(l,m,n);},_onAddVariant:function k(){c('AdsCommonTargetingActions').addTargetingPermutationVariant(Object.keys(i));},_onRemoveVariant:function k(l){c('AdsCommonTargetingActions').removeTargetingPermutationVariant(Object.keys(i),l);}});f.exports=j;}),null);
__d('AdsCommonTargetingGenderEditor',['AdsCommonTargetingActions','AdsCommonTargetingSectionMixin','AdsTargetingConstants','Bootloader','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'AdsCommonTargetingGenderEditor',propTypes:{config:h.object.isRequired,extraData:h.object,rowRenderer:h.func},getDefaultProps:function j(){return {extraData:{}};},mixins:[c('AdsCommonTargetingSectionMixin')],statics:{targetingSpecFields:{genders:true}},componentDidMount:function j(){c('Bootloader').loadModules(["AdsTargetingGenderEditor.react"],this.updateSectionEditor,'AdsCommonTargetingGenderEditor');},renderSectionEditor:function j(){var k=this.getSectionEditor(),l=this.getDefaultTooltip(),m=this.getTargetingSpecValue('genders')||[],n=this.getConfigValue(this.props.config.customProperties,'suggestedGender'),o=m&&m.length===1?m[0]:c('AdsTargetingConstants').GENDERS.ALL;return c('React').createElement(k,{changeGender:c('AdsCommonTargetingActions').changeGenders,gender:o,insightsLink:this.props.extraData.insightsLink,oneColumn:this.props.extraData.oneColumn,rowRenderer:this.props.rowRenderer,selectedDepressed:this.props.extraData.selectedDepressed,selectedUse:this.props.extraData.selectedUse,size:this.props.extraData.size,suggestedGender:n,tooltip:l,tooltipConfig:this.props.extraData.tooltipConfig,width:this.getDefaultWidth()});}});f.exports=i;}),null);
__d('AdsCommonTargetingInterestsEditor',['cx','fbt','AdsHelpLink.react','AdsCommonTargetingActions','AdsCommonTargetingSectionMixin','AdsDaoGraph','AdsTargetingAlternateAutoTargetingOptionContainer.react','AdsTargetingSectionsLabels','ApiAutoTargetingModes','BoostedComponentV2Utils','Bootloader','AdsInfoTable.react','AdsInfoTableRow.react','AdsInfoTableSection.react','React','whitelistObjectKeys'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=16,k=c('React').PropTypes,l=c('React').createClass({displayName:'AdsCommonTargetingInterestsEditor',mixins:[c('AdsCommonTargetingSectionMixin')],statics:{targetingSpecFields:{interests:true}},propTypes:{config:k.object,extraData:k.object,rowRenderer:k.func},getDefaultProps:function m(){return {extraData:{}};},componentDidMount:function m(){c('Bootloader').loadModules(["AdsSearchBrowseInterests.react"],this.updateSectionEditor,'AdsCommonTargetingInterestsEditor');},_getObjective:function m(){return this.getConfigValue(this.getConfigValue(this.props.extraData,'objectiveData',{}),'objective','');},_getDestinationID:function m(){return this.getConfigValue(this.getConfigValue(this.props.extraData,'destinationData',{}),'destinationID','');},renderSectionEditor:function m(){var n=this.getSectionEditor(),o=this.props.interestData||this.getTargetingSpecValue('interests')||[],p=this.getDefaultTooltip()||[i._("Facebook can help you reach specific audiences by looking at their interests, activities, the Pages they have liked and closely related topics."),i._("Combine interests to expand your ad's reach.")],q=this.getConfigValue(this.props.config.customProperties,'showReach',true),r=this.getConfigValue(this.props.config.customProperties,'showWhiteBox',true),s=this.getConfigValue(this.props.config.customProperties,'showSuggestionWhiteBox',true),t=this.getConfigValue(this.props.config.customProperties,'retrievePrefillSuggestions',false),u=c('whitelistObjectKeys')(this.getConfigValue(this.props.config.customProperties,'tooltipOptions',{}),{position:null}),v=t?this._getDestinationID():'',w=t?this._getObjective():null,x=this.getConfigValue(this.props.config.customProperties,'useAudienceInterests',false),y=this.getConfigValue(this.props.config.customProperties,'useContextualLayer',true),z=x,aa=z?j:null,ba=this.getTargetingSpecValue('alternateAutoTargetingOption'),ca=this.getConfigValue(this.props.config.customProperties,'appID'),da=ba?c('BoostedComponentV2Utils').getAutoTargetingMode(ca):null,ea=ba!==c('ApiAutoTargetingModes').NONE,fa=da===c('ApiAutoTargetingModes').AUTO_TARGETING?c('React').createElement(c('AdsTargetingAlternateAutoTargetingOptionContainer.react'),{autoTargetingEnabled:ea,autoTargetingOption:c('ApiAutoTargetingModes').AUTO_TARGETING,className:"_4kbt"}):null;return c('React').createElement('div',{style:{width:this.getDefaultWidth()}},c('React').createElement(c('AdsInfoTable.react'),{oneColumn:this.props.extraData.oneColumn,sectionborders:false},c('React').createElement(c('AdsInfoTableSection.react'),{className:"_5w17"},c('React').createElement(c('AdsInfoTableRow.react'),{helpLink:c('React').createElement(c('AdsHelpLink.react'),babelHelpers['extends']({position:'above',width:300},this.props.extraData.tooltipConfig),c('React').createElement('div',{className:"_4wi2"},p)),label:c('AdsTargetingSectionsLabels').interests,rowRenderer:this.props.rowRenderer,useColon:false},c('React').createElement(n,{accountID:this.props.extraData.accountID,dao:this.props.extraData.dao||c('AdsDaoGraph'),destinationID:v,enableExceedMaxInterestsWarning:z,interests:o,maxInterestsCount:aa,objective:w,ref:'unifiedInterestsTargetingComponent',retrievePrefillSuggestions:t,showReach:q,showSuggestionWhiteBox:s,showWhiteBox:r,size:this.props.size,tooltipOptions:u,useAudienceInterests:x,useContextualLayer:y,onUpdateInterests:c('AdsCommonTargetingActions').changeInterests})))),fa);}});f.exports=l;}),null);
__d('AdsTargetingLoadTimeStore',['AdsTargetingLoadTimeActionTypes','AdsInterfacesLogger','AdsCommonTargetingLoggingConstant','AdsDispatcher','AdsLoadState','FluxReduceStore','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k=j({endTime:null,entriesLoadTimeMap:{},loadTimeMap:{},loadStateMap:{},loadState:c('AdsLoadState').NOT_LOADED,objective:null,startTime:null}),l={AdsCommonTargetingLocationEditorV2:true,AdsUnifiedFlexibleTargetingEditor:true,AdsCommonTargetingConnectionsEditor:true};h=babelHelpers.inherits(m,c('FluxReduceStore'));i=h&&h.prototype;m.prototype.getInitialState=function(){return new k();};m.prototype.getLoadState=function(){return this.getState().get('loadState');};m.prototype.reduce=function(n,o){var p=o.action;switch(p.type){case c('AdsTargetingLoadTimeActionTypes').INIT_TARGETING_CONTAINER:var q={},r={},s={};p.config.forEach(function(v){if(l[v])q[v]=0;r[v]=p.time;s[v]=c('AdsLoadState').NOT_LOADED;});return n.set('startTime',p.time).set('endTime',null).set('entriesLoadTimeMap',q).set('loadState',c('AdsLoadState').LOADING).set('loadTimeMap',r).set('loadStateMap',s).set('objective',p.objective);case c('AdsTargetingLoadTimeActionTypes').COMPONENT_WILL_MOUNT:var t=p.componentName,u=p.time;r=n.get('loadTimeMap');s=n.get('loadStateMap');r[t]=u;s[t]=c('AdsLoadState').LOADING;return n.set('loadTimeMap',r).set('loadStateMap',s);case c('AdsTargetingLoadTimeActionTypes').COMPONENT_DID_MOUNT:case c('AdsTargetingLoadTimeActionTypes').COMPONENT_DID_FINISH_LOADING_ENTRIES:t=p.componentName;u=p.time;q=n.get('entriesLoadTimeMap');r=n.get('loadTimeMap');s=n.get('loadStateMap');if(n.loadState!==c('AdsLoadState').LOADING||s[t]===c('AdsLoadState').LOADED){return n;}else if(l[t]&&p.type===c('AdsTargetingLoadTimeActionTypes').COMPONENT_DID_MOUNT){q[t]=u;return n.set('entriesLoadTimeMap',q);}if(l[t])q[t]=u-q[t];r[t]=u-r[t];s[t]=c('AdsLoadState').LOADED;n=n.set('entriesLoadTimeMap',q).set('loadTimeMap',r).set('loadStateMap',s);if(this.$AdsTargetingLoadTimeStore1(s)){c('AdsInterfacesLogger').log({eventName:c('AdsCommonTargetingLoggingConstant').MTC_DID_LOAD},c('AdsInterfacesLogger').LOG_TYPE_PRIMARY_APP);n=n.set('endTime',u).set('loadState',c('AdsLoadState').LOADED);}return n;default:return n;}};m.prototype.$AdsTargetingLoadTimeStore1=function(n){return Object.keys(n).every(function(o){return n[o]===c('AdsLoadState').LOADED;});};function m(){h.apply(this,arguments);}f.exports=new m(c('AdsDispatcher'));}),null);
__d('AdsCommonTargetingScenarioLoggerStore',['AdsBaseScenarioLoggerStore','AdsDispatcher','AdsScenarios','DateConsts','AdsLoadState','AdsInterfacesLogger','AdsTargetingLoadTimeActionTypes','AdsTargetingLoadTimeStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('AdsScenarios').ActionOr,k=c('AdsScenarios').ActionFunction,l=['AdsCommonTargetingAgeEditor','AdsCommonTargetingAudienceEditor','AdsCommonTargetingGenderEditor','AdsCommonTargetingLanguagesEditor'],m=['AdsCommonTargetingAudienceEditor','AdsCommonTargetingConnectionsEditor','AdsCommonTargetingLocationEditorV2','AdsUnifiedFlexibleTargetingEditor'];h=babelHelpers.inherits(n,c('AdsBaseScenarioLoggerStore'));i=h&&h.prototype;function n(){i.constructor.call(this);var p=[],q=l.map(function(r){return {name:r+'_did_mount',start:new k(function(s){return s.type===c('AdsTargetingLoadTimeActionTypes').COMPONENT_WILL_MOUNT&&s.componentName===r;}),success:new k(function(s){return s.type===c('AdsTargetingLoadTimeActionTypes').COMPONENT_DID_MOUNT&&s.componentName===r;}),abandon:new j(p),timeout:c('DateConsts').SEC_PER_MIN};}).concat(m.map(function(r){return {name:r+'_did_finish_loading_entries',start:new k(function(s){return s.type===c('AdsTargetingLoadTimeActionTypes').COMPONENT_WILL_MOUNT&&s.componentName===r;}),success:new k(function(s){return s.type===c('AdsTargetingLoadTimeActionTypes').COMPONENT_DID_FINISH_LOADING_ENTRIES&&s.componentName===r;}),abandon:new j(p),timeout:c('DateConsts').SEC_PER_MIN};}));this.prepareScenarios([{name:'MTC_did_mount',start:new j([c('AdsTargetingLoadTimeActionTypes').INIT_TARGETING_CONTAINER]),success:new k(function(r){c('AdsDispatcher').waitFor([c('AdsTargetingLoadTimeStore').getDispatchToken()]);var s=c('AdsTargetingLoadTimeStore').getLoadState();return s===c('AdsLoadState').LOADED;}),abandon:new j(p),timeout:c('DateConsts').SEC_PER_MIN},{name:'MTC_TTI',start:new j([c('AdsTargetingLoadTimeActionTypes').INIT_TARGETING_CONTAINER]),success:new j([c('AdsTargetingLoadTimeActionTypes').COMPONENT_DID_MOUNT,c('AdsTargetingLoadTimeActionTypes').COMPONENT_DID_FINISH_LOADING_ENTRIES]),abandon:new j(p),timeout:c('DateConsts').SEC_PER_MIN}].concat(q));}n.prototype.getStateData=function(){return {};};n.prototype.log=function(p,q){c('AdsInterfacesLogger').log({eventName:p,data:q},c('AdsInterfacesLogger').LOG_TYPE_SECONDARY_APP);};var o=new n();f.exports=o;}),null);
__d('AdsUnifiedFlexibleTargetingEditor',['cx','AdsCommonTargetingActions','AdsCommonTargetingSectionMixin','AdsCommonTargetingUtils','AdsDaoGraph','AdsTargetingAlternateAutoTargetingOptionContainer.react','ApiAutoTargetingModes','BoostedComponentV2Utils','Bootloader','React','getByPath','keyMirror','parseCustomProperties'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('keyMirror')({flexibleSpec:null,targetingOptimization:null}),k=c('React').createClass({displayName:'AdsUnifiedFlexibleTargetingEditor',mixins:[c('AdsCommonTargetingSectionMixin')],shouldDeferLoadEnd:true,statics:{targetingSpecFields:{flexibleSpec:true,exclusions:true}},propTypes:{config:i.object,extraData:i.shape({accountID:i.string.isRequired,campaignIDs:i.array,destinationData:i.shape({destinationID:i.string}),objectiveData:i.shape({objective:i.string}),promotedObject:i.object}).isRequired,rowRenderer:i.func},getDefaultProps:function l(){return {isMixedState:false,extraData:{}};},componentDidMount:function l(){c('Bootloader').loadModules(["AdsTargetingFlexibleTargetingEditorSection.react"],this.updateSectionEditor,'AdsUnifiedFlexibleTargetingEditor');},renderSectionEditor:function l(){var m=this.getSectionEditor(),n=this._getTargetingData(),o=c('parseCustomProperties')(this.props.config,{appID:null,browseWhitelistedTypes:null,disableExcludeLink:false,disableIncludeLink:false,enforceTargetingOptimization:true,hideBrowseTreeRoot:false,noUIContextualLayerParent:false,placeholder:null,retrievePrefillSuggestions:false,rowLabel:null,rowLabelTooltip:null,searchWhitelistedTypes:null,showSuggestionWhiteBox:true,showWhiteBox:true,suggestionWhitelistedTypes:null,tooltipOptions:{},useContextualLayer:true,useHint:false}),p=o.appID,q=o.browseWhitelistedTypes,r=o.disableExcludeLink,s=o.disableIncludeLink,t=o.enforceTargetingOptimization,u=o.hideBrowseTreeRoot,v=o.noUIContextualLayerParent,w=o.placeholder,x=o.retrievePrefillSuggestions,y=o.rowLabel,z=o.rowLabelTooltip,aa=o.searchWhitelistedTypes,ba=o.showSuggestionWhiteBox,ca=o.showWhiteBox,da=o.suggestionWhitelistedTypes,ea=o.tooltipOptions,fa=o.useContextualLayer,ga=o.useHint,ha=this.getTargetingSpecValue('alternateAutoTargetingOption'),ia=ha?c('BoostedComponentV2Utils').getAutoTargetingMode(p):null,ja=ha!==c('ApiAutoTargetingModes').NONE,ka=ia===c('ApiAutoTargetingModes').AUTO_TARGETING?c('React').createElement(c('AdsTargetingAlternateAutoTargetingOptionContainer.react'),{autoTargetingEnabled:ja,autoTargetingOption:c('ApiAutoTargetingModes').AUTO_TARGETING,className:"_4kbt"}):null;return c('React').createElement('div',null,c('React').createElement(m,{accountID:this.props.extraData.accountID,browseWhitelistedTypes:q,callbackActions:{onOptimizationChange:c('AdsCommonTargetingActions').changeTargetingOptimization,onTargetingChange:c('AdsCommonTargetingActions').changeFlexibleSpec},campaignIDs:this.props.extraData.campaignIDs,className:"_5zsg",dao:this.props.extraData.dao||c('AdsDaoGraph'),destinationID:this._getDestination(),disableExcludeLink:r,disableIncludeLink:s,enforceTargetingOptimization:t,hideBrowseTreeRoot:u,noUIContextualLayerParent:v,objective:this._getObjective(),oneColumn:this.props.extraData.oneColumn,placeholder:w,promotedObject:this.props.extraData.promotedObject,rowLabel:y,rowLabelTooltip:z,rowRenderer:this.props.rowRenderer,searchWhitelistedTypes:aa,shouldPrefetchDescriptors:x,showSuggestionWhiteBox:ba,showWhiteBox:ca,suggestionWhitelistedTypes:da,targetingDataVariants:n,targetingMode:this.context.targetingMode,tooltipConfig:this.props.extraData.tooltipConfig,tooltipOptions:ea,useContextualLayer:fa,useHint:ga,width:this.getDefaultWidth(),onAddVariant:this._onAddVariant,onFinishedLoading:this.context.registerLoadEnd,onRemoveVariant:this._onRemoveVariant}),ka);},_getDestination:function l(){return c('getByPath')(this.props.extraData,['destinationData','destinationID']);},_getObjective:function l(){return c('getByPath')(this.props.extraData,['objectiveData','objective']);},_getTargetingData:function l(){var m,n=c('AdsCommonTargetingUtils').getFlatPermutationFragmentsFromStore(this.context.targetingMode,this.props.extraData.targetingSpecStore,(m={},m[j.flexibleSpec]=[],m[j.targetingOptimization]=undefined,m));return n;},_onAddVariant:function l(){c('AdsCommonTargetingActions').addTargetingPermutationVariant(Object.keys(j));},_onRemoveVariant:function l(m){c('AdsCommonTargetingActions').removeTargetingPermutationVariant(Object.keys(j),m);}});f.exports=k;}),null);
__d('TargetingActions',['AdsDispatcher','TargetingActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h={clearAllTargetingStore:function i(){h.clearTargetingSpecStore();h.clearTargetingViewStore();},clearTargetingSpecStore:function i(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('TargetingActionTypes').CLEAR_TARGETING_SPEC_STORE});},closeCreateCustomAudienceDialog:function i(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('TargetingActionTypes').CLOSE_CREATE_CUSTOM_AUDIENCE_DIALOG});},showCreateCustomAudienceDialog:function i(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('TargetingActionTypes').SHOW_CREATE_CUSTOM_AUDIENCE_DIALOG});},updateTargetingSpec:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({type:c('TargetingActionTypes').UPDATE_TARGETING_SPEC,spec:j});},setTargetingApiSpec:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({type:c('TargetingActionTypes').SET_TARGETING_API_SPEC,spec:j,behaviors:k});},clearTargetingViewStore:function i(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('TargetingActionTypes').CLEAR_TARGETING_VIEW_STORE});},resetMixedStateComponent:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({type:c('TargetingActionTypes').RESET_MIX_STATE_COMPONENT,component:j});},setAgeErrors:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({type:c('TargetingActionTypes').SET_AGE_ERROR,ageErrors:j});},setBulkApiSpec:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({type:c('TargetingActionTypes').SET_TARGETING_BULK_API_SPEC,spec:j,behaviors:k});},setPermutableApiSpec:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({type:c('TargetingActionTypes').SET_PERMUTABLE_TARGETING_API_SPEC,spec:j,behaviors:k});}};f.exports=h;}),null);
__d('TargetingViewConfigValidator',['invariant','TargetingViewConfig'],(function a(b,c,d,e,f,g,h){'use strict';function i(k){k.forEach(function(l){var m=l.component;m.targetingSpecFields||h(0);});}var j={validate:i};f.exports=j;}),null);
__d('TargetingViewRenderer.react',['cx','React','curry','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').Component,l=c('React').PropTypes;i=babelHelpers.inherits(m,k);j=i&&i.prototype;m.prototype.render=function(){var n=[];this.props.config.forEach(function(o,p){var q=o.component,r=c('curry')(this.props.rowRenderer,this.props.targetingSpec,o),s=c('curry')(this.props.rowRenderer.rendersWhatHasBeenPassedIn,this.props.targetingSpec,o),t=c('joinClasses')("_5eb4",o.className);n.push(c('React').createElement('div',{className:t,key:p},c('React').createElement(q,{config:o,extraData:this.context.getExtraData(),rowRenderer:r,rowRendererRendersWhatHasBeenPassedIn:s})));}.bind(this));return c('React').createElement('div',{className:"_4d2m"},n);};function m(){i.apply(this,arguments);}m.contextTypes={getExtraData:l.func.isRequired};f.exports=m;}),null);
__d('TargetingContainerFactory',['AdsCommonTargetingLoggerStore','AdsTargetingLoadTimeStore','AdsCommonTargetingScenarioLoggerStore','AdsPerfUtils','AdsTargetingConnectConfig','AdsTargetingLoadTimeActions','FluxContainer','React','Set','TargetingViewConfigValidator','TargetingViewRenderer.react','WebApiApplication','getByPath','performanceNow'],(function a(b,c,d,e,f,g){'use strict';c('AdsCommonTargetingLoggerStore');c('AdsTargetingLoadTimeStore');c('AdsCommonTargetingScenarioLoggerStore');var h=c('React').Component,i=c('React').PropTypes,j=c('AdsPerfUtils').LoadCounter;function k(m){var n,o,p=m.initializeStore,q=m.onTargetingSpecChange,r=m.rowRenderer,s=m.specUtils,t=m.targetingMode,u=m.targetingSpecStore;n=babelHelpers.inherits(v,h);o=n&&n.prototype;function v(w){'use strict';o.constructor.call(this,w);this.loadCounter=new j();this.$TargetingBaseContainer1=function(){if(this.props.onFinishedLoading)this.loadCounter.registerLoadStart();}.bind(this);this.$TargetingBaseContainer2=function(){if(this.props.onFinishedLoading)this.loadCounter.registerLoadEnd(this.props.onFinishedLoading);}.bind(this);if(!c('WebApiApplication').getAccessToken())c('WebApiApplication').init(c('AdsTargetingConnectConfig').access_token,c('AdsTargetingConnectConfig').client_id);}v.prototype.getChildContext=function(){'use strict';var w=babelHelpers['extends']({},this.props.extraData,{targetingSpecStore:u});return {getExtraData:function x(){return w;},registerLoadEnd:this.$TargetingBaseContainer2,registerLoadStart:this.$TargetingBaseContainer1,targetingMode:t};};v.getStores=function(){'use strict';return [u];};v.calculateState=function(){'use strict';var w=u.getState();return {targetingSpec:w};};v.prototype.componentWillMount=function(){'use strict';c('TargetingViewConfigValidator').validate(this.props.config);var w=this.props.config.map(function(y){return y.component.displayName;}).filter(function(y){return y!=='TargetingSectionDivider';}),x=c('getByPath')(this.props.extraData,['objectiveData','objective']);c('AdsTargetingLoadTimeActions').initTargetingContainer(t,w,c('performanceNow')(),x);if(this.props.defaultSpec)p(this.props);};v.prototype.componentWillReceiveProps=function(w){'use strict';c('TargetingViewConfigValidator').validate(w.config);if(w.defaultSpec){var x=s.getAggregatedSpecFromState(this.state.targetingSpec),y=s.defaultSpecToAggregatedSpec(this.props.defaultSpec,this.props.extraData.apiTransformerBehaviors),z=s.defaultSpecToAggregatedSpec(w.defaultSpec,w.extraData.apiTransformerBehaviors);if(s.hasSpecChanged(x,z,w.extraData.targetingSpecBlacklist)&&s.hasSpecChanged(y,z,w.extraData.targetingSpecBlacklist))p(w);}};v.prototype.componentDidUpdate=function(w,x){'use strict';if(x.targetingSpec.equals(this.state.targetingSpec))return;var y=s.getAggregatedSpecFromState(x.targetingSpec),z=s.getAggregatedSpecFromState(this.state.targetingSpec);if(s.hasSpecChanged(y,z,this.props.extraData.targetingSpecBlacklist))q(this.props,this.state.targetingSpec);};v.prototype.render=function(){'use strict';return c('React').createElement('div',null,c('React').createElement(c('TargetingViewRenderer.react'),{config:this.props.config,defaultWidth:this.props.defaultWidth,mixedStateComponents:new (c('Set'))(),rowRenderer:r,targetingSpec:this.state.targetingSpec}));};v.defaultProps={defaultWidth:680};v.childContextTypes={getExtraData:i.func.isRequired,targetingMode:i.string,registerLoadEnd:i.func,registerLoadStart:i.func};return c('FluxContainer').create(v);}var l={create:k};f.exports=l;}),null);
__d('targetingBulkRowRenderer',['cx','fbt','Link.react','React','TargetingActions','TargetingBulkSpecUtils','idx'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').Component;function m(q){var r=q.showEditLink,s=q.onEditMixedState,t=q.onResetMixedState,u=void 0;if(r)u=c('React').createElement(c('Link.react'),{className:"_bb0",onClick:s},i._("Edit"));return c('React').createElement('div',{className:"_bb3"},u,c('React').createElement(c('Link.react'),{onClick:t},'Reset'));}j=babelHelpers.inherits(n,l);k=j&&j.prototype;function n(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.$MixedStateComponent1=function(){c('TargetingActions').resetMixedStateComponent(this.props.config.component);}.bind(this),this.$MixedStateComponent2=function(){var v=this.props.config.customProperties;if(v&&v.bulkEditAction)v.bulkEditAction(v.bulkEditCampaigns,v.bulkEditDialogType,v.bulkEditSource);}.bind(this),r;}n.prototype.render=function(){var q;return c('React').createElement('div',null,c('React').createElement('span',{className:"_5eb7"},i._("Mixed State")),c('React').createElement(m,{showEditLink:(q=this.props.config)!=null?(q=q.customProperties)!=null?q.mixedStateEditableInDialog:q:q,onEditMixedState:this.$MixedStateComponent2,onResetMixedState:this.$MixedStateComponent1}));};function o(q,r){var s;return c('TargetingBulkSpecUtils').isMixedStateComponent(r.component,q)&&!((s=r)!=null?(s=s.customProperties)!=null?s.mixedStateEditable:s:s);}function p(q,r,s,t,u){if(o(q,r))u=c('React').cloneElement(u,{children:c('React').createElement(n,{config:r})});return c('React').createElement('div',s.props,t,u);}p.rendersWhatHasBeenPassedIn=function(){return !o.apply(undefined,arguments);};f.exports=p;}),null);
__d('TargetingBulkContainer.react',['AdsCommonTargetingUtils','TargetingActions','TargetingBulkSpecUtils','TargetingContainerFactory','TargetingContainerMode','TargetingSpecStore','targetingBulkRowRenderer'],(function a(b,c,d,e,f,g){'use strict';var h=c('TargetingBulkSpecUtils').getBulkApiSpecFromState,i=c('TargetingBulkSpecUtils').getTargetingApiSpecFromState,j=c('TargetingBulkSpecUtils').transformSpecToAdsBulkValue,k={hasSpecChanged:c('AdsCommonTargetingUtils').hasBulkSpecChanged,defaultSpecToAggregatedSpec:function m(n,o){return j(n||{});},getAggregatedSpecFromState:h},l=c('TargetingContainerFactory').create({targetingMode:c('TargetingContainerMode').BULK,targetingSpecStore:c('TargetingSpecStore'),initializeStore:function m(n){return c('TargetingActions').setBulkApiSpec(k.defaultSpecToAggregatedSpec(n.defaultSpec||{}),n.extraData.apiTransformerBehaviors);},onTargetingSpecChange:function m(n,o){return n.onTargetingSpecChange(i(o),h(o));},rowRenderer:c('targetingBulkRowRenderer'),specUtils:k});f.exports=l;}),null);
__d('TargetingContainer.react',['AdsTargetingWebdriverIDs','React','TargetingBulkContainer.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').Component;h=babelHelpers.inherits(k,j);i=h&&h.prototype;k.prototype.render=function(){return c('React').createElement('div',{'data-testid':c('AdsTargetingWebdriverIDs').TARGETING_CONTAINER},c('React').createElement(c('TargetingBulkContainer.react'),{config:this.props.config,defaultSpec:this.props.defaultApiSpec,defaultWidth:this.props.defaultWidth,extraData:this.props.extraData,onFinishedLoading:this.props.onFinishedLoading,onTargetingSpecChange:this.props.onTargetingSpecChange}));};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d("XVideoCaptionCreateSRTJobAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/captioneditor\/createSRT\/",{caption_id:{type:"Int",required:true},queue_id:{type:"Int"}});}),null);
__d("XVideoCaptionDownloadAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/captioneditor\/download\/",{caption_id:{type:"Int",required:true}});}),null);
__d("XVideoCaptionEditorAdsNUXController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/captioneditor\/nuxstatus\/",{});}),null);
__d("XVideoCaptionEntryV2NuxLogDismissAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/captioneditor\/adnux\/log\/dismiss\/",{});}),null);
__d("XVideoCaptionEntryV2NuxLogViewAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/captioneditor\/adnux\/log\/view\/",{});}),null);
__d("XVideoCaptionGenerateAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/captioneditor\/generate\/",{video_id:{type:"Int",required:true}});}),null);
__d("XVideoCaptionNotifAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/captioneditor\/notif\/",{caption_id:{type:"Int",required:true},source_app_id:{type:"FBID"},placement:{type:"Enum",enumType:0},ad_account_id:{type:"Int",required:true}});}),null);
__d("XVideoCaptionPublishAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/captioneditor\/publish\/",{caption_id:{type:"Int",required:true},source_app_id:{type:"FBID"}});}),null);
__d("XVideoCaptionRevokeSRTJobAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/captioneditor\/revokeSRT\/",{caption_id:{type:"Int",required:true},queue_id:{type:"Int"}});}),null);
__d("XVideoCaptionShareAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/captioneditor\/share\/",{caption_id:{type:"Int",required:true},revoke:{type:"Int"}});}),null);
__d("XVideoUnPublishCaptionAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/captioneditor\/unpublish\/",{caption_id:{type:"Int",required:true},source_app_id:{type:"FBID"}});}),null);
__d('AdsAutoGeneratedCaptionDataManager',['fbt','AdsGraphAPI','AdsAutoCaptionConfig','AdsAutoGeneratedCaptionActions','AdsVideoCaptionActions','AsyncRequest','AsyncResponse','GraphAPIPolling','SimpleXUIDialog','VideoSpeechRecoTaskStatus','XVideoCaptionCreateSRTJobAsyncController','XVideoCaptionDownloadAsyncController','XVideoCaptionEditorAdsNUXController','XVideoCaptionEntryV2NuxLogDismissAsyncController','XVideoCaptionEntryV2NuxLogViewAsyncController','XVideoCaptionGenerateAsyncController','XVideoCaptionNotifAsyncController','XVideoCaptionRevokeSRTJobAsyncController','XVideoCaptionShareAsyncController','XVideoCaptionPublishAsyncController','XVideoUnPublishCaptionAsyncController','VideoCaptionEditEvents','VideoSubtitleStatusType','WebApiApplication'],(function a(b,c,d,e,f,g,h){'use strict';var i={_isNewVideo:false,downloadCaption:function j(k,l){var m=c('XVideoCaptionDownloadAsyncController').getURIBuilder().setInt('caption_id',l).getURI();new (c('AsyncRequest'))().setMethod('POST').setHandler(function(n){var o=n.payload||'';try{var p=new Blob([o],{type:'text/plain'}),q=window.URL.createObjectURL(p),r=document.createElement('a');r.href=q;r.setAttribute('download',l+'.en_US.srt');r.click();c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').DOWNLOAD_SUCCESS,k,l);}catch(s){c('SimpleXUIDialog').show(h._("Something went wrong. We're working getting this fixed as soon as we can. You may be able to try again."),h._("Download Error"));c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').DOWNLOAD_ERROR,k,l);}}).setErrorHandler(function(n){c('AsyncResponse').defaultErrorHandler(n);c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').DOWNLOAD_ERROR,k,l);}).setURI(m).send();},fetchCaptions:function j(k,l,m){this._isNewVideo=l;this._pollCaptions(k,m)['catch'](function(n){return;}).done(function(n){var o=n.data,p=o&&o[0]&&o[0].id;if(p)c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').FETCHED_SUCCESS,k,p,l.toString());});},_pollCaptions:function j(k,l){var m=Date.now(),n={data:[]},o=c('GraphAPIPolling').poll(function(){return c('AdsGraphAPI').get(f.id).object('video',k).edge('auto_generated_captions').get({fields:['id','locale','last_published_time','last_save_time','review_expire_time','status']});},function(p){if(!p.data||p.data.length===0){var q=c('AdsAutoCaptionConfig').time_out_in_starting_process;if(!this._isNewVideo||Date.now()-m>=q){if(!this._isNewVideo){this._generateCaption(k,l);}else{c('AdsAutoGeneratedCaptionActions').setCaptions(k,[],l);c('AdsVideoCaptionActions').hideAutoCaption(k);}return true;}c('AdsAutoGeneratedCaptionActions').setCaptions(k,[],l);return false;}c('AdsAutoGeneratedCaptionActions').setCaptions(k,p.data,l);c('AdsVideoCaptionActions').setCaption(p.data,k);n=p;var r=true;p.data.forEach(function(s){var t=c('VideoSubtitleStatusType')[s.status];if(t===c('VideoSubtitleStatusType').PROCESSING){r=false;return;}});return r;}.bind(this),c('AdsAutoCaptionConfig').time_out_in_processing,c('AdsAutoCaptionConfig').poll_interval);return o(n).then(function(){return n;});},fetchShouldShowNUX:function j(k){var l=c('XVideoCaptionEditorAdsNUXController').getURIBuilder().getURI();new (c('AsyncRequest'))().setMethod('POST').setURI(l).setHandler(function(m){var n=m.payload||{};c('AdsAutoGeneratedCaptionActions').setNUXStatus(n,k);}).send();},setEntryV2NUXClosed:function j(){var k=c('XVideoCaptionEntryV2NuxLogDismissAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))().setMethod('POST').setURI(k).send();},setEntryV2NUXViewed:function j(){var k=c('XVideoCaptionEntryV2NuxLogViewAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))().setMethod('POST').setURI(k).send();},shareCaption:function j(k,l,m){var n=c('XVideoCaptionShareAsyncController').getURIBuilder().setInt('caption_id',l).getURI();new (c('AsyncRequest'))().setMethod('POST').setHandler(function(o){var p=o.payload||{};c('AdsAutoGeneratedCaptionActions').onShareEdit(l,p,m);c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').SHARE_SUCCESS,k,l);}).setErrorHandler(function(o){c('AsyncResponse').defaultErrorHandler(o);c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').SHARE_ERROR,k,l);}).setURI(n).send();},revokeShareCaption:function j(k,l,m){var n=c('XVideoCaptionShareAsyncController').getURIBuilder().setInt('caption_id',l).setInt('revoke',1).getURI();new (c('AsyncRequest'))().setMethod('POST').setHandler(function(o){var p=o.payload||{};c('AdsAutoGeneratedCaptionActions').onShareEdit(l,p,m);c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').REVOKE_SHARE_SUCCESS,k,l);}).setErrorHandler(function(o){c('AsyncResponse').defaultErrorHandler(o);c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').REVOKE_SHARE_ERROR,k,l);}).setURI(n).send();},createSRTJob:function j(k,l){l.map(function(m){var n=m.get('id'),o=c('XVideoCaptionCreateSRTJobAsyncController').getURIBuilder().setInt('caption_id',n);new (c('AsyncRequest'))().setMethod('POST').setHandler(function(p){var q=p.payload;if(q&&q.created==='success'){c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').CREATE_SRT_SUCCESS,k,n,q&&q.message);}else c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').CREATE_SRT_ERROR,k,n,q&&q.error);}).setURI(o.getURI()).send();});},sendNotif:function j(k,l,m){var n=c('XVideoCaptionNotifAsyncController').getURIBuilder().setInt('caption_id',k).setFBID('source_app_id',c('WebApiApplication').getClientID()).setEnum('placement',l).setInt('ad_account_id',m);new (c('AsyncRequest'))().setMethod('POST').setURI(n.getURI()).send();},revokeSRTJob:function j(k,l){l.map(function(m){var n=m.get('id'),o=c('XVideoCaptionRevokeSRTJobAsyncController').getURIBuilder().setInt('caption_id',n);new (c('AsyncRequest'))().setMethod('POST').setHandler(function(p){var q=p.payload;if(q&&q.created==='success'){c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').REVOKE_SRT_SUCCESS,k,n,q&&q.message);}else c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').REVOKE_SRT_ERROR,k,n,q&&q.error);}).setURI(o.getURI()).send();});},publishCaption:function j(k,l){var m=c('XVideoCaptionPublishAsyncController').getURIBuilder().setInt('caption_id',l).setFBID('source_app_id',c('WebApiApplication').getClientID()).getURI();new (c('AsyncRequest'))().setMethod('POST').setHandler(function(n){var o=n.payload;if(o&&o.published==='success'){c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').PUBLISH_SUCCESS,k,l,o&&o.transcription);}else c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').PUBLISH_ERROR,k,l,o&&o.error);}).setURI(m).send();},unPublishCaption:function j(k,l,m){var n=c('XVideoUnPublishCaptionAsyncController').getURIBuilder().setInt('caption_id',l).setFBID('source_app_id',c('WebApiApplication').getClientID()).getURI();new (c('AsyncRequest'))().setMethod('POST').setHandler(function(o){var p=o.payload;if(p&&p.unpublish_status==='success'){c('AdsAutoGeneratedCaptionActions').fetchCaptions(k,m);c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').UNPUBLISH_SUCCESS,k,l);}else c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').UNPUBLISH_ERROR,k,l,p&&p.error);}).setURI(n).send();},getIsNewVideo:function j(){return this._isNewVideo;},_generateCaption:function j(k,l){var m=c('XVideoCaptionGenerateAsyncController').getURIBuilder().setInt('video_id',k).getURI();new (c('AsyncRequest'))().setMethod('POST').setHandler(function(n){var o=n.payload;if(o&&o.status===c('VideoSpeechRecoTaskStatus').SCHEDULED){c('AdsAutoGeneratedCaptionActions').setNewVideo(k,l);c('AdsAutoGeneratedCaptionActions').fetchCaptions(k,l);c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').GENERATE_SUCCESS,k,o.caption_id);}else{c('AdsAutoGeneratedCaptionActions').setCaptions(k,[],l);c('AdsVideoCaptionActions').hideAutoCaption(k);c('AdsVideoCaptionActions').logEvent(c('VideoCaptionEditEvents').GENERATE_ERROR,k,o&&o.error);}}).setURI(m).send();}};f.exports=i;}),null);
__d('AdsAutoGeneratedCaptionActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({CAPTIONS:{CREATE_SRT_JOB:'',DOWNLOAD:'',FETCH:'',SET:'',SHARE:'',SHARE_EDIT:'',REVOKE_SHARE:'',UNPUBLISH:''},INIT_NUX_STATUS:'',SET_NUX_STATUS:'',SET_NEW_VIDEO:'',SET_ENTRY_NUX_V2_VIEWED:'',SET_ENTRY_NUX_V2_CLOSED:''},'AdsAutoGeneratedCaption');f.exports=h;}),null);
__d('AdsAutoGeneratedCaptionActions',['AdsAutoGeneratedCaptionActionTypes','AdsDispatcher','AdsAutoGeneratedCaptionStore'],(function a(b,c,d,e,f,g){'use strict';var h={downloadCaption:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsAutoGeneratedCaptionActionTypes').CAPTIONS.DOWNLOAD,captionID:j,platform:k});},fetchCaptions:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsAutoGeneratedCaptionActionTypes').CAPTIONS.FETCH,videoID:j,platform:k});},setCaptions:function i(j,k,l){c('AdsDispatcher').handleUpdateFromViewAction({captions:k,type:c('AdsAutoGeneratedCaptionActionTypes').CAPTIONS.SET,videoID:j,platform:l});},setNewVideo:function i(j,k){c('AdsAutoGeneratedCaptionStore');c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsAutoGeneratedCaptionActionTypes').SET_NEW_VIDEO,videoID:j,platform:k});},initNUXStatus:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsAutoGeneratedCaptionActionTypes').INIT_NUX_STATUS,platform:j});},setNUXStatus:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsAutoGeneratedCaptionActionTypes').SET_NUX_STATUS,payload:j,platform:k});},setEntryV2NUXViewed:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsAutoGeneratedCaptionActionTypes').SET_ENTRY_NUX_V2_VIEWED,platform:j});},setEntryV2NUXClosed:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsAutoGeneratedCaptionActionTypes').SET_ENTRY_NUX_V2_CLOSED,platform:j});},setShareCaption:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({captionID:j,type:c('AdsAutoGeneratedCaptionActionTypes').CAPTIONS.SHARE,platform:k});},setRevokeShareCaption:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({captionID:j,type:c('AdsAutoGeneratedCaptionActionTypes').CAPTIONS.REVOKE_SHARE,platform:k});},onShareEdit:function i(j,k,l){c('AdsDispatcher').handleUpdateFromViewAction({captionID:j,expireTime:k.expire_time,type:c('AdsAutoGeneratedCaptionActionTypes').CAPTIONS.SHARE_EDIT,platform:l});},unPublishCaption:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({locale:j,type:c('AdsAutoGeneratedCaptionActionTypes').CAPTIONS.UNPUBLISH,platform:k});}};f.exports=h;}),null);
__d('AdsAutoGeneratedCaptionStore',['AdsDispatcher','AdsAutoGeneratedCaptionActionTypes','AdsAutoGeneratedCaptionDataManager','FluxReduceStore','immutable','VideoSubtitleStatusType'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l,m;h=babelHelpers.inherits(n,c('immutable').Record({captions:[],isFetched:false,newVideos:[],showEditorNUX:false,showEntryV2NUX:false,videoID:null}));i=h&&h.prototype;function n(){h.apply(this,arguments);}j=babelHelpers.inherits(o,c('immutable').Record({default_platform:new n(),instagram:new n()}));k=j&&j.prototype;function o(){j.apply(this,arguments);}l=babelHelpers.inherits(p,c('FluxReduceStore'));m=l&&l.prototype;function p(q){m.constructor.call(this,q);}p.prototype.getInitialState=function(){return new o();};p.prototype.reduce=function(q,r){var s=r.action;switch(s.type){case c('AdsAutoGeneratedCaptionActionTypes').CAPTIONS.DOWNLOAD:c('AdsAutoGeneratedCaptionDataManager').downloadCaption(q.getIn([s.platform,'videoID']),s.captionID);return q;case c('AdsAutoGeneratedCaptionActionTypes').CAPTIONS.FETCH:return q.update(s.platform,function(w){var x=w.set('isFetched',false),y=x.get('newVideos').indexOf(s.videoID)>=0;c('AdsAutoGeneratedCaptionDataManager').fetchCaptions(s.videoID,y,s.platform);return x.set('videoID',s.videoID);});case c('AdsAutoGeneratedCaptionActionTypes').CAPTIONS.SET:return this.$AdsAutoGeneratedCaptionStore1(q,s);case c('AdsAutoGeneratedCaptionActionTypes').CAPTIONS.SHARE:c('AdsAutoGeneratedCaptionDataManager').shareCaption(q.getIn([s.platform,'videoID']),s.captionID,s.platform);return q;case c('AdsAutoGeneratedCaptionActionTypes').CAPTIONS.REVOKE_SHARE:c('AdsAutoGeneratedCaptionDataManager').revokeShareCaption(q.getIn([s.platform,'videoID']),s.captionID,s.platform);return q;case c('AdsAutoGeneratedCaptionActionTypes').CAPTIONS.SHARE_EDIT:return this.$AdsAutoGeneratedCaptionStore2(q,s);case c('AdsAutoGeneratedCaptionActionTypes').INIT_NUX_STATUS:c('AdsAutoGeneratedCaptionDataManager').fetchShouldShowNUX(s.platform);return q;case c('AdsAutoGeneratedCaptionActionTypes').SET_NUX_STATUS:q=q.setIn([s.platform,'showEditorNUX'],s.payload&&s.payload.showEditorNUX);q=q.setIn([s.platform,'showEntryV2NUX'],s.payload&&s.payload.showEntryV2NUX);return q;case c('AdsAutoGeneratedCaptionActionTypes').SET_NEW_VIDEO:var t=q.getIn([s.platform,'newVideos']).slice();t.push(s.videoID);if(s.videoID===q.getIn([s.platform,'videoID']))c('AdsAutoGeneratedCaptionDataManager').fetchCaptions(s.videoID,true,s.platform);return q.setIn([s.platform,'newVideos'],t);case c('AdsAutoGeneratedCaptionActionTypes').CAPTIONS.UNPUBLISH:var u=q.getIn([s.platform,'captions']),v=s.locale;if(u&&u.length>0&&u[0].locale===v)c('AdsAutoGeneratedCaptionDataManager').unPublishCaption(q.getIn([s.platform,'videoID']),u[0].id,s.platform);return q;case c('AdsAutoGeneratedCaptionActionTypes').SET_ENTRY_NUX_V2_VIEWED:c('AdsAutoGeneratedCaptionDataManager').setEntryV2NUXViewed(s.platform);return q;case c('AdsAutoGeneratedCaptionActionTypes').SET_ENTRY_NUX_V2_CLOSED:c('AdsAutoGeneratedCaptionDataManager').setEntryV2NUXClosed(s.platform);return q.setIn([s.platform,'showEntryV2NUX'],false);default:return q;}};p.prototype.getIsFetched=function(q){return this.getState().getIn([q,'isFetched']);};p.prototype.$AdsAutoGeneratedCaptionStore1=function(q,r){if(r.videoID!==q.getIn([r.platform,'videoID']))return q;var s=c('AdsAutoGeneratedCaptionDataManager').getIsNewVideo();if(s&&(!r.captions||!r.captions[0])||r.captions&&r.captions[0]&&c('VideoSubtitleStatusType')[r.captions[0].status]===c('VideoSubtitleStatusType').PROCESSING&&q.getIn([r.platform,'isFetched']))return q;q=q.setIn([r.platform,'isFetched'],true);return q.setIn([r.platform,'captions'],r.captions);};p.prototype.$AdsAutoGeneratedCaptionStore2=function(q,r){var s=q.getIn([r.platform,'captions']).map(function(t){if(t.id!==r.captionID)return t;return Object.assign({},t,{review_expire_time:parseInt(r.expireTime,10)});});return q.setIn([r.platform,'captions'],s);};f.exports=new p(c('AdsDispatcher'));}),null);
__d('AdsVideoCaptionActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({CAPTION_CONFIG_INIT:null,CAPTION_HIDE_AUTO:null,CAPTION_OPTION_SELECT:null,CAPTION_REMOVE_FROM_AD:null,CAPTION_SAVE_TO_AD:null,CAPTION_SET:null,REVIEW_OPTION_SELECT:null,UPDATE_PREVIEW:null,CREATE_SRT_JOB_WITH_FB_REVIEW:null,REVOKE_SRT_JOB_WITH_FB_REVIEW:null,CAPTION_LOGGING:null});}),null);
__d('AdsVideoCaptionUtils',['fbt','Promise','AdsGraphAPI','AdsVideoFetcher','FBJSON','GraphAPI','SimpleXUIDialog','URI','UrlMap','VideoCaptionFile','VideoCreatorProductType','adsGKCheck'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('AdsGraphAPI').getVersion(),j=180,k={upload:function l(m,n,o){return new (c('Promise'))(function(p,q){var r=o.value.split('\\').pop().split('/').pop(),s=new FormData();s.append('captions_file',o.files[0],r);var t=new XMLHttpRequest();t.onerror=function(){q({videoID:m});};t.onload=function(){var v=c('FBJSON').parse(t.responseText);if(v.error){q(v.error);}else p(m);};var u=new (c('URI'))(c('UrlMap').resolve('graph')).setPath('/v'+i+'/'+m+'/captions').setQueryData({access_token:n});t.open('POST',u.toString(),true);t.send(s);}).then(function(p){return c('AdsVideoFetcher').genSingleVideo(p,true);});},uploadCaptions:function l(m,n,o,p,q){return new (c('Promise'))(function(r,s){var t=new FormData();o.forEach(function(w,x){var y='captions_file'+x,z=w.getFile();t.append(y,z);});if(q)t.append('default_locale',q);p.forEach(function(w,x){t.append('locales_to_delete['+x+']',w);});if(q)t.append('default_locale',q);var u=new XMLHttpRequest();u.onerror=function(){s({videoID:m});};u.onload=function(){var w=c('FBJSON').parse(u.responseText);if(w.error){s(w.error);}else r(m);};var v=new (c('URI'))(c('UrlMap').resolve('graph')).setPath('/v'+i+'/'+m+'/captions').setQueryData({access_token:n});u.open('POST',v.toString(),true);u.send(t);}).then(function(r){return c('AdsVideoFetcher').genSingleVideo(r,true);});},changeDefaultLocale:function l(m,n){return c('GraphAPI')(i).object('video',m).edge('captions').post({default_locale:n}).then(function(o){return c('AdsVideoFetcher').genSingleVideo(m,true);});},remove:function l(m,n){return c('GraphAPI')(i).object('video',m).edge('captions').remove({locale:n}).then(function(o){return c('AdsVideoFetcher').genSingleVideo(m,true);});},fetchCaption:function l(m){return c('GraphAPI')(i).object('video',m).edge('captions').get().then(function(n){return c('AdsVideoFetcher').genSingleVideo(m,true);});},shouldShowRedesign:function l(){return c('adsGKCheck')('video_caption_editor_redesign');},onClickDeleteCaption:function l(m,n){var o=h._("Delete Caption"),p=h._("Are you sure you want to delete this video caption?");c('SimpleXUIDialog').showConfirm(p,o,function(q){if(q)m(n);});},isFBReviewDisabled:function l(m){return !!m&&(m.creator_product===c('VideoCreatorProductType').SLIDESHOW||m.length>=j);}};f.exports=k;}),null);
__d('AdsVideoCaptionActions',['AdsAutoGeneratedCaptionActions','AdsDispatcher','AdsVideoActionTypes','AdsVideoCaptionActionTypes','AdsVideoCaptionUtils'],(function a(b,c,d,e,f,g){'use strict';var h={uploadCaption:function i(j,k,l){c('AdsVideoCaptionUtils').upload(j,l,k).done(function(m){return this.onEditSuccess(m);}.bind(this),function(m){return this._onUploadError(m);}.bind(this));},uploadCaptions:function i(j,k,l,m,n){c('AdsVideoCaptionUtils').uploadCaptions(j,n,k,l,m).done(function(o){return this.onEditSuccess(o);}.bind(this),function(o){return this._onUploadError(o);}.bind(this));},changeDefaultLocale:function i(j,k){c('AdsVideoCaptionUtils').changeDefaultLocale(j,k).done(function(l){return this.onEditSuccess(l);}.bind(this),function(l){return this._onDefaultChangeError(l);}.bind(this));},refreshCaption:function i(j){c('AdsVideoCaptionUtils').fetchCaption(j).done(function(k){return this.onEditSuccess(k);}.bind(this),function(k){return this._onDefaultChangeError(k);}.bind(this));},removeCaption:function i(j,k,l){c('AdsVideoCaptionUtils').remove(j,k).done(function(m){c('AdsAutoGeneratedCaptionActions').unPublishCaption(k,l);this.onEditSuccess(m);}.bind(this),function(m){return this._onRemoveError(m);}.bind(this));},videoCaptionEditorPublished:function i(j){this.refreshCaption(j);c('AdsDispatcher').handleUpdateFromViewAction({videoID:j,type:c('AdsVideoActionTypes').ADS_VIDEO_CAPTION_PUBLISHED});},videoCaptionEditorOpened:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({videoID:j,type:c('AdsVideoActionTypes').ADS_VIDEO_CAPTION_EDITOR_OPENED});},initCaptionStore:function i(j,k,l){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsVideoCaptionActionTypes').CAPTION_CONFIG_INIT,videoID:j,accountID:k,placement:l});},captionOptionSelect:function i(j,k,l,m){c('AdsDispatcher').handleUpdateFromViewAction({selected:j,type:c('AdsVideoCaptionActionTypes').CAPTION_OPTION_SELECT,videoID:k,placement:l,isInitialized:m});},hideAutoCaption:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsVideoCaptionActionTypes').CAPTION_HIDE_AUTO,videoID:j});},removeFromAd:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsVideoCaptionActionTypes').CAPTION_REMOVE_FROM_AD,videoID:j});},reviewOptionSelect:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({selected:parseInt(j,10),type:c('AdsVideoCaptionActionTypes').REVIEW_OPTION_SELECT,videoID:k});},saveToAd:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsVideoCaptionActionTypes').CAPTION_SAVE_TO_AD,videoID:j,placement:k});},setCaption:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({captions:j,type:c('AdsVideoCaptionActionTypes').CAPTION_SET,videoID:k});},onEditSuccess:function i(j){c('AdsDispatcher').handleUpdateFromServerResponse({type:c('AdsVideoActionTypes').ADS_VIDEO_CAPTION_EDIT_SUCCESS,data:{video:j},timestamp:Date.now()});},updatePreview:function i(){c('AdsDispatcher').handleUpdateFromServerResponse({type:c('AdsVideoCaptionActionTypes').UPDATE_PREVIEW,timestamp:Date.now()});},createSRTJobWithFBReview:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsVideoCaptionActionTypes').CREATE_SRT_JOB_WITH_FB_REVIEW,videoID:j,placement:k});},revokeSRTJobWithFBReview:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsVideoCaptionActionTypes').REVOKE_SRT_JOB_WITH_FB_REVIEW,videoID:j,placement:k});},logEvent:function i(event,j,k,l){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsVideoCaptionActionTypes').CAPTION_LOGGING,event:event,videoID:j,captionID:k,message:l});},_onUploadError:function i(j){c('AdsDispatcher').handleUpdateFromServerResponse({type:c('AdsVideoActionTypes').ADS_VIDEO_CAPTION_UPLOAD_ERROR,error:j});},_onDefaultChangeError:function i(j){c('AdsDispatcher').handleUpdateFromServerResponse({type:c('AdsVideoActionTypes').ADS_VIDEO_CAPTION_CHANGE_DEFAULT_LOCALE_ERROR,error:j});},_onRemoveError:function i(j){c('AdsDispatcher').handleUpdateFromServerResponse({type:c('AdsVideoActionTypes').ADS_VIDEO_CAPTION_REMOVE_ERROR,error:j});}};f.exports=h;}),null);
__d('AdsMediaLibraryExpandedAsset.react',['cx','Image.react','Keys','React','ReactDOM','adsGKCheck'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes,l=24;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$AdsMediaLibraryExpandedAsset1=function(s){if(s.keyCode===c('Keys').ESC)this.props.onClickClose();}.bind(this),this.$AdsMediaLibraryExpandedAsset2=function(s){this.props.onClickClose();s.stopPropagation();}.bind(this),o;}m.prototype.componentDidMount=function(){'use strict';c('ReactDOM').findDOMNode(this.refs.expandedAssetView).focus();};m.prototype.render=function(){'use strict';var n=this.props.width,o=this.props.height,p={},q=window.innerHeight,r=window.innerWidth;if(n>r||o>q){if(n/r>o/q){n=r;o=this.props.height*(r/this.props.width);p.width=n;}else{o=q;n=this.props.width*(q/this.props.height);p.height=o;}}else p.width=this.props.width;var s=-Math.floor(n/2),t=this.props.topBarHeight||0,u=-Math.floor(o/2)+t+l,v=c('React').createElement('div',{className:"_4-lr",style:{marginLeft:s,marginTop:u}},c('React').createElement(c('Image.react'),{alt:this.props.source,className:"_4vnf",src:this.props.source,style:p})),w=c('React').createElement('div',{className:"_1zn8",style:{marginLeft:-(s+15),marginTop:u-20}});return c('React').createElement('div',{className:"_1zn6",ref:'expandedAssetView',role:'button',tabIndex:0,onClick:this.$AdsMediaLibraryExpandedAsset2,onKeyDown:this.$AdsMediaLibraryExpandedAsset1},c('React').createElement('div',{className:"_4-ls"}),v,w);};m.propTypes={height:k.number.isRequired,onClickClose:k.func.isRequired,source:k.string.isRequired,topBarHeight:k.number,width:k.number.isRequired};f.exports=m;}),null);
__d('AdsMediaPanelImageBoxUtils',['AdsQEStore'],(function a(b,c,d,e,f,g){'use strict';var h=null;function i(){if(h===null){var k=c('AdsQEStore').getForCurrentUser('ads_cf_shutterstock_flyover_enabled').getValueEnforcing();h=k.getParamBool('enabled');}return h;}var j={flyoverPreviewEnabled:i};f.exports=j;}),null);
__d('AdsMediaPanelImageBox.react',['cx','cssVar','errorCode','fbt','AdsError','AdsErrorUtils','AdsImageLegacy','AdsImageValidation','AdsInstagramErrorUtils','AdsInstagramFields','AdsMediaPanelImageBoxUtils','AdsPageTypes','AdsQE','AdsValidationIcon.react','AdsValidationIconType','AdsWebdriverIDs','BUIAdoptionXUISpinner.react','BackgroundImage.react','ContextualDialog.react','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','GradientBox.react','InstagramImageResolutionExperiment','Link.react','LoadObject','React','ReactDOM','ReactLayeredComponentMixin_DEPRECATED','debounce','getElementPosition','getViewportDimensions','joinClasses'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l=c('React').PropTypes,m=parseInt("110px",10),n=parseInt("58px",10),o=1000,p=1000,q=n,r=n,s=20,t=c('AdsInstagramFields').INSTAGRAM_SPECIFIC_IMAGE_ERROR_KEYS,u={'default':null,disabled:null,selected:"_5ywk",removable:"_5ywl"},v=c('React').createClass({displayName:'AdsMediaPanelImageBox',mixins:[c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{alt:l.string,buyingTypes:l.arrayOf(l.string),decoration:l.oneOf(Object.keys(u)),disableDimensionInfo:l.bool,image:l.instanceOf(c('AdsImageLegacy')).isRequired,imageResolutionQE:l.instanceOf(c('LoadObject')),imageSpec:l.object,isTooSmall:l.bool,igSpecificImageSpec:l.object,scaleImageFactor:l.number,useMediaPanelRedesign:l.bool,onDecorationIconClick:l.func,onImageClick:l.func,onImageDoubleClick:l.func},getDefaultProps:function w(){return {decoration:'default',isTooSmall:false};},getInitialState:function w(){return {errorLevel:c('AdsError').Level.SUCCESS,imageReady:this.props.image.hasDimensions(),previewShown:false,hovering:false,isValidForFacebook:true};},_isDisabled:function w(){return this.props.decoration==='disabled';},_mayClickImages:function w(){if(this._isDisabled())return false;if(!this.props.isTooSmall||this.state.errorLevel!==c('AdsError').Level.WARN)return true;return this.state.isValidForFacebook;},_getOnImageClick:function w(){return this._mayClickImages()?this.props.onImageClick:null;},_getOnImageDoubleClick:function w(){return this._mayClickImages()?this.props.onImageDoubleClick:null;},_mayShowPreviews:function w(){return !this._isDisabled()&&this.props.image.isStockImage()&&c('AdsMediaPanelImageBoxUtils').flyoverPreviewEnabled();},_getOnImageMouseEnter:function w(){return this._mayShowPreviews()?this._showPreview:null;},_getOnImageMouseLeave:function w(){return this._mayShowPreviews()?this._hidePreview:null;},_showPreview:function w(){this._resetSchedulePreviewHide();this.setState({previewShown:true});},_hidePreview:function w(){this._resetSchedulePreviewHide();this.setState({previewShown:false});},_onImageDimensionsReady:function w(){if(this.isMounted())this.setState({imageReady:true});},componentWillReceiveProps:function w(x){if(x.image.equals(this.props.image))return;var y=x.image.hasDimensions();this.setState({imageReady:y});if(!y)x.image.setDimensionsReadyCallback(this._onImageDimensionsReady);},componentWillMount:function w(){this._setSchedulePreviewHide(c('debounce')(this._hidePreview,s));if(!this.state.imageReady)this.props.image.setDimensionsReadyCallback(this._onImageDimensionsReady);if(this.props.imageSpec)this.props.image.resetValidation(this.props.imageSpec.placement);if(this.props.igSpecificImageSpec)this.props.image.resetValidation(this.props.igSpecificImageSpec.placement);},componentWillUnmount:function w(){this._resetSchedulePreviewHide();this._setSchedulePreviewHide(null);},_setSchedulePreviewHide:function w(x){var y=this;y._schedulePreviewHide=x;},_resetSchedulePreviewHide:function w(){var x=this;x._schedulePreviewHide.reset();},_renderDecorationIcon:function w(){var x=this.props.onDecorationIconClick;return c('React').createElement(c('Link.react'),{className:"_40hk",tabIndex:x?null:-1,onClick:x,onMouseEnter:this._getOnImageMouseEnter(),onMouseLeave:this._getOnImageMouseLeave()},c('React').createElement('div',{className:"_5ywm"}));},_renderOverlay:function w(){if(!this._isDisabled())return null;return c('React').createElement('div',{className:"_29wz"});},_renderImage:function w(){var x=this.props.image,y=this._calculateImageDimensions(),z=x.calculatedWidth,aa=x.calculatedHeight,ba=x.renderedWidth,ca=x.renderedHeight,da=null,ea=null,fa=null;if(this.props.isTooSmall){da=this._renderErrorIcon();ea=this._renderDimensionInfo();fa=this._renderOverlayGradient();}else if(this.state.hovering){ea=this._renderDimensionInfo();fa=this._renderOverlayGradient();}var ga=x.getThumbnailUrl()||x.getUrl(),ha=ca||aa||y.height,ia=ba||z||y.width;if(this.props.useMediaPanelRedesign)ga=x.getHighResThumbnailUrl()||ga;if(this.props.scaleImageFactor&&this.props.useMediaPanelRedesign){ha*=this.props.scaleImageFactor;ia*=this.props.scaleImageFactor;}return c('React').createElement(c('FBOverlayContainer.react'),{className:"_29w-"},c('React').createElement(c('FBOverlayBase.react'),null,c('React').createElement('div',{className:!x.isStockImage()?"_5ywo":''},c('React').createElement(c('BackgroundImage.react'),{alt:this.props.alt,backgroundPosition:'0px',backgroundSize:'cover',height:ha,loadingIndicatorStyle:'small',optimizeResizeSpeed:true,ref:'image',src:ga,style:this._getImageStyle(),width:ia}))),fa,c('React').createElement(c('FBOverlayElement.react'),{vertical:'bottom'},c('React').createElement('div',{className:"_20-u"},ea,da)));},_renderOverlayGradient:function w(){if(this.props.disableDimensionInfo)return null;return c('React').createElement(c('FBOverlayElement.react'),{vertical:'bottom'},c('React').createElement(c('GradientBox.react'),{className:"_2_4q",color:'black',direction:'up'}));},_renderDimensionInfo:function w(){if(this.props.disableDimensionInfo)return null;var x=this.props.image.isStockImage()?this._calculateFullSizeStockImageDimensions():this._getImageDimensions();return k._("{width} \u00d7 {height}",[k.param('width',x.width),k.param('height',x.height)]);},_renderErrorIcon:function w(){var x=[];if(this.props.imageSpec)x.push(this.props.imageSpec);if(this.props.igSpecificImageSpec)x.push(this.props.igSpecificImageSpec);var y=c('AdsImageValidation').getAdsErrorsForImage(this.props.image,x,this.props.buyingTypes,this.props.imageResolutionQE&&this.props.imageResolutionQE.getValue());if(!y||y.length===0)return null;var z=this.props.imageSpec&&this.props.imageSpec.placement!==c('AdsPageTypes').INSTAGRAM_STREAM&&y.every(function(ba){return ba.key!==1487015;});if(z!==this.state.isValidForFacebook)this.setState({isValidForFacebook:z});var aa=c('AdsErrorUtils').getLevelForErrors(y);if(aa!==this.state.errorLevel)this.setState({errorLevel:aa});y=c('AdsErrorUtils').getAllErrorsAtLevel(y,aa);return c('React').createElement(c('AdsValidationIcon.react'),{className:"_20-v",isError:aa===c('AdsError').Level.WARN,messages:this._getErrorMessages(y,aa),type:aa===c('AdsError').Level.WARN?c('AdsValidationIconType').ERROR_IMAGE:c('AdsValidationIconType').WARNING});},_getErrorMessages:function w(x,y){var z=x.filter(function(ca){return !t.has(ca.key);}).map(function(ca){return ca.message;}),aa=x.filter(function(ca){return t.has(ca.key);}),ba=void 0;if(aa.length>0)if(c('InstagramImageResolutionExperiment').useHighResolution(this.props.imageResolutionQE&&this.props.imageResolutionQE.getValue(),y,this.props.buyingTypes)){ba=c('AdsInstagramErrorUtils').getCombinedErrorMessageForImageExperiment(aa);}else ba=c('AdsInstagramErrorUtils').getCombinedErrorMessage(x.filter(function(ca){return t.has(ca.key);}),y);ba&&z.push(ba);return z;},render:function w(){if(this.props.imageResolutionQE&&this.props.imageResolutionQE.isLoading())return c('React').createElement(c('BUIAdoptionXUISpinner.react'),{size:'small'});var x="_5ywp"+(this.props.useMediaPanelRedesign?' '+"_40hl":'');return c('React').createElement('div',{className:x},c('React').createElement('div',{className:c('joinClasses')("_1997",u[this.props.decoration],this.props.className),onMouseEnter:function(){return this.setState({hovering:true});}.bind(this),onMouseLeave:function(){return this.setState({hovering:false});}.bind(this)},c('React').createElement(c('Link.react'),{className:"_5ywq",'data-test-decoration':this.props.decoration,'data-testid':c('AdsWebdriverIDs').IMAGE_BOX,tabIndex:this.props.onImageClick?null:-1,onClick:this._getOnImageClick(),onDoubleClick:this._getOnImageDoubleClick(),onMouseEnter:this._getOnImageMouseEnter(),onMouseLeave:this._getOnImageMouseLeave()},this._renderImage()),this._renderOverlay(),this._renderDecorationIcon()));},renderLayers:function w(){var x=this.props.image,y=this._mayShowPreviews()&&this.state.previewShown,z=x.getPreviewWidth(),aa=x.getPreviewHeight(),ba=null;if(!y)return {};var ca={height:String(aa)+'px',width:String(z)+'px'},da=c('getElementPosition')(c('ReactDOM').findDOMNode(this)),ea=c('getViewportDimensions')(),fa=da.x,ga=ea.width-da.x-da.width;ba=fa>ga?'left':'right';return {preview:c('React').createElement(c('ContextualDialog.react'),{autoFocus:false,contextRef:function(){return this.refs.image;}.bind(this),position:ba,shown:true,style:ca},c('React').createElement(c('BackgroundImage.react'),{backgroudSize:'cover',backgroundPosition:'0px',height:aa,loadingIndicatorStyle:'large',optimizeResizeSpeed:true,src:x.getPreviewUrl(),width:z}))};},_getSizeMultiplier:function w(x,y,z){return Math.min(y/x.width,z/x.height);},_getStockImageSizeMultiplier:function w(){return this._getSizeMultiplier(this._getStockImageVisibleDimensions(),m,n);},_fitDimensions:function w(x,y,z){var aa=this._getSizeMultiplier(x,y,z);return {height:Math.floor(x.height*aa),width:Math.floor(x.width*aa)};},_getImageStyle:function w(){var x=this.props.image;if(!x.isStockImage()||!this.state.imageReady)return null;var y=this._getStockImageVisibleDimensions(),z=this._getImageDimensions(),aa={height:z.height-y.height,width:z.width-y.width},ba=this._getStockImageSizeMultiplier(),ca={};if(aa.height>0)ca.marginBottom=String(Math.ceil(aa.height*-ba))+'px';if(aa.width>0)ca.marginRight=String(Math.ceil(aa.width*-ba))+'px';return ca;},_getImageDimensions:function w(){return {height:this.props.image.height,width:this.props.image.width};},_getNonStockImageDimensions:function w(){return {height:this.props.image.getThumbnailHeight()||this.props.image.height,width:this.props.image.getThumbnailWidth()||this.props.image.width};},_getStockImageVisibleDimensions:function w(){return {height:this.props.image.getThumbnailHeight(),width:this.props.image.getThumbnailWidth()};},_calculateImageDimensions:function w(){return this.props.image.isStockImage()?this._calculateStockImageDimensions():this._calculateNonStockImageDimensions();},_calculateNonStockImageDimensions:function w(){if(!this.state.imageReady)return {height:r,width:q};return this._fitDimensions(this._getNonStockImageDimensions(),m,n);},_calculateStockImageDimensions:function w(){if(!this.state.imageReady)return this._fitDimensions(this._getStockImageVisibleDimensions(),m,n);var x=this._getImageDimensions(),y=this._getStockImageSizeMultiplier();return {height:Math.floor(x.height*y),width:Math.floor(x.width*y)};},_calculateFullSizeStockImageDimensions:function w(){var x=this.props.image;if(x.hasFullSizeDimensions())return {height:x.getFullSizeHeight(),width:x.getFullSizeWidth()};var y=x.getPreviewWidth(),z=x.getPreviewHeight(),aa=Math.min(o/y,p/z);return {height:Math.round(z*aa),width:Math.round(y*aa)};}});f.exports=v;}),null);
__d('AdsMediaPanelImageBoxContainer.react',['AdsMediaPanelImageBox.react','AdsQEStore','FluxContainer','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').Component;h=babelHelpers.inherits(k,j);i=h&&h.prototype;k.getStores=function(){return [c('AdsQEStore')];};k.calculateState=function(){var l=c('AdsQEStore').getForCurrentUser('ads_increase_fb_image_resolution');return {imageResolutionQE:l};};k.prototype.render=function(){return c('React').createElement(c('AdsMediaPanelImageBox.react'),babelHelpers['extends']({},this.props,{imageResolutionQE:this.state.imageResolutionQE}));};function k(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(k,{withProps:true});}),null);
__d('AdsMediaStandaloneLibraryImageWithDimensions.react',['cx','fbt','AdsImageLegacy','AdsValidationIcon.react','AdsValidationIconType','BackgroundImage.react','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m={height:600,width:200},n={height:400,width:400};j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={thumbnailLoaded:false},this.$AdsMediaStandaloneLibraryImageWithDimensions3=function(u){var v=u.getWidth(),w=u.getHeight();return c('React').createElement('div',{className:"_1byh"},c('React').createElement('span',{className:"_1byi",role:'button',tabIndex:'0',onClick:this.$AdsMediaStandaloneLibraryImageWithDimensions4},c('React').createElement(c('AdsValidationIcon.react'),{className:"_1byj",type:c('AdsValidationIconType').LARGE_IMAGE}),c('React').createElement('span',{className:"_1byk"},i._("{width} \u00d7 {height}",[i.param('width',v),i.param('height',w)]))));}.bind(this),this.$AdsMediaStandaloneLibraryImageWithDimensions2=function(){this.setState({thumbnailLoaded:true});}.bind(this),this.$AdsMediaStandaloneLibraryImageWithDimensions4=function(u){u.stopPropagation();this.props.onExpandClick(this.props.image);}.bind(this),this.$AdsMediaStandaloneLibraryImageWithDimensions1=function(){if(!this.props.imageReady)return n;return this.$AdsMediaStandaloneLibraryImageWithDimensions5(this.$AdsMediaStandaloneLibraryImageWithDimensions6(),m);}.bind(this),this.$AdsMediaStandaloneLibraryImageWithDimensions6=function(){return {height:this.props.image.getThumbnailHeight()||this.props.image.height,width:this.props.image.getThumbnailWidth()||this.props.image.width};}.bind(this),this.$AdsMediaStandaloneLibraryImageWithDimensions5=function(u,v){var w=this.$AdsMediaStandaloneLibraryImageWithDimensions7(u,v);return {height:Math.floor(u.height*w),width:Math.floor(u.width*w)};}.bind(this),this.$AdsMediaStandaloneLibraryImageWithDimensions7=function(u,v){return Math.min(v.width/u.width,v.height/u.height,1);},q;}o.prototype.render=function(){var p=this.props.image,q=this.$AdsMediaStandaloneLibraryImageWithDimensions1(),r=p.calculatedWidth,s=p.calculatedHeight,t=this.state.thumbnailLoaded?p.getUrl():p.getThumbnailUrl();return c('React').createElement(c('FBOverlayContainer.react'),{className:"_1bye"},c('React').createElement(c('FBOverlayBase.react'),null,c('React').createElement('div',null,c('React').createElement(c('BackgroundImage.react'),{alt:this.props.alt,backgroundPosition:0,backgroundSize:'cover',className:"_2vjn",height:s||q.height,loadingIndicatorStyle:'small',optimizeResizeSpeed:true,src:t,width:r||q.width,onImageLoad:this.$AdsMediaStandaloneLibraryImageWithDimensions2}))),c('React').createElement(c('FBOverlayElement.react'),{vertical:'bottom'},this.$AdsMediaStandaloneLibraryImageWithDimensions3(p)));};o.propTypes={alt:l.string,image:l.instanceOf(c('AdsImageLegacy')).isRequired,imageReady:l.bool};f.exports=o;}),null);
__d('Tag.brands',['cx','fbt','BUIAdoptionCloseButton.react','React','SearchableEntry','SUISpinner.react','AssetLibraryAppConstants.brands','curry','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('AssetLibraryAppConstants.brands').SEARCH_RESULT_TYPES,k=function m(n){var o=n.className,p=n.tag,q=n.onRemove;return c('React').createElement('div',{className:c('joinClasses')("_4r1y",o)},c('React').createElement('div',{className:"_4r1-"},c('React').createElement('span',{className:"_4r1_"},p.name),c('React').createElement(c('BUIAdoptionCloseButton.react'),{className_DEPRECATED:"_3-8_"+(!q?' '+"hidden_elem":''),label:i._("Remove"),onClick:q?c('curry')(q,p):c('emptyFunction'),size:'small'})));},l=function m(n){var o=n.entry,p=n.onRemove,q=babelHelpers.objectWithoutProperties(n,['entry','onRemove']),r=function s(t){p(o);};if(o.getType()===j.CREATE)return c('React').createElement(c('SUISpinner.react'),{className:"_1foc",size:'small'});return c('React').createElement(k,babelHelpers['extends']({tag:{id:o.getUniqueID(),name:o.getTitle()},onRemove:r},q));};k.FromSearchableEntry=l;f.exports=k;}),null);
__d('AssetLibraryImageTags.brands',['cx','fbt','LayerHideOnBlur','Link.react','React','ContextualDialog.react','Tag.brands'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=5;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);}m.prototype.render=function(){var n=this.props.tagData||[];if(n.length>0){var o=n.slice(0,l),p=this.$AssetLibraryImageTags1(o),q=null;if(n.length>l){var r=n.slice(l),s=this.$AssetLibraryImageTags1(r),t=n.length-l;q=c('React').createElement('span',null,c('React').createElement(c('Link.react'),{ref:'showMoreLink'},i._({"*":"and {count} others"},[i.param('count',t,[0])])),c('React').createElement(c('ContextualDialog.react'),{behaviors:{LayerHideOnBlur:c('LayerHideOnBlur')},contextRef:function(){return this.refs.showMoreLink;}.bind(this),hoverContextRef:function(){return this.refs.showMoreLink;}.bind(this),position:'right'},c('React').createElement('div',{className:"_2rxe"},s)));}return c('React').createElement('div',{className:"_2rxf"},p,q);}return null;};m.prototype.$AssetLibraryImageTags1=function(n){return n.map(function(o){return c('React').createElement(c('Tag.brands'),{className:"mrs mbs",key:o.id,tag:o});});};f.exports=m;}),null);
__d('AdsMediaStandaloneLibraryMetadataImage.react',['cx','fbt','AdsImageLegacy','AdsMediaStandaloneLibraryImageWithDimensions.react','AssetLibraryImageTags.brands','Link.react','React','URI'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l,m,n=c('React').PropTypes,o=180;j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=k.constructor).call.apply(r,[this].concat(u)),this.$AdsMediaStandaloneLibraryMetadataImage1=function(){return this.props.image.business_object_tags&&this.props.image.business_object_tags.data||[];}.bind(this),s;}p.prototype.render=function(){var r=this.props.image,s=new (c('URI'))(r.getUrl()).setQueryData({dl:1}),t=null,u=this.$AdsMediaStandaloneLibraryMetadataImage1();if(u.length>0)t=c('React').createElement(q,{propertyKey:i._("Labels:"),propertyValue:c('React').createElement(c('AssetLibraryImageTags.brands'),{tagData:this.$AdsMediaStandaloneLibraryMetadataImage1()})});return c('React').createElement('div',{className:"_35qj"},c('React').createElement('div',{className:"_35qk"},c('React').createElement(c('AdsMediaStandaloneLibraryImageWithDimensions.react'),{image:r,imageReady:this.props.imageReady,onExpandClick:this.props.onExpandClick})),c('React').createElement('div',{className:"_35ql"},c('React').createElement(q,{propertyKey:i._("Name:"),propertyValue:r.name}),c('React').createElement(q,{propertyKey:i._("Hash:"),propertyValue:c('React').createElement(c('Link.react'),{href:s},r.getAdAccountHash())}),t));};p.propTypes={alt:n.string,image:n.instanceOf(c('AdsImageLegacy')).isRequired,imageReady:n.bool.isRequired,onExpandClick:n.func.isRequired};l=babelHelpers.inherits(q,c('React').Component);m=l&&l.prototype;q.prototype.render=function(){return c('React').createElement('div',{className:"_35qo"},c('React').createElement('div',{className:"_35qp"},this.props.propertyKey),' ',c('React').createElement('div',{className:"_35qq"},this.props.propertyValue));};function q(){l.apply(this,arguments);}q.propTypes={propertyKey:n.node.isRequired,propertyValue:n.node.isRequired};f.exports=p;}),null);
__d('AdsMediaStandaloneLibrarySelectableImage.react',['cx','AdsImageLegacy','AdsMediaStandaloneLibraryImageWithDimensions.react','Link.react','React','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l={'default':null,disabled:null,selected:"_1byd"};i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$AdsMediaStandaloneLibrarySelectableImage1=function(){return c('React').createElement(c('Link.react'),{className:"_1byl"});},o;}m.prototype.render=function(){return c('React').createElement('div',{className:"_1bym"},c('React').createElement('div',{className:c('joinClasses')(l[this.props.decoration],this.props.className)},c('React').createElement(c('Link.react'),{className:"_1byn",tabIndex:this.props.onImageClick?null:-1,onClick:this.props.onImageClick},c('React').createElement(c('AdsMediaStandaloneLibraryImageWithDimensions.react'),{image:this.props.image,imageReady:this.props.imageReady,onExpandClick:this.props.onExpandClick,onImageClick:this.props.onImageClick})),this.$AdsMediaStandaloneLibrarySelectableImage1()));};m.propTypes={alt:k.string,decoration:k.oneOf(Object.keys(l)).isRequired,image:k.instanceOf(c('AdsImageLegacy')).isRequired,imageReady:k.bool,onExpandClick:k.func.isRequired,onImageClick:k.func.isRequired};m.defaultProps={decoration:'default',onExpandClick:c('emptyFunction'),onImageClick:c('emptyFunction')};f.exports=m;}),null);
__d('AdsMediaStandaloneLibraryImage.react',['cx','AdsImageLegacy','AdsMediaStandaloneLibraryMetadataImage.react','AdsMediaStandaloneLibrarySelectableImage.react','React','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={imageReady:this.props.image.hasDimensions()},this.$AdsMediaStandaloneLibraryImage1=function(){this.setState({imageReady:true});}.bind(this),this.$AdsMediaStandaloneLibraryImage2=function(){return c('React').createElement(c('AdsMediaStandaloneLibraryMetadataImage.react'),{alt:this.props.alt,image:this.props.image,imageReady:this.state.imageReady,onExpandClick:this.props.onExpandClick});}.bind(this),this.$AdsMediaStandaloneLibraryImage3=function(){return c('React').createElement(c('AdsMediaStandaloneLibrarySelectableImage.react'),{alt:this.props.alt,decoration:this.props.decoration,image:this.props.image,imageReady:this.state.imageReady,onExpandClick:this.props.onExpandClick,onImageClick:this.props.onImageClick});}.bind(this),n;}l.prototype.componentWillReceiveProps=function(m){if(m.image.equals(this.props.image))return;var n=m.image.hasDimensions();this.setState({imageReady:n});if(!n)m.image.setDimensionsReadyCallback(this.$AdsMediaStandaloneLibraryImage1);};l.prototype.componentWillMount=function(){if(!this.state.imageReady)this.props.image.setDimensionsReadyCallback(this.$AdsMediaStandaloneLibraryImage1);};l.prototype.render=function(){return c('React').createElement('div',{className:"_3tlt"},this.props.showImageMetadata?this.$AdsMediaStandaloneLibraryImage2():this.$AdsMediaStandaloneLibraryImage3());};l.propTypes={alt:k.string,decoration:k.string.isRequired,image:k.instanceOf(c('AdsImageLegacy')).isRequired,onExpandClick:k.func.isRequired,onImageClick:k.func.isRequired,showImageMetadata:k.bool};l.defaultProps={decoration:'default',onExpandClick:c('emptyFunction'),onImageClick:c('emptyFunction'),showImageMetadata:false};f.exports=l;}),null);
__d("DimensionTracker",[],(function a(b,c,d,e,f,g){function h(){"use strict";this.$DimensionTracker1=[];this.$DimensionTracker2=0;}h.prototype.setValue=function(i,j){"use strict";this.$DimensionTracker2++;this.$DimensionTracker1.push({index:i,value:j});};h.prototype.getChangesSince=function(i){"use strict";var j=this.$DimensionTracker1.slice(i,this.$DimensionTracker2);return {changes:j,pointer:this.$DimensionTracker2};};f.exports=h;}),null);
__d('ImageRowItem.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props.imageRowItems[this.props.rowIndex];if(l){var m=this.props.renderImage,n=l.map(m);return c('React').createElement('div',{key:'ImageRowItem'+l[0].getAdAccountHash()},n);}else return c('React').createElement('div',{key:'ImageRowItemFooter'},this.props.footerRow);};function k(){h.apply(this,arguments);}k.propTypes={footerRow:j.node,imageRowItems:j.array,renderImage:j.func,rowIndex:j.number};f.exports=k;}),null);
__d('MediaLibraryPlacement',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({ADS_MEDIA_LIBRARY:'',BIZ_MEDIA_LIBRARY:''});f.exports=h;}),null);
__d("PhotoArrange",["Map","sha256"],(function a(b,c,d,e,f,g){var h=.5,i=.5,j={height:-1,isOptimal:false,isValid:false};function k(){"use strict";this.$PhotoArrange1=new (c("Map"))();this.$PhotoArrange2=new (c("Map"))();}k.prototype.solve=function(m,n){"use strict";var o=n.map(function(r){return r.height/r.width;}),p=this.$PhotoArrange3(m,n);if(this.$PhotoArrange1.has(p))return this.$PhotoArrange1.get(p);var q;try{q=this.$PhotoArrange4(m,n,o);}catch(r){q=this.$PhotoArrange5(m,n,o);}this.$PhotoArrange1.set(p,q);return q;};k.prototype.$PhotoArrange3=function(m,n){"use strict";var o=[String(m.containerWidth),String(m.marginPerImage),String(m.maxImageHeight),String(m.minImageHeight),String(m.minImageWidth)].concat(n.map(function(p){return [String(p.width),String(p.height)].join(",");})).join(",");return c("sha256")(o);};k.prototype.$PhotoArrange5=function(m,n,o){"use strict";var p=(m.maxImageHeight+m.minImageHeight)/2;return n.map(function(q,r){var s=p/o[r];return {height:p,width:s};});};k.prototype.$PhotoArrange4=function(m,n,o){"use strict";if(!n.length)return [];var p=j,q=0,r=j,s=0,t=n.length,u=m.maxImageHeight,v=m.minImageWidth,w=m.containerWidth,x=u/o[0],y=0;while(y<t-1){var z=Math.max(v,u/o[y+1]);if(x+z>w){break;}else{x+=z+m.marginPerImage;y++;}}var aa=[],ba=[],ca;for(;y<t;y++){q=y+1;aa=n.slice(0,q);ba=o.slice(0,q);ca=this.$PhotoArrange3(m,aa);if(this.$PhotoArrange2.has(ca)){p=this.$PhotoArrange2.get(ca);}else{p=new l(m,ba.slice(0,q)).solve();this.$PhotoArrange2.set(ca,p);}if(p.isValid&&p.isOptimal){break;}else if(p.isValid){r=p;s=q;}else{p=r;q=s;break;}}if(p.isValid){var da=p.height,ea=n.slice(0,q);ea=ea.map(function(fa,ga){return {width:da/o[ga],height:da};});return ea.concat(this.$PhotoArrange4(m,n.slice(q),o.slice(q)));}else throw new Error("There is no valid solution to arrange these photos\n        under the specified constraints");};function l(m,n){var o=m.containerWidth,p=m.marginPerImage,q=m.maxImageHeight,r=m.minImageHeight,s=m.minImageWidth;"use strict";this.$ImagesBSSolver1=o;this.$ImagesBSSolver2=n;this.$ImagesBSSolver3=p;this.$ImagesBSSolver4=q;this.$ImagesBSSolver5=r;this.$ImagesBSSolver6=s;}l.prototype.solve=function(){"use strict";var m=this.$ImagesBSSolver5,n=this.$ImagesBSSolver4,o=(n+m)/2,p=this.$ImagesBSSolver7(m),q=this.$ImagesBSSolver7(o),r=this.$ImagesBSSolver7(n);if(!p.isValid){return j;}else if(r.isValid){return {height:n,isOptimal:r.isOptimal,isValid:r.isValid};}else{while(!q.isValid||n-m>h){if(!q.isValid){n=o;}else m=o;o=(n+m)/2;q=this.$ImagesBSSolver7(o);}return {height:o,isOptimal:q.isOptimal,isValid:q.isValid};}};l.prototype.$ImagesBSSolver7=function(m){"use strict";var n=this.$ImagesBSSolver2.reduce(function(q,r){var s=Math.max(this.$ImagesBSSolver6,m/r);return q+s+this.$ImagesBSSolver3;}.bind(this),-this.$ImagesBSSolver3),o=n<this.$ImagesBSSolver1,p=o&&n+i>this.$ImagesBSSolver1;return {isOptimal:p,isValid:o};};f.exports=new k();}),null);
__d('AdsMediaLibrary.react',['cx','invariant','AdsImageLegacy','AdsImageValidation','AdsMediaLibraryExpandedAsset.react','AdsMediaPanelImageBoxContainer.react','AdsMediaStandaloneLibraryImage.react','AdsPageTypes','BUIAdoptionXUISpinner.react','ImageRowItem.react','InfiniteScroll.react','MediaLibraryPlacement','PhotoArrange','React','ReactDOM','DimensionTracker','Scroll','SimpleList.react','emptyFunction','joinClasses','setImmediate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m={height:100,width:100},n=60,o=60,p=290,q=90,r=210,s=14,t=48,u=550,v=60,w=50,x=0,y=12,z=49;j=babelHelpers.inherits(aa,c('React').Component);k=j&&j.prototype;function aa(){var ba,ca;for(var da=arguments.length,ea=Array(da),fa=0;fa<da;fa++)ea[fa]=arguments[fa];return ca=(ba=k.constructor).call.apply(ba,[this].concat(ea)),this.state={containerWidth:0,expandedImage:null},this.measureContainerWidth=function(){var ga=this.refs.imagesContainer;if(ga){var ha=c('ReactDOM').findDOMNode(ga),ia=ha.offsetWidth;this.setState({containerWidth:ia});}}.bind(this),this.$AdsMediaLibrary7=function(ga){this.setState({expandedImage:ga});}.bind(this),this.$AdsMediaLibrary6=function(){this.setState({expandedImage:null});}.bind(this),this.$AdsMediaLibrary2=function(ga){return c('React').createElement(c('AdsMediaStandaloneLibraryImage.react'),{decoration:this.$AdsMediaLibrary9(ga),image:ga,imageSpec:this.props.imageSpec,key:ga.getUniqueIdentifier(),ref:ga.getUniqueIdentifier(),showImageMetadata:this.props.showStandaloneImageMetadata,onExpandClick:this.$AdsMediaLibrary7,onImageClick:function(event){return this.props.onImageClick(ga,event.shiftKey);}.bind(this)});}.bind(this),this.$AdsMediaLibrary5=function(ga){var ha=false,ia=this.props.imageSpec;if(ia){ha=!c('AdsImageValidation').isWarningSize(ga,ia);if(this.props.igSpecificImageSpec)ha=ha||!c('AdsImageValidation').isWarningSize(ga,this.props.igSpecificImageSpec);if(ia.placement===c('AdsPageTypes').INSTAGRAM_STORY)ha=ha||!c('AdsImageValidation').isValidAspectRatio(ga,ia);}return c('React').createElement(c('AdsMediaPanelImageBoxContainer.react'),{buyingTypes:this.props.buyingTypes,className:"_13u0",decoration:this.$AdsMediaLibrary9(ga),igSpecificImageSpec:this.props.igSpecificImageSpec,image:ga,imageSpec:ia,isTooSmall:this.props.disableTooSmallImages&&ha,key:ga.getUniqueIdentifier(),ref:ga.getUniqueIdentifier(),useMediaPanelRedesign:this.props.useMediaPanelRedesign,onImageClick:function(event){this.props.onImageClick&&this.props.onImageClick(ga);}.bind(this),onImageDoubleClick:function(event){this.props.onImageDoubleClick&&this.props.onImageDoubleClick(ga);}.bind(this)});}.bind(this),ca;}aa.prototype.componentDidMount=function(){c('setImmediate')(this.measureContainerWidth);};aa.prototype.componentWillReceiveProps=function(){this.measureContainerWidth();};aa.prototype.render=function(){var ba,ca=this,da,ea=c('joinClasses')(this.props.className,"_3suv"),fa=this.props.children;if(fa)fa=c('React').createElement('div',{className:"_13u2 clearfix"},fa);var ga=void 0,ha=this.props.photoArrangeConstraints;if(this.state.containerWidth&&this.props.photoArrangeEnabled){var ia,ja;(function(){ia=Math.max(0,ca.state.containerWidth-ha.containerPadding);ja=ca.props.imageList.map(function(ma){return babelHelpers['extends']({},ma,{width:ma.width||m.width,height:ma.height||m.height});});var la=c('PhotoArrange').solve(babelHelpers['extends']({},ha,{containerWidth:ia}),ja);ga=ca.props.imageList.map(function(ma,na){ma.calculatedWidth=la[na].width;ma.calculatedHeight=la[na].height;return ma;});})();}else ga=this.props.imageList;if(this.props.standalone){var ka=null;if(ia)(function(){var la=ca.$AdsMediaLibrary1(ga,ia,ha.marginPerImage,ha.minImageWidth),ma=new (c('DimensionTracker'))();la.forEach(function(pa,qa){var ra=pa[0],sa=this.props.showStandaloneImageMetadata?q:s;if(this.props.placement===c('MediaLibraryPlacement').BIZ_MEDIA_LIBRARY)sa+=n;var ta=ra.calculatedHeight+sa;ma.setValue(qa,ta);}.bind(ca));ma.setValue(la.length,z);var na=ca.props.showStandaloneImageMetadata?p:r,oa=ca.state.containerWidth-t;ka=c('React').createElement(c('SimpleList.react'),{height:ca.props.height,item:c('React').createElement(c('ImageRowItem.react'),{footerRow:ca.props.scrollingAreaFooter,imageRowItems:la,renderImage:ca.$AdsMediaLibrary2}),rowCount:la.length+1,rowHeight:na,rowHeightTracker:ma,width:oa});})();return c('React').createElement('div',{className:ea,ref:'AdsMediaLibraryRoot'},c('React').createElement('div',{className:"_13t_"+(this.state.expandedImage?' '+"_fas":''),ref:'imagesContainer'},ka),this.$AdsMediaLibrary3(),this.$AdsMediaLibrary4());}else return c('React').createElement('div',{className:ea,ref:'AdsMediaLibraryRoot'},c('React').createElement(c('InfiniteScroll.react'),{className:"_13u1",style:{height:this.props.height},onEndReached:this.props.onEndReached},fa,c('React').createElement('div',{className:"_13t_",ref:'imagesContainer'},ga.map(this.$AdsMediaLibrary5)),this.props.scrollingAreaFooter),this.$AdsMediaLibrary4());};aa.prototype.$AdsMediaLibrary1=function(ba,ca,da,ea){if(!ba.length)return [];var fa=[[]],ga=0,ha=0;ba.forEach(function(ia,ja){var ka=Math.max(ea,ia.calculatedWidth);if(ha+ka>ca){fa.push([]);ha=0;ga++;}fa[ga].push(ia);ha+=ka+da;});return fa;};aa.prototype.$AdsMediaLibrary4=function(){if(!this.props.isLoadingInitial)return null;return c('React').createElement('div',{className:"_13u3"},c('React').createElement(c('BUIAdoptionXUISpinner.react'),{background:'light',className:"_13t-",size:'large'}));};aa.prototype.$AdsMediaLibrary3=function(){if(!this.state.expandedImage)return null;var ba=this.state.expandedImage,ca=Math.min(ba.height,u),da=ca*ba.width/ba.height;return c('React').createElement(c('AdsMediaLibraryExpandedAsset.react'),{height:ca,key:'expanded_view',source:ba.getUrl(),topBarHeight:this.props.topBarHeight,width:da,onClickClose:this.$AdsMediaLibrary6});};aa.prototype.$AdsMediaLibrary8=function(ba){return this.props.selectedImageList.some(function(ca){return ca.getUniqueIdentifier()==ba;});};aa.prototype.$AdsMediaLibrary9=function(ba){if(this.$AdsMediaLibrary8(ba.getUniqueIdentifier())){return 'selected';}else if(!this.props.isClickEnabled)return 'disabled';return 'default';};aa.prototype.scrollToImage=function(ba){var ca=ba.getUniqueIdentifier();ca in this.refs||i(0);var da=c('ReactDOM').findDOMNode(this.refs[ca]),ea=c('ReactDOM').findDOMNode(this),fa=da.offsetTop;if(ea!=da.offsetParent)fa-=ea.offsetTop;c('Scroll').setTop(ea,fa);};aa.propTypes={buyingTypes:l.arrayOf(l.string),disableTooSmallImages:l.bool,height:l.number.isRequired,imageList:l.arrayOf(l.instanceOf(c('AdsImageLegacy'))).isRequired,imageSpec:l.shape({minWarningWidth:l.number.isRequired,minWarningHeight:l.number.isRequired}),isClickEnabled:l.bool.isRequired,isLoadingInitial:l.bool,igSpecificImageSpec:l.object,onEndReached:l.func,onImageClick:l.func.isRequired,onImageDoubleClick:l.func,photoArrangeConstraints:l.shape({containerPadding:l.number.isRequired,maxImageHeight:l.number.isRequired,minImageHeight:l.number.isRequired,minImageWidth:l.number.isRequired,marginPerImage:l.number.isRequired}).isRequired,photoArrangeEnabled:l.bool,selectedImageList:l.array.isRequired,scrollingAreaFooter:l.object,showStandaloneImageMetadata:l.bool,standalone:l.bool,topBarHeight:l.number,useMediaPanelRedesign:l.bool,placement:l.string};aa.defaultProps={disableTooSmallImages:false,onImageClick:c('emptyFunction'),photoArrangeConstraints:{containerPadding:o,maxImageHeight:v,minImageHeight:w,minImageWidth:x,marginPerImage:y},selectedImageList:[],showStandaloneImageMetadata:false,standalone:false,useMediaPanelRedesign:false};f.exports=aa;}),null);
__d('AdsEditInlinePostWarning.react',['BUIAdoptionXUINoticeSmall.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;k.prototype.render=function(){if(!this.props.message)return null;return c('React').createElement('div',{className:this.props.className},c('React').createElement(c('BUIAdoptionXUINoticeSmall.react'),{type:'information'},this.props.message));};function k(){h.apply(this,arguments);}k.propTypes={className:j.string,message:j.node};f.exports=k;}),null);
__d('AdsImageSecondaryActions',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({X:null});f.exports=h;}),null);
__d('AdsMediaPanelHeader.react',['cx','LeftRight.react','Link.react','React','XUIAmbientNUX.react','SUICloseButton.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l,m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.$AdsMediaPanelTabTitle1=function(){this.props.onTitleClick(this.props.tabKey);}.bind(this),q;}n.prototype.render=function(){return c('React').createElement(c('Link.react'),babelHelpers['extends']({},this.props,{onClick:this.$AdsMediaPanelTabTitle1}));};n.propTypes={tabKey:m.string.isRequired,onTitleClick:m.func.isRequired};k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.$AdsMediaPanelHeader1=function(u){var v=u.tabKey===this.props.selectedTab,w=c('joinClasses')(u.className,"_5jq6"+(v?' '+"_5jq7":'')),x="_5jq8"+(this.props.useMediaPanelRedesign?' '+"_4l0d":'');return c('React').createElement('span',{key:u.tabKey},c('React').createElement(n,{className:w,ref:u.tabKey,tabKey:u.tabKey,onTitleClick:this.$AdsMediaPanelHeader2},c('React').createElement('div',{className:x}),u.title),this.$AdsMediaPanelHeader3(u));}.bind(this),this.$AdsMediaPanelHeader3=function(u){if(u.nuxConfig){var v=function(){return this.refs[u.tabKey];}.bind(this);return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:v,key:u.tabKey,position:'below',shown:u.nuxConfig.shown,onCloseButtonClick:u.nuxConfig.onClose},u.nuxConfig.message);}return null;}.bind(this),this.$AdsMediaPanelHeader2=function(u){this.props.onTabSwitch(u);}.bind(this),q;}o.prototype.getDefaultProps=function(){return {useMediaPanelRedesign:false};};o.prototype.render=function(){var p="_5jq0"+(this.props.useMediaPanelRedesign?' '+"_4l0e":'');if(this.props.useMediaPanelRedesign){return c('React').createElement('div',{className:p},c('React').createElement(c('LeftRight.react'),null,c('React').createElement('div',null,this.props.tabConfigs.map(this.$AdsMediaPanelHeader1)),c('React').createElement('div',{className:"_4l0h"},c('React').createElement(c('SUICloseButton.react'),{className_DEPRECATED:"layerCancel",shade:'dark',size:'small',useLegacyPadding:true}))));}else return c('React').createElement('div',{className:p},this.props.tabConfigs.map(this.$AdsMediaPanelHeader1));};o.propTypes={selectedTab:m.string.isRequired,tabConfigs:m.arrayOf(m.shape({className:m.string.isRequired,tabKey:m.string.isRequired,title:m.string.isRequired,nuxConfigs:m.shape({message:m.string.isRequired,onClose:m.func.isRequired,shown:m.bool.isRequired})})).isRequired,useMediaPanelRedesign:m.bool,onTabSwitch:m.func.isRequired};f.exports=o;}),null);
__d('AdsMediaPanelInfiniteScrollFooter.react',['cx','fbt','BUIAdoptionXUISpinner.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.componentDidMount=function(){if(this.props.onEndReached)this.props.onEndReached();};m.prototype.render=function(){if(!this.props.imagesLoaded)return null;if(this.props.fetchingNextPage)return c('React').createElement('div',{className:"_4bnz"},c('React').createElement(c('BUIAdoptionXUISpinner.react'),{background:'light',size:'large'}));return c('React').createElement('div',{className:"_4bn-"},c('React').createElement('div',{className:"_4bn_"},c('React').createElement('div',{className:"_4bo2"},i._("No more images found"))));};function m(){j.apply(this,arguments);}m.propTypes={fetchingNextPage:l.bool.isRequired,imagesLoaded:l.bool.isRequired,onEndReached:l.func};f.exports=m;}),null);
__d('AdsMediaPanelMessage.react',['cx','Image.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';var m=c('joinClasses')("_3suv",this.props.className);return c('React').createElement('div',{className:m,style:this.props.style},c('React').createElement('div',{className:"_5y4t"},c('React').createElement(c('Image.react'),{src:this.props.icon}),c('React').createElement('div',{className:"_5y4u"},c('React').createElement('div',null,this.props.title),c('React').createElement('div',null,this.props.subtitle))));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={icon:k.object.isRequired,subtitle:k.string,title:k.string.isRequired};f.exports=l;}),null);
__d('AdsMediaPanelPageLinkInstagramAccountUnit.react',['cx','fbt','ix','ActionList.react','AdsImageLegacy','AdsLoadState','AdsMediaLibrary.react','AdsPageInstagramAccountActions','BUIAdoptionXUINotice.react','BUIAdoptionXUISpinner.react','BUIAdoptionXUIText.react','CenteredContainer.react','Grid.react','Image.react','Link.react','React','ScrollableArea.react','XPagesManagerSettingsController','XUIButton.react','BUIAdoptionXUINoticeGroup.react','XUITextInput.react','PageSettingsRef'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Grid.react').GridItem,n=c('React').PropTypes,o=30,p=32,q=36,r='https://instagram.com/accounts/password/reset/',s='https://www.facebook.com/business/help/898752960195806';k=babelHelpers.inherits(t,c('React').Component);l=k&&k.prototype;function t(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=l.constructor).call.apply(u,[this].concat(x)),this.state={password:'',username:''},this.$AdsMediaPanelPageLinkInstagramAccountUnit2=function(){return c('React').createElement(c('ScrollableArea.react'),{height:this.props.totalHeight},this.$AdsMediaPanelPageLinkInstagramAccountUnit4(),c('React').createElement(c('CenteredContainer.react'),{fullHeight:true,horizontal:true,vertical:true},this.$AdsMediaPanelPageLinkInstagramAccountUnit5(),c('React').createElement(c('CenteredContainer.react'),{className:"_hrr",horizontal:true,vertical:true},c('React').createElement(c('BUIAdoptionXUISpinner.react'),{size:'large'}))));}.bind(this),this.$AdsMediaPanelPageLinkInstagramAccountUnit3=function(){return c('React').createElement(c('ScrollableArea.react'),{height:this.props.totalHeight},this.$AdsMediaPanelPageLinkInstagramAccountUnit4(),c('React').createElement(c('CenteredContainer.react'),{fullHeight:true,horizontal:true,vertical:true},this.$AdsMediaPanelPageLinkInstagramAccountUnit5(),this.$AdsMediaPanelPageLinkInstagramAccountUnit6()));}.bind(this),this.$AdsMediaPanelPageLinkInstagramAccountUnit1=function(){var z=this.$AdsMediaPanelPageLinkInstagramAccountUnit4()?this.props.totalHeight-p-q:this.props.totalHeight-p,aa=this.props.instagramAccountLoadState===c('AdsLoadState').LOADING?c('React').createElement(c('BUIAdoptionXUISpinner.react'),{size:'large'}):this.$AdsMediaPanelPageLinkInstagramAccountUnit7();return c('React').createElement('div',{style:{height:this.props.totalHeight}},this.$AdsMediaPanelPageLinkInstagramAccountUnit4(),c('React').createElement(c('AdsMediaLibrary.react'),babelHelpers['extends']({},this.props,{height:z})),c('React').createElement('div',{className:"_hrs"},aa));}.bind(this),this.$AdsMediaPanelPageLinkInstagramAccountUnit5=function(){var z=i._("Connect an Instagram Account"),aa=null;if(this.props.instagramAccount){aa=i._("Log into Instagram to select images for your Facebook ads. The Instagram account you add will represent your business in your Instagram ads. You can only connect one Instagram account to your Page.");}else aa=c('React').createElement('div',null,i._("Log into an Instagram account to select Instagram images to use in your Facebook ads."),' ',c('React').createElement(c('Link.react'),{href:s,target:'_blank'},i._("Learn more")),'.');return c('React').createElement(c('CenteredContainer.react'),{className:"_2pie",horizontal:true},c('React').createElement(c('Image.react'),{src:j("22909")}),c('React').createElement('div',{className:"_hru"},z),c('React').createElement('div',{className:"_hrx"},aa));}.bind(this),this.$AdsMediaPanelPageLinkInstagramAccountUnit6=function(){return c('React').createElement(c('Grid.react'),{className:"_3-8k",cols:2,spacing:"prl pts"},c('React').createElement(m,null,c('React').createElement(c('XUITextInput.react'),{className:"_hry",height:'tall',maxLength:o,placeholder:i._("Username"),value:this.state.username,onChange:this.$AdsMediaPanelPageLinkInstagramAccountUnit8})),c('React').createElement(m,null,c('React').createElement(c('XUITextInput.react'),{className:"_hry",height:'tall',placeholder:i._("Password"),type:'password',value:this.state.password,onChange:this.$AdsMediaPanelPageLinkInstagramAccountUnit9})),c('React').createElement(m,null,c('React').createElement(c('BUIAdoptionXUIText.react'),{className:"lfloat"},c('React').createElement(c('Link.react'),{href:r,target:'_blank'},i._("Forgot password?")))),c('React').createElement(m,null,c('React').createElement(c('XUIButton.react'),{className:"rfloat",disabled:this.state.username===''||this.state.password==='',label:i._("Connect"),use:'confirm',onClick:this.$AdsMediaPanelPageLinkInstagramAccountUnit10})));}.bind(this),this.$AdsMediaPanelPageLinkInstagramAccountUnit4=function(){if(this.props.pageLinkOrUnlinkAccountError.length===0)return null;return c('React').createElement(c('BUIAdoptionXUINoticeGroup.react'),null,this.props.pageLinkOrUnlinkAccountError.map(function(z,aa){return c('React').createElement(c('BUIAdoptionXUINotice.react'),{key:aa,type:'error'},z);}));}.bind(this),this.$AdsMediaPanelPageLinkInstagramAccountUnit9=function(event){this.setState({password:event.target.value});}.bind(this),this.$AdsMediaPanelPageLinkInstagramAccountUnit8=function(event){this.setState({username:event.target.value});}.bind(this),this.$AdsMediaPanelPageLinkInstagramAccountUnit10=function(){c('AdsPageInstagramAccountActions').linkInstagramAccount(this.props.pageID,this.state.password,this.state.username);}.bind(this),this.$AdsMediaPanelPageLinkInstagramAccountUnit11=function(){c('AdsPageInstagramAccountActions').unlinkInstagramAccount(this.props.pageID,this.props.instagramAccount?this.props.instagramAccount.id:'');}.bind(this),v;}t.prototype.render=function(){if(this.props.instagramAccount&&this.props.instagramAccount.is_published){return this.$AdsMediaPanelPageLinkInstagramAccountUnit1();}else if(this.props.instagramAccountLoadState===c('AdsLoadState').LOADING){return this.$AdsMediaPanelPageLinkInstagramAccountUnit2();}else return this.$AdsMediaPanelPageLinkInstagramAccountUnit3();};t.prototype.$AdsMediaPanelPageLinkInstagramAccountUnit7=function(){var u=this.props.instagramAccount?this.props.instagramAccount.username:'',v=c('XPagesManagerSettingsController').getURIBuilder().setString('page_token',this.props.pageID).setString('tab','instagram_ads').setString('ref',c('PageSettingsRef').INSTAGRAM_ADS).getURI();return c('React').createElement(c('ActionList.react'),{className:"rfloat"},c('React').createElement(c('BUIAdoptionXUIText.react'),{shade:'dark',size:'small',weight:'bold'},'@'+u),c('React').createElement(c('BUIAdoptionXUIText.react'),{size:'small'},c('React').createElement(c('Link.react'),{href:v,target:'_blank'},i._("Edit"))));};t.propTypes={imageList:n.arrayOf(n.instanceOf(c('AdsImageLegacy'))).isRequired,instagramAccount:n.shape({id:n.string.isRequired,is_published:n.bool.isRequired,profile_pic:n.string.isRequired,username:n.string.isRequired}),instagramAccountLoadState:n.oneOf(Object.keys(c('AdsLoadState'))).isRequired,isClickEnabled:n.bool.isRequired,pageID:n.string.isRequired,pageLinkOrUnlinkAccountError:n.arrayOf(n.string).isRequired};t.defaultProps={imageList:[],instagramAccount:null,instagramAccountLoadState:c('AdsLoadState').NOT_LOADED,pageLinkOrUnlinkAccountError:[]};f.exports=t;}),null);
__d('AdsMediaPanelTabs',['keyMirror'],(function a(b,c,d,e,f,g){var h=c('keyMirror')({UPLOAD:null,LIBRARY:null,STOCK:null});f.exports=h;}),null);
__d('AdsMediaPanelViewFilterBar.react',['cx','fbt','AdsImageCollectionViews','Link.react','React','SimpleNUXMessage','SimpleNUXMessageTypes','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l,m,n,o,p=c('React').PropTypes;j=babelHelpers.inherits(q,c('React').Component);k=j&&j.prototype;function q(){var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=k.constructor).call.apply(t,[this].concat(w)),this.$AdsMediaPanelViewFilterBar1=function(y){if(y.view===c('AdsImageCollectionViews').views.INSTAGRAM&&!this.props.instagramAccountLinked){return c('React').createElement(s,{key:y.view||'ALL',selectedFilter:this.props.viewFilter,showImageCount:false,viewFilter:y,onViewFilterChoose:this.props.onViewFilterChoose});}else return c('React').createElement(r,{key:y.view||'ALL',selectedFilter:this.props.viewFilter,showImageCount:true,viewFilter:y,onViewFilterChoose:this.props.onViewFilterChoose});}.bind(this),u;}q.prototype.render=function(){var t="_5y6l"+(this.props.useMediaPanelRedesign?' '+"_2wrx":'');if(this.props.availableViewFilters.length===0)return c('React').createElement('div',{className:t});var u="_5y6m"+(this.props.useMediaPanelRedesign?' '+"_2wrx":'');return c('React').createElement('div',{className:u},this.props.availableViewFilters.map(this.$AdsMediaPanelViewFilterBar1));};q.propTypes={availableViewFilters:p.array.isRequired,instagramAccountLinked:p.bool.isRequired,viewFilter:p.object.isRequired,onViewFilterChoose:p.func};l=babelHelpers.inherits(r,c('React').Component);m=l&&l.prototype;function r(){var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=m.constructor).call.apply(t,[this].concat(w)),this.$LinkItem1=function(){this.props.onViewFilterChoose&&this.props.onViewFilterChoose(this.props.viewFilter);}.bind(this),u;}r.prototype.render=function(){var t=this.props.showImageCount?c('React').createElement('span',{className:"_5y6p"},this.props.viewFilter.count):null;return c('React').createElement(c('Link.react'),{className:"_5y6n"+(this.props.viewFilter.view===this.props.selectedFilter.view?' '+"_5y6o":''),onClick:this.$LinkItem1},c('React').createElement('span',null,c('React').createElement('span',null,this.props.viewFilter.text),t));};n=babelHelpers.inherits(s,c('React').Component);o=n&&n.prototype;function s(){var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=o.constructor).call.apply(t,[this].concat(w)),this.state={nuxShown:!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').BOOSTED_COMPONENT_INSTAGRAM_LIBRARY)},this.renderLayers=function(){return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:this.$LinkItemWithNux1,position:'above',shown:this.state.nuxShown,onCloseButtonClick:this.$LinkItemWithNux2,key:'nux_above'},i._("Connect an Instagram account to use its photos in your ads."));}.bind(this),this.$LinkItemWithNux1=function(){return this.refs.instagram_view_filter;}.bind(this),this.$LinkItemWithNux2=function(){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').BOOSTED_COMPONENT_INSTAGRAM_LIBRARY);this.setState({nuxShown:false});}.bind(this),u;}s.prototype.render=function(){return c('React').createElement('span',null,c('React').createElement(r,babelHelpers['extends']({},this.props,{ref:'instagram_view_filter'})),this.renderLayers());};f.exports=q;}),null);
__d('AdsMediaPanelViewFilters',['fbt','AdsImageCollectionViews'],(function a(b,c,d,e,f,g,h){var i=[{view:c('AdsImageCollectionViews').views.LIBRARY,text:h._("Ad Images")},{view:c('AdsImageCollectionViews').views.INSTAGRAM,text:h._("Instagram Images")},{view:c('AdsImageCollectionViews').views.PAGE,text:h._("Page Images")},{view:c('AdsImageCollectionViews').views.SCRAPED,text:h._("Website Images")}],j=0;i.forEach(function(m){j|=m.view;});var k={view:j,text:h._("All")};i.unshift(k);var l={filters:i,all:k};f.exports=l;}),null);
__d('AdsShutterstockSearchBar.react',['cx','ix','fbt','Image.react','React','XUITextInput.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$AdsShutterstockSearchBar2=function(){this.props.onTriggerSearch();}.bind(this),this.$AdsShutterstockSearchBar1=function(event){this.props.onTextChange(event.target.value);}.bind(this),p;}n.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_134r"},c('React').createElement('div',{className:"_134s"},c('React').createElement(c('Image.react'),{className:"_134t",src:i("22543")}),c('React').createElement('div',{className:"_134u"},j._("Powered by {partner-company-name}",[j.param('partner-company-name','Shutterstock')])),c('React').createElement(c('XUITextInput.react'),{className:"_134v",defaultValue:this.props.searchText,height:'tall',placeholder:j._("Search Free Stock Images"),onChange:this.$AdsShutterstockSearchBar1,onEnter:this.$AdsShutterstockSearchBar2})));};n.propTypes={searchText:m.string,onTriggerSearch:m.func,onTextChange:m.func};n.defaultProps={onTriggerSearch:c('emptyFunction'),onTextChange:c('emptyFunction')};f.exports=n;}),null);
__d('AdsShutterstockUseGuidelines.react',['cx','fbt','AdsActionTypes','AdsDispatcher','ContextualDialog.react','LayerFadeOnHide','Link.react','React','ReactLayeredComponentMixin_DEPRECATED','debounce','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j=c('React').PropTypes,k=250,l=320,m=c('React').createClass({displayName:'AdsShutterstockUseGuidelines',mixins:[c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{dialogPosition:j.string},getDefaultProps:function n(){return {dialogPosition:'right'};},getInitialState:function n(){return {dialogShown:false};},_cancelScheduledHides:function n(){this._scheduleHide.reset();},_hideDialog:function n(){this._cancelScheduledHides();this.setState({dialogShown:false});},_toggleDialog:function n(){this._cancelScheduledHides();var o=!this.state.dialogShown;this.setState({dialogShown:o});if(o)c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsActionTypes').SHUTTERSTOCK.GUIDELINES_SHOW});},componentWillMount:function n(){this._scheduleHide=c('debounce')(this._hideDialog,k);},componentWillUnmount:function n(){this._cancelScheduledHides();this._scheduleHide=null;},render:function n(){var o=c('joinClasses')("_54kg",this.props.className);return c('React').createElement(c('Link.react'),{className:o,ref:'link',onClick:this._toggleDialog,onMouseEnter:this._cancelScheduledHides,onMouseLeave:this._scheduleHide},i._("Some stock images may not comply with Facebook policies. Read our Advertising Policies before selecting an image."));},getLegalLanguage:function n(){return i._("Shutterstock images are available at no additional cost for use in your Facebook ads, with the following guidelines: {list of legal guidelines}",[i.param('list of legal guidelines',c('React').createElement('ul',{className:"_3-9n"},c('React').createElement('li',null,i._("You can't use the image as a trademark for a business.")),c('React').createElement('li',null,i._("You may not portray a person in a way that may be offensive, including: a) in ads for dating services; b) in connection with political endorsements; c) with defamatory, unlawful, offensive or immoral content; and d) as suffering from, or being treated for, a physical or mental ailment.")),c('React').createElement('li',null,i._("You may only use the image in ads and content on Facebook, and not with other websites or advertising services."))))]);},renderLayers:function n(){return {dialog:c('React').createElement(c('ContextualDialog.react'),{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},contextRef:function(){return this.refs.link;}.bind(this),position:this.props.dialogPosition,shown:this.state.dialogShown,width:l},c('React').createElement('div',{className:"_54kh",onMouseEnter:this._cancelScheduledHides,onMouseLeave:this._scheduleHide},c('React').createElement('h2',{className:"_54ki"},i._("Stock Image Use Guidelines")),this.getLegalLanguage()))};}});f.exports=m;}),null);
__d('AdsShutterstockViewStore',['AdsActionTypes','AdsDispatcher','FluxStore','Map','adsBaseStoreMixin'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('AdsDispatcher'));c('adsBaseStoreMixin')(this);this.$AdsShutterstockViewStoreClass3=new (c('Map'))();}j.prototype.__onDispatch=function(k){var l=k.action;switch(l.type){case c('AdsActionTypes').SHUTTERSTOCK.SEARCH_TEXT_CHANGED:this.$AdsShutterstockViewStoreClass1=l.data.searchText;this.__emitChange();break;case c('AdsActionTypes').SHUTTERSTOCK.SEARCH_DONE:this.$AdsShutterstockViewStoreClass2=l.data.searchText;if(!this.$AdsShutterstockViewStoreClass3.get(this.$AdsShutterstockViewStoreClass2))this.$AdsShutterstockViewStoreClass3.set(this.$AdsShutterstockViewStoreClass2,1);this.__emitChange();break;case c('AdsActionTypes').SHUTTERSTOCK.END_REACHED:var m=this.$AdsShutterstockViewStoreClass3.get(l.data.searchText);if(!m){this.$AdsShutterstockViewStoreClass3.set(l.data.searchText,2);}else this.$AdsShutterstockViewStoreClass3.set(l.data.searchText,m+1);this.__emitChange();break;}};j.prototype.getNumPagesForQuery=function(k){var l=this.$AdsShutterstockViewStoreClass3.get(k);return l||0;};j.prototype.getCurrentText=function(){return this.$AdsShutterstockViewStoreClass1;};j.prototype.getDelayedText=function(){return this.$AdsShutterstockViewStoreClass2;};j.prototype.isTyping=function(){var k=this.$AdsShutterstockViewStoreClass1!==null&&this.$AdsShutterstockViewStoreClass1!==undefined;return k&&this.$AdsShutterstockViewStoreClass1!==this.$AdsShutterstockViewStoreClass2;};f.exports=new j();}),null);
__d('AdsShutterstockLibrary.react',['cx','fbt','ix','AdsFluxContainer','AdsMediaLibrary.react','AdsMediaPanelInfiniteScrollFooter.react','AdsMediaPanelMessage.react','AdsShutterstockSearchBar.react','AdsShutterstockSearchStore','AdsShutterstockUseGuidelines.react','AdsShutterstockViewActions','AdsShutterstockViewStore','React','ShutterstockApiStatus','adsFormatErrorMessage','debounce','keyMirror','setImmediate'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=25,o=c('keyMirror')({ERROR:null,HAS_MORE:null,LOADING_INITIAL:null,LOADING_MORE:null,NO_MORE_RESULTS:null,NO_REQUEST:null,NO_RESULTS:null}),p=c('debounce')(function(r){return c('AdsShutterstockViewActions').searchDone(r);},200);k=babelHelpers.inherits(q,c('React').PureComponent);l=k&&k.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=l.constructor).call.apply(r,[this].concat(u)),this.$AdsShutterstockLibrary4=function(){var w=this.$AdsShutterstockLibrary2(),x=w.state;if(x===o.HAS_MORE)c('setImmediate')(function(){return c('AdsShutterstockViewActions').endReached(this.state.query);}.bind(this));}.bind(this),s;}q.getStores=function(){return [c('AdsShutterstockSearchStore'),c('AdsShutterstockViewStore')];};q.calculateState=function(r,s){var t=c('AdsShutterstockViewStore').getDelayedText()||s.defaultSearchText,u=c('AdsShutterstockViewStore').getNumPagesForQuery(t)||1,v=null;if(t)v=c('AdsShutterstockSearchStore').getSearchResults(t,n*u);return {currentSearchText:c('AdsShutterstockViewStore').getCurrentText(),isTyping:c('AdsShutterstockViewStore').isTyping(),query:t,results:v};};q.prototype.$AdsShutterstockLibrary1=function(r,s,t){return c('React').createElement(c('AdsMediaPanelMessage.react'),{icon:r,style:{height:this.props.imageContainerHeight},subtitle:s,title:t});};q.prototype.$AdsShutterstockLibrary2=function(){var r=this.state.results,s=null,t=[];if(!r){if(this.state.isTyping){s=o.LOADING_INITIAL;}else s=o.NO_REQUEST;}else if(r.hasError()){s=o.ERROR;}else if(!r.hasValue()){s=o.LOADING_INITIAL;}else if(!r.getValueEnforcing().next){t=r.getValueEnforcing().images.toArray();if(t.length===0){s=o.NO_RESULTS;}else s=o.NO_MORE_RESULTS;}else{t=r.getValueEnforcing().images.toArray();if(r.hasOperation()){s=o.LOADING_MORE;}else s=o.HAS_MORE;}return {state:s,imageList:t};};q.prototype.$AdsShutterstockLibrary3=function(){var r=this.$AdsShutterstockLibrary2(),s=r.state,t=r.imageList;switch(s){case o.NO_REQUEST:return this.$AdsShutterstockLibrary1(j("22542"),i._("Any images you select will be saved in your image library."),i._("Search for professional images to use in your ads."));case o.NO_RESULTS:return this.$AdsShutterstockLibrary1(j("22544"),i._("Try using other keywords."),i._("There aren't any images that match what you searched."));case o.ERROR:return this.$AdsShutterstockLibrary1(j("22544"),null,i._("An error occurred while searching for stock images: {error message}",[i.param('error message',c('adsFormatErrorMessage')(this.state.results.error))]));default:var u=s===o.HAS_MORE||s===o.LOADING_MORE,v=c('React').createElement(c('AdsMediaPanelInfiniteScrollFooter.react'),{fetchingNextPage:u,imagesLoaded:s!==o.LOADING_INITIAL}),w=s===o.LOADING_INITIAL||this.state.isTyping;return c('React').createElement(c('AdsMediaLibrary.react'),{height:this.props.imageContainerHeight,imageList:t,isClickEnabled:this.props.isClickEnabled,isLoadingInitial:w,scrollingAreaFooter:v,selectedImageList:this.props.selectedImageList,onEndReached:this.$AdsShutterstockLibrary4,onImageClick:this.props.onImageClick},c('React').createElement(c('AdsShutterstockUseGuidelines.react'),{className:"_3cl1",dialogPosition:'left'}));}};q.prototype.render=function(){if(!c('ShutterstockApiStatus').available)return c('React').createElement(c('AdsMediaPanelMessage.react'),{className:this.props.className,icon:j("22544"),style:{height:this.props.imageContainerHeight},subtitle:i._("Please try again later."),title:i._("Sorry, stock images aren't available right now.")});return c('React').createElement('div',{className:this.props.className},c('React').createElement(c('AdsShutterstockSearchBar.react'),{searchText:this.state.currentSearchText,onTextChange:this.$AdsShutterstockLibrary5}),this.$AdsShutterstockLibrary3());};q.prototype.$AdsShutterstockLibrary5=function(r){c('AdsShutterstockViewActions').searchTextChanged(r);p(r);};q.defaultProps={isClickEnabled:true,selectedImageList:[]};q.propTypes={defaultSearchText:m.string,imageContainerHeight:m.number.isRequired,onImageClick:m.func.isRequired,isClickEnabled:m.bool.isRequired,selectedImageList:m.array.isRequired};f.exports=c('AdsFluxContainer').create(q,{withProps:true});}),null);
__d('AdsAbstractImageUploadElementStates',[],(function a(b,c,d,e,f,g){'use strict';var h={IDLE:1,UPLOADING:2};f.exports=h;}),null);
__d('AdsAbstractImageUploadElement.react',['cx','invariant','AdsAbstractImageUploadElementStates','AdsImageUploader','React','ReactDOM','SubscriptionsHandler','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('AdsImageUploader').AdsImageUploader,m=c('React').PropTypes,n={};n[c('AdsAbstractImageUploadElementStates').IDLE]="_2uq";n[c('AdsAbstractImageUploadElementStates').UPLOADING]="_2ur";j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={isUploading:false,subscriptions:new (c('SubscriptionsHandler'))()},this.$AdsAbstractImageUploadElement1=function(){return this.state.isUploading?c('AdsAbstractImageUploadElementStates').UPLOADING:c('AdsAbstractImageUploadElementStates').IDLE;}.bind(this),q;}o.prototype.render=function(){return c('React').createElement('div',{className:c('joinClasses')("_2us",n[this.$AdsAbstractImageUploadElement1()],this.props.className),style:this.props.style},this.props.children);};o.prototype.componentWillReceiveProps=function(p){};o.prototype.componentDidMount=function(){var p=new l(c('ReactDOM').findDOMNode(this),{accountId:this.props.accountId,imageSpec:this.props.imageSpec,multiple:this.props.allowMultiImage,onFormInputMount:this.props.onFormInputMount,validateImageFormat:this.props.validateImageFormat,validateImageSize:this.props.validateImageSize});this.state.subscriptions.addSubscriptions(p.subscribe('onUploadClicked',this.props.onUploadClick),p.subscribe('onUploadStarted',function(q,r){this.setState({isUploading:true});this.props.onUploadStart(r);}.bind(this)),p.subscribe('onUploadFailed',function(){this.setState({isUploading:false});this.props.onUploadFail();}.bind(this)),p.subscribe('onUploadEnded',function(q,r){this.setState({isUploading:false});if(r.succeededImages.length)r.succeededImages.forEach(function(s){this.props.onUploadSuccess(s);}.bind(this));this.props.onUploadEnd(r.succeededImages,r.numFailedImages);}.bind(this)));};o.prototype.componentWillUnmount=function(){this.state.subscriptions.release();};o.propTypes={accountId:m.string.isRequired,allowMultiImage:m.bool,imageSpec:m.shape({minWarningWidth:m.number.isRequired,minWarningHeight:m.number.isRequired}),onFormInputMount:m.func,onUploadClick:m.func.isRequired,onUploadEnd:m.func.isRequired,onUploadFail:m.func.isRequired,onUploadStart:m.func.isRequired,onUploadSuccess:m.func.isRequired,validateImageSize:m.bool,validateImageFormat:m.bool};o.defaultProps={allowMultiImage:false,onUploadClick:c('emptyFunction'),onUploadEnd:c('emptyFunction'),onUploadFail:c('emptyFunction'),onUploadStart:c('emptyFunction'),onUploadSuccess:c('emptyFunction')};f.exports=o;}),null);
__d('AdsAbstractImageUploadElementContent.react',['cx','AdsAbstractImageUploadElementStates','AdsImageUploader','React','getObjectValues','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('AdsImageUploader').AdsImageUploaderConstants,l=c('React').PropTypes,m={};m[c('AdsAbstractImageUploadElementStates').IDLE]=c('joinClasses')("_5y7b",k.UPLOAD_ELEMENT);m[c('AdsAbstractImageUploadElementStates').UPLOADING]="_5y7c";i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;n.prototype.render=function(){return c('React').createElement('div',{className:c('joinClasses')("_5y7d",m[this.props.uploadState])},this.props.children);};function n(){i.apply(this,arguments);}n.propTypes={uploadState:l.oneOf(c('getObjectValues')(c('AdsAbstractImageUploadElementStates'))).isRequired};f.exports=n;}),null);
__d('AdsImageUploadErrorStoreState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('immutable').Record({apiError:null,sizeError:null,formatError:null}));i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('AdsImageUploadErrorStore',['AdsActionTypes','AdsDispatcher','AdsImageUploadErrorStoreState','FluxReduceStore','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return new (c('AdsImageUploadErrorStoreState'))();};j.prototype.reduce=function(k,l){var m=l.action;switch(m.type){case c('AdsActionTypes').IMAGE_UPLOAD.FORMAT_ERROR:return k.set('formatError',m.message);case c('AdsActionTypes').IMAGE_UPLOAD.SIZE_ERROR:return k.set('sizeError',m.message);case c('AdsActionTypes').IMAGE_UPLOAD.API_ERROR:return k.set('apiError',m.message);case c('AdsActionTypes').IMAGE_UPLOAD.REMOVE_ERRORS:return k.merge({apiError:null,sizeError:null,formatError:null});}return k;};j.prototype.getUploadErrors=function(){var k=[];this.getState().forEach(function(l){if(l)k.push(l);});return k;};function j(){h.apply(this,arguments);}f.exports=new j(c('AdsDispatcher'));}),null);
__d('AdsUploadImageBox.react',['cx','fbt','ix','AdsAbstractImageUploadElement.react','AdsAbstractImageUploadElementContent.react','AdsAbstractImageUploadElementStates','AdsFluxContainer','AdsImageUploadErrorStore','AdsValidationIcon.react','AdsValidationIconType','Image.react','InlineBlock.react','React','ReactDOM','ShimButton.react','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=180,o=35;k=babelHelpers.inherits(p,c('React').PureComponent);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.$AdsUploadImageBox1=function(){if(this.state.inputFormDOMElement)this.state.inputFormDOMElement.click();}.bind(this),this.$AdsUploadImageBox2=function(v){this.setState({inputFormDOMElement:c('ReactDOM').findDOMNode(v)});}.bind(this),r;}p.getStores=function(){return [c('AdsImageUploadErrorStore')];};p.calculateState=function(){return {uploadErrors:c('AdsImageUploadErrorStore').getUploadErrors()};};p.prototype.render=function(){var q=null;if(this.state.uploadErrors.length>0){var r=this.state.uploadErrors.map(function(v,w){return c('React').createElement(c('ShimButton.react'),{key:w,onClick:this.$AdsUploadImageBox1},c('React').createElement(c('AdsValidationIcon.react'),{className:"_3sft",messages:[v.longMessage],type:c('AdsValidationIconType').ERROR_IMAGE}),v.shortMessage);}.bind(this));q=c('React').createElement('div',{className:"_3sfu"},r);}var s=this.props.allowMultiImage?i._("Drag and drop multiple images or click to upload images"):i._("Drag and drop an image or click to upload"),t=c('joinClasses')(this.props.className,"_3sfv",!!this.props.useMediaPanelRedesign?"_148b":''),u=null;if(this.props.useMediaPanelRedesign){u=c('React').createElement('div',null,c('React').createElement(c('Image.react'),{className:"_3sfw",src:j("23121")}),c('React').createElement('div',{className:"_3sfx"},s));}else u=c('React').createElement('div',null,c('React').createElement(c('Image.react'),{className:"_3sfw",src:j("22565")}),c('React').createElement(c('InlineBlock.react'),{alignv:'middle',className:"_3sfx",height:o},s));return c('React').createElement('div',null,c('React').createElement(c('AdsAbstractImageUploadElement.react'),babelHelpers['extends']({},this.props,{className:t,style:this.props.style,onFormInputMount:this.$AdsUploadImageBox2}),c('React').createElement(c('AdsAbstractImageUploadElementContent.react'),{uploadState:c('AdsAbstractImageUploadElementStates').IDLE},c('React').createElement('div',{className:"_4xj8"},c('React').createElement(c('InlineBlock.react'),{alignv:'middle',height:n},u))),c('React').createElement(c('AdsAbstractImageUploadElementContent.react'),{uploadState:c('AdsAbstractImageUploadElementStates').UPLOADING},c('React').createElement(c('InlineBlock.react'),{alignv:'middle',className:"_4xj8",height:n},i._("Uploading...")))),q);};p.defaultProps={style:{}};p.propTypes={accountId:m.string.isRequired,allowMultiImage:m.bool,height:m.number.isRequired,imageSpec:m.shape({minWarningWidth:m.number.isRequired,minWarningHeight:m.number.isRequired}),onUploadClick:m.func,onUploadEnd:m.func,onUploadFail:m.func,onUploadStart:m.func,onUploadSuccess:m.func,useMediaPanelRedesign:m.bool,validateImageFormat:m.bool,validateImageSize:m.bool};f.exports=c('AdsFluxContainer').create(p);}),null);
__d('AdsMediaPanel.react',['cx','fbt','ix','Promise','AdsArrowedCarouselEnhanced.react','AdsEditInlinePostWarning.react','AdsImageActions','AdsImageCollectionViews','AdsImageDimensionDataLoader','AdsImageSecondaryActions','AdsImageStore','AdsImageValidation','AdsLoadState','AdsMediaLibrary.react','AdsMediaPanelHeader.react','AdsMediaPanelImageBoxContainer.react','AdsMediaPanelInfiniteScrollFooter.react','AdsMediaPanelFilters','AdsMediaPanelMessage.react','AdsMediaPanelPageLinkInstagramAccountUnit.react','AdsMediaPanelTabs','AdsMediaPanelViewFilterBar.react','AdsMediaPanelViewFilters','AdsShutterstockLibrary.react','AdsUploadImageBox.react','AdsWebdriverIDs','BootloadedComponent.react','Event','FluxMixinLegacy','JSResource','Map','React','ReactComponentWithPureRenderMixin','ReactDOM','Set','SUISpinner.react','SUIThemeContainer.react','AdsImageUploadErrorActions','emptyFunction','getViewportDimensions','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=49,m=25,n=84,o=144,p=215,q=332,r=658,s=523,t=100,u=60,v=60,w=50,x=0,y=12,z=0,aa=0,ba=100,ca=80,da={};da[c('AdsMediaPanelTabs').UPLOAD]={className:"_5xhy",title:i._("Upload Images"),renderer:'_renderUploadTab'};da[c('AdsMediaPanelTabs').LIBRARY]={className:"_5xh-",title:i._("Image Library"),renderer:'_renderLibraryTab'};da[c('AdsMediaPanelTabs').STOCK]={className:"_5xh_",title:i._("Stock Images"),renderer:'_renderStockTab'};var ea=c('React').createClass({displayName:'AdsMediaPanel',mixins:[c('FluxMixinLegacy')([c('AdsImageStore')],{withProps:true}),c('ReactComponentWithPureRenderMixin')],propTypes:{accountID:k.string.isRequired,allowMultiImage:k.bool,buyingTypes:k.arrayOf(k.string),defaultStockSearchText:k.string,disableTooSmallImages:k.bool,igSpecificImageSpec:k.object,imageCollection:k.object.isRequired,imageHandlers:k.shape({onClick:k.func,onDoubleClick:k.func,onSecondaryAction:k.func}).isRequired,imageSpec:k.shape({minWarningWidth:k.number.isRequired,minWarningHeight:k.number.isRequired,placement:k.string}),initialSelectedTab:k.oneOf(Object.keys(da)),instagramAccount:k.shape({id:k.string.isRequired,is_published:k.bool.isRequired,profile_pic:k.string.isRequired,username:k.string.isRequired}),instagramAccountLoadState:k.oneOf(Object.keys(c('AdsLoadState'))),maxSelectedImages:k.number.isRequired,pageID:k.string,pageLinkOrUnlinkAccountError:k.arrayOf(k.string),selectedImageList:k.array.isRequired,tabKeys:k.arrayOf(k.string).isRequired,theme:k.object,uploadHandlers:k.shape({onClick:k.func,onEnd:k.func,onFail:k.func,onStart:k.func,onSuccess:k.func}).isRequired,useInstagramImageCreative:k.bool,useMediaPanelRedesign:k.bool,userImagesLoaded:k.bool,validateImageFormat:k.bool,validateImageSize:k.bool,onTabSwitch:k.func.isRequired},getDefaultProps:function fa(){return {adEditWarningMessage:null,disableTooSmallImages:false,imageHandlers:{onClick:c('emptyFunction'),onDoubleClick:c('emptyFunction'),onSecondaryAction:c('emptyFunction')},maxSelectedImages:1,onTabSwitch:c('emptyFunction'),pageFetchingNextPage:false,pageImagesLoaded:true,pageOnEndReached:c('emptyFunction'),selectedImageList:[],uploadHandlers:{},useMediaPanelRedesign:false,userImagesLoaded:true,validateImageFormat:true,validateImageSize:true};},getInitialState:function fa(){return {multiImageRowHeight:0,viewFilter:c('AdsMediaPanelViewFilters').all,selectedTab:this.props.initialSelectedTab||c('AdsMediaPanelTabs').LIBRARY,uploadedImages:[],filterSet:null};},statics:{calculateState:function fa(ga,ha){return {canFetchNextLibraryPage:c('AdsImageStore').hasCursorForNextPage(ha.accountID),fetchingNextLibraryPage:c('AdsImageStore').isFetchingNextPage(ha.accountID)};}},componentWillMount:function fa(){this._setResizeHandlerRef(c('Event').listen(window,'resize',function(){return this.forceUpdate();}.bind(this)));},componentWillUnmount:function fa(){this._removeResizeHandlerRef();this._setResizeHandlerRef(null);},componentDidMount:function fa(){this._setSelectedImagesRowHeight();},componentDidUpdate:function fa(){this._setSelectedImagesRowHeight();},_getTabContentHeight:function fa(){var ga=this.props.useMediaPanelRedesign?n:o,ha=0,ia=0,ja=0;if(this.props.useMediaPanelRedesign){ha=l+m;if(this.props.maxSelectedImages>1)ha+=ga;ia=p+ha;ja=s;}else{ia=p+l;ja=q+l;ha=r-ja;}var ka=c('getViewportDimensions')().height,la=ka-t-ha;return Math.max(ia,Math.min(ja,la));},_removeResizeHandlerRef:function fa(){var ga=this;ga._resizeHandlerRef.remove();},_setResizeHandlerRef:function fa(ga){var ha=this;ha._resizeHandlerRef=ga;},_isTabAllowed:function fa(ga){return this.props.tabKeys.indexOf(ga)!==-1;},_renderMultipleSelectedImagesRow:function fa(){var ga=this.state.multiImageRowHeight===0?0:this.state.multiImageRowHeight/ba,ha=null;if(this.props.maxSelectedImages>1){var ia=this.props.selectedImageList.map(function(ka,la){return c('React').createElement(c('AdsMediaPanelImageBoxContainer.react'),{alt:i._("Selected Image {number} of {total}",[i.param('number',la+1),i.param('total',this.props.selectedImageList.length)]),buyingTypes:this.props.buyingTypes,className:"_16es",decoration:'removable',image:ka,imageSpec:this.props.imageSpec,key:ka.getUniqueIdentifier(),scaleImageFactor:ga,useMediaPanelRedesign:this.props.useMediaPanelRedesign,onDecorationIconClick:this.props.imageHandlers.onSecondaryAction&&this.props.imageHandlers.onSecondaryAction.bind(null,ka,c('AdsImageSecondaryActions').X)});}.bind(this)),ja="_16et"+(' '+"_5xi2")+(this.props.useMediaPanelRedesign?' '+"_2xcc":'')+(' '+"clearfix");ha=c('React').createElement('div',{className:ja,'data-testid':c('AdsWebdriverIDs').SELECTED_IMAGE_PANEL},c('React').createElement('div',{className:"_16eu"},c('React').createElement('h2',{className:"_5xht"},i._("Selected Images")),c('React').createElement('span',{className:"_5xi4"},i._({"*":{"*":"({images} of {max-images})"}},[i.param('images',this.props.selectedImageList.length,[0]),i.param('max-images',this.props.maxSelectedImages,[0])]))),c('React').createElement('div',{className:"_3k2_",ref:'selectedImagesCarouselContainer'},c('React').createElement(c('AdsArrowedCarouselEnhanced.react'),{maxChangeAmount:6},ia)));}return ha;},render:function fa(){da[c('AdsMediaPanelTabs').UPLOAD].title=i._({"268435456":"Upload Image","*":"Upload Images"},[i.plural(this.props.maxSelectedImages)]);var ga=this.props.tabKeys.map(function(ia){return {tabKey:ia,className:da[ia].className,title:da[ia].title};}),ha=c('React').createElement('div',{'data-testid':c('AdsWebdriverIDs').IMAGE_LIBRARY},c('React').createElement(c('AdsMediaPanelHeader.react'),{selectedTab:this.state.selectedTab,tabConfigs:ga,useMediaPanelRedesign:this.props.useMediaPanelRedesign,onTabSwitch:this._switchToTab}),this._renderTabContent(),this._renderEditInlinePostWarning(),this._renderMultipleSelectedImagesRow());if(this.props.theme){return c('React').createElement(c('SUIThemeContainer.react'),{theme:this.props.theme},ha);}else return ha;},_switchToTab:function fa(ga){this.setState({selectedTab:ga});this.props.onTabSwitch(ga);},_renderEditInlinePostWarning:function fa(){return c('React').createElement(c('AdsEditInlinePostWarning.react'),{className:"_5zio",message:this.props.adEditWarningMessage});},_renderTabContent:function fa(){var ga=da[this.state.selectedTab],ha=c('joinClasses')(ga.className,"_5xhx"+(' '+"_5xhw")),ia=this;return ia[ga.renderer](this.state.selectedTab,ha);},_renderUploadTab:function fa(ga,ha){c('AdsImageUploadErrorActions').removeErrors();return c('React').createElement('div',{className:ha,key:ga},c('React').createElement(c('AdsUploadImageBox.react'),{accountId:this.props.accountID,allowMultiImage:this.props.allowMultiImage||this.props.maxSelectedImages>1,height:this._getTabContentHeight(),imageSpec:this.props.imageSpec,useMediaPanelRedesign:this.props.useMediaPanelRedesign,validateImageFormat:this.props.validateImageFormat,validateImageSize:this.props.validateImageSize,onUploadClick:this.props.uploadHandlers.onClick,onUploadEnd:this._onUploadEnd,onUploadFail:this.props.uploadHandlers.onFail,onUploadStart:this.props.uploadHandlers.onStart,onUploadSuccess:this.props.uploadHandlers.onSuccess}));},_onUploadEnd:function fa(ga){c('Promise').all(ga.map(function(ha){return c('AdsImageDimensionDataLoader').getDimensionByURL(ha.getUrl()).then(function(ia){var ja=ia.width,ka=ia.height;return ha.clone({width:ja,height:ka});});})).done(function(ha){if(this.props.uploadHandlers.onEnd)this.props.uploadHandlers.onEnd(ha);if(!ha.length)return;var ia=this.state.uploadedImages||[],ja=this._filterDuplicateImages(ia,ha);ia=ia.concat(ja);this.setState({uploadedImages:ia});if(this.props.maxSelectedImages===1)this.setState({selectedTab:c('AdsMediaPanelTabs').LIBRARY,filterSet:null},function(){return this.scrollToImage(ha[0]);}.bind(this));}.bind(this));},_sortDownTooSmallImages:function fa(ga){var ha=this.props.imageSpec,ia=this.props.igSpecificImageSpec,ja=this.state.uploadedImages;ga=this._filterDuplicateImages(ja,ga);var ka=new (c('Map'))();ga.forEach(function(ma,na){return ka.set(ma,na);});var la=ga.sort(function(ma,na){var oa=0,pa=0;if(ia){oa+=c('AdsImageValidation').isWarningSize(ma,ia)?1:0;pa+=c('AdsImageValidation').isWarningSize(na,ia)?1:0;}oa+=c('AdsImageValidation').isWarningSize(ma,ha)?1:0;pa+=c('AdsImageValidation').isWarningSize(na,ha)?1:0;if(oa>pa){return -1;}else if(oa<pa){return 1;}else return ka.get(ma)-ka.get(na);});return ja?ja.concat(la):la;},_filterDuplicateImages:function fa(ga,ha){if(!ga)return ha;var ia=new (c('Set'))();ga.forEach(function(ja){return ia.add(ja.getUniqueIdentifier());});return ha.filter(function(ja){return !ia.has(ja.getUniqueIdentifier());});},_onLibraryEndReached:function fa(){if(this.state.canFetchNextLibraryPage&&!this.state.fetchingNextLibraryPage)c('AdsImageActions').loadNextPage(this.props.accountID);},_canSelectImages:function fa(){return this.props.maxSelectedImages===1||this.props.selectedImageList.length<this.props.maxSelectedImages;},_renderLibraryTab:function fa(ga,ha){var ia=this.props.imageCollection,ja=ia.getImageCount(this.state.viewFilter.view),ka=ia.getImages(this.state.viewFilter.view);if(this.props.disableTooSmallImages)ka=this._sortDownTooSmallImages(ka);if(this.props.filters!=null&&this.state.filterSet!=null)ka=c('AdsMediaPanelFilters').applyImageFilters(ka,this.state.filterSet);var la=this._onLibraryEndReached,ma=null;if(this.state.fetchingNextLibraryPage||!this.state.canFetchNextLibraryPage)ma=c('React').createElement(c('AdsMediaPanelInfiniteScrollFooter.react'),{fetchingNextPage:this.state.fetchingNextLibraryPage,imagesLoaded:this.props.userImagesLoaded});if(this.state.viewFilter.view===c('AdsImageCollectionViews').views.PAGE){ma=c('React').createElement(c('AdsMediaPanelInfiniteScrollFooter.react'),{fetchingNextPage:this.props.pageFetchingNextPage,imagesLoaded:this.props.pageImagesLoaded});la=this.props.pageOnEndReached;}var na=null;if(this.props.useMediaPanelRedesign){na={containerPadding:z,maxImageHeight:ba,minImageHeight:ca,minImageWidth:x,marginPerImage:aa};}else na={containerPadding:u,maxImageHeight:v,minImageHeight:w,minImageWidth:x,marginPerImage:y};var oa=this._getTabContentHeight()-l,pa=void 0;if(this.state.viewFilter.view===c('AdsImageCollectionViews').views.INSTAGRAM){pa=c('React').createElement(c('AdsMediaPanelPageLinkInstagramAccountUnit.react'),babelHelpers['extends']({},this.props,{imageList:ka,isClickEnabled:this._canSelectImages(),isLoadingInitial:!this.props.userImagesLoaded,photoArrangeConstraints:na,photoArrangeEnabled:true,ref:'imageLib',scrollingAreaFooter:ma,totalHeight:oa,onEndReached:la,onImageClick:this.props.imageHandlers.onClick,onImageDoubleClick:this.props.imageHandlers.onDoubleClick}));}else if(ja>0||!this.props.userImagesLoaded){pa=c('React').createElement(c('AdsMediaLibrary.react'),{buyingTypes:this.props.buyingTypes,disableTooSmallImages:this.props.disableTooSmallImages,height:oa,igSpecificImageSpec:this.props.igSpecificImageSpec,imageList:ka,imageSpec:this.props.imageSpec,isClickEnabled:this._canSelectImages(),isLoadingInitial:!this.props.userImagesLoaded,key:ga,photoArrangeConstraints:na,photoArrangeEnabled:true,ref:'imageLib',useMediaPanelRedesign:this.props.useMediaPanelRedesign,scrollingAreaFooter:ma,selectedImageList:this.props.selectedImageList,onEndReached:la,onImageClick:this.props.imageHandlers.onClick,onImageDoubleClick:this.props.imageHandlers.onDoubleClick});}else{var qa=this._isTabAllowed(c('AdsMediaPanelTabs').STOCK)?i._("Upload images or try using professional stock images at no extra cost."):i._("Upload images to use them for your ads.");pa=c('React').createElement(c('AdsMediaPanelMessage.react'),{className:ha,icon:j("22542"),style:{height:String(oa)+'px'},subtitle:qa,title:i._("There aren't any images in your library.")});}var ra=c('AdsMediaPanelViewFilters').filters.map(function(ta){return babelHelpers['extends']({},ta,{count:ia.getImageCount(ta.view)});}).filter(function(ta){return ta.view!==c('AdsImageCollectionViews').views.INSTAGRAM&&ta.count>0||ta.view===c('AdsImageCollectionViews').views.INSTAGRAM&&this.props.useInstagramImageCreative;}.bind(this)),sa=this.props.filters?c('React').createElement('div',{className:"_5y6m"+(this.props.useMediaPanelRedesign?' '+"_2wrx":'')},c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('AdsMediaPanelFilterBar.react').__setRef('AdsMediaPanel.react'),bootloadPlaceholder:c('React').createElement(c('SUISpinner.react'),null),filterSet:this.state.filterSet,mediaType:'image',onChange:this._onFilterChange})):null;return c('React').createElement('div',{className:ha},c('React').createElement(c('AdsMediaPanelViewFilterBar.react'),{availableViewFilters:ra,instagramAccountLinked:!!this.props.instagramAccount&&this.props.instagramAccount.is_published,useMediaPanelRedesign:this.props.useMediaPanelRedesign,viewFilter:this.state.viewFilter,onViewFilterChoose:this._onViewFilterChoose}),sa,pa);},_onViewFilterChoose:function fa(ga){if(ga.view===this.state.viewFilter.view)return;this.setState({viewFilter:ga});},_onFilterChange:function fa(ga){this.setState({filterSet:ga});},_onStockImageClick:function fa(ga){this.props.imageCollection.addImagesToBack_UNSAFE([ga],c('AdsImageCollectionViews').views.STOCK);var ha=this.props.imageHandlers.onClick;if(ha)ha.call(this.props.imageHandlers,ga);},_renderStockTab:function fa(ga,ha){return c('React').createElement(c('AdsShutterstockLibrary.react'),{className:ha,defaultSearchText:this.props.defaultStockSearchText,imageContainerHeight:this._getTabContentHeight()-l,isClickEnabled:this._canSelectImages(),key:ga,selectedImageList:this.props.selectedImageList,onImageClick:this._onStockImageClick});},_setSelectedImagesRowHeight:function fa(){if(this.props.maxSelectedImages>1){var ga=c('ReactDOM').findDOMNode(this.refs.selectedImagesCarouselContainer);this.setState({multiImageRowHeight:ga.offsetHeight});}},scrollToImage:function fa(ga){this.refs.imageLib.scrollToImage(ga);}});f.exports=ea;}),null);
__d('AdsVideoUploadStatus',[],(function a(b,c,d,e,f,g){var h={BROWSE:'BROWSE',ENCODING:'ENCODING',ERROR:'ERROR',NONE:'NONE',UPLOADING:'UPLOADING'};f.exports=h;}),null);
__d('ConversionPixelStatsTypes',['immutable'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('immutable').Seq({DEVICE:null,DEVICE_OS:null,DOMAIN:null,TRAFFIC:null,URL:null}).map(function(h,i){return i.toLowerCase();}).toObject();}),null);
__d('ConversionStatsTypeToAggregationType',['ConversionPixelStatsTypes'],(function a(b,c,d,e,f,g){'use strict';var h={};h[c('ConversionPixelStatsTypes').DOMAIN]='host';h[c('ConversionPixelStatsTypes').DEVICE]='device_type';h[c('ConversionPixelStatsTypes').DEVICE_OS]='device_os';h[c('ConversionPixelStatsTypes').TRAFFIC]='pixel_fire';h[c('ConversionPixelStatsTypes').URL]='url';f.exports=h;}),null);
__d('AdsConversionPixelDataLoader',['invariant','AdsGraphAPI','AdsPixelStatusUtils','GraphAPIPaging','ConversionStatsTypeToAggregationType'],(function a(b,c,d,e,f,g,h){'use strict';var i=['id','last_firing_time','name','tag','js_pixel'];j.prototype.getAdsAPIFetchPromiseForPixels=function(l){return c('AdsGraphAPI').get(f.id).adaccount(l).edge('offsitepixels').get({fields:i}).then(c('GraphAPIPaging').allPages());};j.prototype.getAdsAPIFetchPromiseForPixel=function(l){return c('AdsGraphAPI').get(f.id).object('offsitepixels',l).get({fields:i});};j.prototype.getAdsAPIFetchPromiseForStats=function(l,m){l in c('ConversionStatsTypeToAggregationType')||h(0);return c('AdsGraphAPI').get(f.id).object('offsitepixels',m).edge('stats').get({aggregation:c('ConversionStatsTypeToAggregationType')[l],start_time:c('AdsPixelStatusUtils').getStatsStartTime()});};j.prototype.getAdsAPIFetchPromiseForRawFires=function(l){return c('AdsGraphAPI').get(f.id).object('offsitepixels',l).edge('raw_fires').get();};j.prototype.getAdsAPIFetchPromiseForRawFiresByFilter=function(l,m,n){return c('AdsGraphAPI').get(f.id).object('offsitepixels',l).edge('raw_fires').get({filter_type:c('ConversionStatsTypeToAggregationType')[m],filter:n});};function j(){}var k=new j();f.exports=k;}),null);
__d('AdsConversionPixelServerActions',['AdsActionTypes','AdsDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={loadingError:function i(j){c('AdsDispatcher').handleUpdateFromServerResponse({error:j,type:c('AdsActionTypes').CONVERSION_PIXEL.BATCH_LOAD_ERROR});},updatePixels:function i(j,k){c('AdsDispatcher').handleUpdateFromServerResponse({lastPage:k,pixels:j,type:c('AdsActionTypes').CONVERSION_PIXEL.UPDATE_PIXELS});},updatePixelStats:function i(j,k,l){c('AdsDispatcher').handleUpdateFromServerResponse({statsType:j,pixelID:k,stats:l,type:c('AdsActionTypes').CONVERSION_PIXEL.UPDATE_PIXEL_STATS});},updateRawFires:function i(j,k){c('AdsDispatcher').handleUpdateFromServerResponse({pixelID:j,rawFires:k,type:c('AdsActionTypes').CONVERSION_PIXEL.RECEIVE_RAW_FIRES});},updateRawFiresByFilter:function i(j,k,l,m){c('AdsDispatcher').handleUpdateFromServerResponse({pixelID:j,filterType:k,filter:l,rawFires:m,type:c('AdsActionTypes').CONVERSION_PIXEL.RECEIVE_RAW_FIRES_BY_FILTER});}};f.exports=h;}),null);
__d("XAdsDefaultConversionPixelController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ads\/conversion_pixel\/default_pixel\/",{account_id:{type:"Int",required:true},domain:{type:"String",required:true}});}),null);
__d('AdsConversionPixelDataDispatcher',['AdsConversionPixelDataLoader','AdsConversionPixelServerActions','AdsCFActionTypes','AdsDispatcher','AsyncRequest','XAdsDefaultConversionPixelController'],(function a(b,c,d,e,f,g){'use strict';h.prototype.loadPixels=function(j){c('AdsConversionPixelDataLoader').getAdsAPIFetchPromiseForPixels(j).then(function(k){return c('AdsConversionPixelServerActions').updatePixels(k.data);},function(k){return c('AdsConversionPixelServerActions').loadingError(k);}).done();};h.prototype.loadPixel=function(j){c('AdsConversionPixelDataLoader').getAdsAPIFetchPromiseForPixel(j).then(function(k){return c('AdsConversionPixelServerActions').updatePixels([k]);},function(k){return c('AdsConversionPixelServerActions').loadingError(k);}).done();};h.prototype.loadStats=function(j,k){c('AdsConversionPixelDataLoader').getAdsAPIFetchPromiseForStats(j,k).then(function(l){return c('AdsConversionPixelServerActions').updatePixelStats(j,k,l.data);},function(l){return c('AdsConversionPixelServerActions').loadingError(l);}).done();};h.prototype.loadRawFires=function(j){c('AdsConversionPixelDataLoader').getAdsAPIFetchPromiseForRawFires(j).then(function(k){return c('AdsConversionPixelServerActions').updateRawFires(j,k.data);},function(k){return c('AdsConversionPixelServerActions').loadingError(k);}).done();};h.prototype.loadRawFiresByFilter=function(j,k,l){c('AdsConversionPixelDataLoader').getAdsAPIFetchPromiseForRawFiresByFilter(j,k,l).then(function(m){return c('AdsConversionPixelServerActions').updateRawFiresByFilter(j,k,l,m.data);},function(m){return c('AdsConversionPixelServerActions').loadingError(m);}).done();};h.prototype.loadDefaultPixel=function(j,k){var l=c('XAdsDefaultConversionPixelController').getURIBuilder().setInt('account_id',j).setString('domain',k).getURI();new (c('AsyncRequest'))().setURI(l).setHandler(function(m){c('AdsDispatcher').handleUpdateFromServerResponse({type:c('AdsCFActionTypes').DEFAULT_CONVERSION_PIXEL_LOADED,data:m.payload});}).send();};function h(){}var i=new h();f.exports=i;}),null);
__d('AdsReviewAPIErrorType',['errorCode'],(function a(b,c,d,e,f,g,h){'use strict';var i={AFFILIATE_PENALTY_VIOLATION:1885595,POLICY_VIOLATION:1885178,TEXT_OVERLAY_VIOLATION:1885113};f.exports=i;}),null);
__d('IntegrityAPIConversions',['AdContentFeedbackTypes','AdsImageUtils','AdsUtils','CROWAdDisapprovalReasons','CROWCompsType','IntegrityAPIConversionsConstants','Map','Set'],(function a(b,c,d,e,f,g){'use strict';var h=c('IntegrityAPIConversionsConstants').TEXT_OVERLAY_REASONS,i={PROACTIVE_AD:'uncategorized',PROACTIVE_AD_ACCOUNT:'account_id',PROACTIVE_AD_BODY_TEXT:'body',PROACTIVE_AD_CAMPAIGN:'campaign_id',PROACTIVE_AD_IMAGE:'image_hash',PROACTIVE_AD_LANDING_PAGE:'link_url',PROACTIVE_AD_TARGET_SPEC:'targeting',PROACTIVE_AD_TITLE_TEXT:'title'},j=function(){var m={};Object.keys(i).forEach(function(n){m[i[n]]=n;});return m;}(),k=new (c('Map'))(),l={getApprovedFeedback:function m(n){return {adHash:n,data:{},warningData:{},feedback:c('AdContentFeedbackTypes').APPROVE,imageUniqueIdentifierToBoxesAndPolicy:k,creativeID:null};},fromAPIErrorData:function m(n,o,p){var q=l._getImageUniqueIdentifier(p);return this.fromAPIErrorDataWithIdentifier(n,o,q);},fromAPIErrorDataWithIdentifier:function m(n,o,p){var q=n.feedback_data,r=n.creative_id,s=l._divideImageWarnings(q,h),t=s[0],u=s[1],v=Object.keys(t).length>0?c('AdContentFeedbackTypes').REJECT:c('AdContentFeedbackTypes').APPROVE;return {adHash:o,creativeID:r,data:t,warningData:u,feedback:v,imageUniqueIdentifierToBoxesAndPolicy:l._getTextOverlayPolicyInfo(p,q)};},_divideImageWarnings:function m(n,o){var p={};if(!n||!n[c('CROWCompsType').PROACTIVE_AD_IMAGE])return [n,p];if(Object.keys(n[c('CROWCompsType').PROACTIVE_AD_IMAGE]).length===0)return [n,p];var q=c('AdsUtils').clone(n),r=q[c('CROWCompsType').PROACTIVE_AD_IMAGE];delete q[c('CROWCompsType').PROACTIVE_AD_IMAGE];Object.keys(r).forEach(function(t){if(o.has(t)){p[t]=r[t];delete r[t];}});if(Object.keys(r).length>0)q[c('CROWCompsType').PROACTIVE_AD_IMAGE]=r;var s={};if(Object.keys(p).length>0)s[c('CROWCompsType').PROACTIVE_AD_IMAGE]=p;return [q,s];},_getTextOverlayPolicyInfo:function m(n,o){if(!o[c('CROWCompsType').PROACTIVE_AD_IMAGE])return k;var p=o[c('CROWCompsType').PROACTIVE_AD_IMAGE],q=c('CROWAdDisapprovalReasons').UNKNOWN,r=null;Object.keys(p).forEach(function(w){if(h.has(w)){r=p[w];q=w;}});if(!r||!r.metadata||!r.metadata.image_url_to_penalty_info)return k;var s=r.metadata.image_url_to_penalty_info;if(Object.keys(s).length===0)return k;if(q===c('CROWAdDisapprovalReasons').UNKNOWN)return k;var t=new (c('Map'))();if(n&&Object.keys(s).length===1){var u=Object.keys(s)[0],v=s[u];this._addImageToPolicyInfo(n,v,t,q);}else Object.keys(s).forEach(function(w){var x=s[w];this._addImageToPolicyInfo(w,x,t,q);}.bind(this));return t;},_addImageToPolicyInfo:function m(n,o,p,q){var r={penaltyInfo:o,policyWarning:q};p.set(n,r);},_getImageUniqueIdentifier:function m(n){var o=c('AdsImageUtils').getImageHash(n);if(o)return o;var p=c('AdsImageUtils').getImageURL(n);return p?p:null;}};f.exports={fromAPIErrorDataWithIdentifier:l.fromAPIErrorDataWithIdentifier,getApprovedFeedback:l.getApprovedFeedback,fromAPIErrorData:l.fromAPIErrorData,compTypeToField:i,fieldToCompType:j};}),null);
__d('AdsReviewAPIDataLoader',['invariant','Promise','AdsFilteringObjectType','AdsGraphAPI','AdsReviewAPIErrorType','GraphEdgeName','IntegrityAPIConversions','AdsReviewIPCUtils','Set'],(function a(b,c,d,e,f,g,h){'use strict';var i=new (c('Set'))(Object.keys(c('AdsReviewAPIErrorType')).map(function(k){return c('AdsReviewAPIErrorType')[k];})),j={validate:function k(l){if(l.adgroupCreateItem)return this._validateAdgroupCreate(l.adgroupCreateItem);if(l.adgroupEditItem)return this._validateAdgroupEdit(l.adgroupEditItem);if(l.campaignEditItem)return this._validateCampaignEdit(l.campaignEditItem);h(0);},_validateAdgroupCreate:function k(l){l.adgroupAPIReviewSpec.execution_options=['validate_only','synchronous_ad_review'];var m=c('AdsGraphAPI').get(f.id).adaccount(l.accountID).edge(c('GraphEdgeName').ADS).batched().post(babelHelpers['extends']({},l.adgroupAPIReviewSpec,{adlog_sampling:0}));return this._processValidationPromise(m,l.accountID,l.adgroupAPIReviewSpec,l.adHash);},_processValidationPromise:function k(l,m,n,o){return new (c('Promise'))(function(p,q){l.done(function(r){c('AdsReviewIPCUtils').logSuccessfulAPICall(m);p(c('IntegrityAPIConversions').getApprovedFeedback(o));},function(r){if(!i.has(r.error_subcode)){c('AdsReviewIPCUtils').logSuccessfulAPICall(m,r.fbtrace_id);p(c('IntegrityAPIConversions').getApprovedFeedback(o));}else{c('AdsReviewIPCUtils').logFailedAPICall(m,r.fbtrace_id);p(c('IntegrityAPIConversions').fromAPIErrorData(r.error_data,o,n));}});});},_validateAdgroupEdit:function k(l){var m={execution_options:['validate_only','synchronous_ad_review'],creative:l.adgroupAPIReviewSpec.creative},n=c('AdsGraphAPI').get(f.id).object(c('AdsFilteringObjectType').AD,l.adgroupID).batched().post(babelHelpers['extends']({},m,{adlog_sampling:0}));return this._processValidationPromise(n,l.accountID,l.adgroupAPIReviewSpec,l.adHash);},_validateCampaignEdit:function k(l){return c('AdsGraphAPI').get(f.id).object(c('AdsFilteringObjectType').ADSET,l.campaignID).batched().post(babelHelpers['extends']({},l.campaignAPIReviewSpec,{adlog_sampling:0,execution_options:['validate_only','synchronous_ad_review']}));}};f.exports=j;}),null);
__d('AdsReviewAPIBatchingQueue',['Promise','AdsReviewAPIDataLoader','BatchingQueue'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){this.$AdsReviewAPIBatchingQueue1=new (c('BatchingQueue'))(this.$AdsReviewAPIBatchingQueue2,{timeout:i,concurrency:j,maxBatchSize:k});}h.prototype.addAdgroupCreateItem=function(i,j,k){var l={accountID:i,adgroupAPIReviewSpec:j,adHash:k};return new (c('Promise'))(function(m,n){return this.$AdsReviewAPIBatchingQueue1.add({value:{adgroupCreateItem:l},resolve:m,reject:n});}.bind(this));};h.prototype.addAdgroupEditItem=function(i,j,k,l){var m={accountID:i,adgroupID:j,adgroupAPIReviewSpec:k,adHash:l};return new (c('Promise'))(function(n,o){return this.$AdsReviewAPIBatchingQueue1.add({value:{adgroupEditItem:m},resolve:n,reject:o});}.bind(this));};h.prototype.addCampaignEditItem=function(i,j,k){var l={campaignID:i,campaignAPIReviewSpec:j,adHash:k};return new (c('Promise'))(function(m,n){return this.$AdsReviewAPIBatchingQueue1.add({value:{campaignEditItem:l},resolve:m,reject:n});}.bind(this));};h.prototype.$AdsReviewAPIBatchingQueue2=function(i,j){var k=[];i.forEach(function(l){return k.push(c('AdsReviewAPIDataLoader').validate(l.value).then(function(m){return l.resolve(m);},function(m){return l.reject(m);}));});c('Promise').all(k).done(j);};f.exports=new h(500,1,20);}),null);
__d('AdsReviewAPIBannerBody.react',['AdsHelpTraySpinner.react','AdsReviewAPIFeedbackRenderingUtils','AdsLoadState','Layout.react','Map','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('Layout.react').Column,k=c('Layout.react').FillColumn,l=c('React').PropTypes;h=babelHelpers.inherits(m,c('React').PureComponent);i=h&&h.prototype;m.prototype.render=function(){if(this.props.loadState===c('AdsLoadState').LOADING)return c('React').createElement(c('AdsHelpTraySpinner.react'),null);return c('React').createElement(c('Layout.react'),null,c('React').createElement(k,null,c('React').createElement('div',null,c('AdsReviewAPIFeedbackRenderingUtils').constructUnorderedCMSList(this.props.content))),c('React').createElement(j,null,this.props.children));};m.prototype.$AdsReviewAPIBannerBody1=function(){return this.props.loadState===c('AdsLoadState').ERROR;};function m(){h.apply(this,arguments);}m.propTypes={children:l.any,content:l.instanceOf(c('Map')).isRequired,loadState:l.oneOf(Object.keys(c('AdsLoadState')))};f.exports=m;}),null);
__d('AdsReviewAPIFeedbackHelper',['AdContentFeedbackTypes','AdsReviewAPIUtils','CROWCompsType','Map','Set','nullthrows','md5','IntegrityAPIConversionsConstants'],(function a(b,c,d,e,f,g){'use strict';var h=c('IntegrityAPIConversionsConstants').TEXT_OVERLAY_REASONS_ORDERED,i=c('IntegrityAPIConversionsConstants').TEXT_PENALTY_REASONS;function j(){this.$AdsReviewAPIFeedbackHelper7('');this.$AdsReviewAPIFeedbackHelper4=new (c('Map'))();}j.prototype.getReviewFeedback=function(){return this.$AdsReviewAPIFeedbackHelper2;};j.prototype.getCreativeID=function(){return this.$AdsReviewAPIFeedbackHelper6;};j.prototype.getIsAdRejected=function(){var k=this.$AdsReviewAPIFeedbackHelper2;return !!k&&!!k.feedback&&k.feedback===c('AdContentFeedbackTypes').REJECT;};j.prototype.getIsTextPenaltyViolation=function(){return i.has(this.getMaybeTextOverlayViolation());};j.prototype.getMaybeTextOverlayViolation=function(){var k=this.$AdsReviewAPIFeedbackHelper5,l=h.findIndex(function(m){return k.has(m);});return l===-1?null:h[l];};j.prototype.maybeSetFeedback=function(k){if(k.adHash===this.$AdsReviewAPIFeedbackHelper1){this.saveFeedback(k);return true;}return false;};j.prototype.maybeValidateCamapign=function(k,l,m){var n=this.getAdHash({},l);if(n!==this.$AdsReviewAPIFeedbackHelper1){this.$AdsReviewAPIFeedbackHelper7(n);m(k,l,n);return true;}else return false;};j.prototype.maybeValidateAd=function(k,l,m,n){var o=this.getAdHash(l,m);if(o!==this.$AdsReviewAPIFeedbackHelper1){this.$AdsReviewAPIFeedbackHelper7(o);n(k,l,m,o);return true;}else return false;};j.prototype.maybeValidateAdgroup=function(k,l,m,n){var o=this.getAdHash(m,{});if(o!==this.$AdsReviewAPIFeedbackHelper1){this.$AdsReviewAPIFeedbackHelper7(o);n(k,l,m,o);return true;}return false;};j.prototype.getAdHash=function(k,l){return c('md5')(JSON.stringify(Object.assign({},k,l)));};j.prototype.$AdsReviewAPIFeedbackHelper7=function(k){this.$AdsReviewAPIFeedbackHelper1=k;this.$AdsReviewAPIFeedbackHelper2=null;this.$AdsReviewAPIFeedbackHelper3=new (c('Map'))();this.$AdsReviewAPIFeedbackHelper5=new (c('Set'))();this.$AdsReviewAPIFeedbackHelper6=null;};j.prototype.saveFeedback=function(k){this.$AdsReviewAPIFeedbackHelper2=k;this.$AdsReviewAPIFeedbackHelper4=k.imageUniqueIdentifierToBoxesAndPolicy;this.$AdsReviewAPIFeedbackHelper6=k.creativeID;this.$AdsReviewAPIFeedbackHelper8(k.warningData);if(!this.getIsAdRejected())return;this.$AdsReviewAPIFeedbackHelper8(k.data);};j.prototype.$AdsReviewAPIFeedbackHelper8=function(k){Object.keys(k).forEach(function(l){var m=k[l],n=[];Object.keys(m).forEach(function(o){this.$AdsReviewAPIFeedbackHelper5.add(o);var p=m[o];if(p.feedback_info)n.push(p.feedback_info.description);}.bind(this));this.$AdsReviewAPIFeedbackHelper3.set(c('AdsReviewAPIUtils').getCROWType(l),n);}.bind(this));};j.prototype.getFeedbackForCROWType=function(k){return this.$AdsReviewAPIFeedbackHelper3.get(k)||[];};j.prototype.getTextOverlayBoxesForIdentifier=function(k){if(!k||!this.$AdsReviewAPIFeedbackHelper4.has(k))return [];var l=this.$AdsReviewAPIFeedbackHelper4.get(k);return l.boxes;};j.prototype.getTextPenaltyWarningsForIdentifier=function(k){var l=null;if(!k||!this.$AdsReviewAPIFeedbackHelper4.has(k))return l;var m=this.$AdsReviewAPIFeedbackHelper4.get(k);if(!m)return l;var n=m.policyWarning,o=this.getReviewFeedback();if(o){var p=o.warningData[c('CROWCompsType').PROACTIVE_AD_IMAGE];if(!!p&&Object.keys(p).includes(n))l=p[n].feedback_info.description;}return l;};j.prototype.getViolatingImageIdentifiers=function(k){return Array.from(this.$AdsReviewAPIFeedbackHelper4.keys()).filter(function(l){var m=this.$AdsReviewAPIFeedbackHelper4.get(l);return c('nullthrows')(m).policyWarning===k;}.bind(this));};j.prototype.getPolicies=function(){return this.$AdsReviewAPIFeedbackHelper5;};f.exports=j;}),null);
__d('AdsReviewAPITextOverlayNotice.react',['cx','ix','fbt','AdsLoadState','AdsReviewAPIBannerBody.react','AdsReviewIPCUtils','AdsTabbedHoverCard.react','BoostedComponentStatus','BUIAdoptionUtils','BUIAdoptionXUINoticeSmall.react','BUIAdoptionXUIText.react','CROWAdDisapprovalReasons','DOMContainer.react','IPCEventName','Image.react','Map','React','BUIAdoptionButton.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('AdsTabbedHoverCard.react').Content,n=c('React').PropTypes;k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.state={exceptionMarked:false,tooltipVisible:false},this.$AdsReviewAPITextOverlayNotice2=function(){this.setState({exceptionMarked:true});c('AdsReviewIPCUtils').logTPCRenderStatus(this.props.accountID,this.props.crowReason?this.props.crowReason:c('CROWAdDisapprovalReasons').UNKNOWN,c('IPCEventName').UI_TEXT_PENALTY_MARK_EXCEPTION_CLICK,true);}.bind(this),this.$AdsReviewAPITextOverlayNotice6=function(u){this.$AdsReviewAPITextOverlayNotice1=u;}.bind(this),this.$AdsReviewAPITextOverlayNotice7=function(){return this.$AdsReviewAPITextOverlayNotice1;}.bind(this),this.onToggle=function(u){this.setState({tooltipVisible:u});}.bind(this),q;}o.prototype.componentDidMount=function(){c('AdsReviewIPCUtils').logTPCRenderStatus(this.props.accountID,this.props.crowReason?this.props.crowReason:c('CROWAdDisapprovalReasons').UNKNOWN,c('IPCEventName').UI_TEXT_PENALTY_WARNING_BANNER_RENDER,true);};o.prototype.render=function(){var p=this.$AdsReviewAPITextOverlayNotice3();if(this.props.adStatus==c('BoostedComponentStatus').PENDING)return null;return c('React').createElement(c('BUIAdoptionXUINoticeSmall.react'),{type:c('BUIAdoptionUtils').convertUseToType(p.bannerUse)},p.bannerTitle,p.bannerContent,this.$AdsReviewAPITextOverlayNotice4());};o.prototype.$AdsReviewAPITextOverlayNotice5=function(){var p=this.state.tooltipVisible,q=this.props.toolTip;if(!q||!q.content)return null;return c('React').createElement('div',null,c('React').createElement(c('Image.react'),{className:"_nq7"+(p?' '+"_nq9":''),ref:this.$AdsReviewAPITextOverlayNotice6,src:i("28631")}),c('React').createElement(c('AdsTabbedHoverCard.react'),{alignment:'left',contextRef:this.$AdsReviewAPITextOverlayNotice7,hoverContextRef:this.$AdsReviewAPITextOverlayNotice7,position:'below',shown:p,onToggle:this.onToggle},c('React').createElement(m,{title:'content'},c('React').createElement(c('DOMContainer.react'),null,q.content))));};o.prototype.$AdsReviewAPITextOverlayNotice4=function(){if(this.state.exceptionMarked)return null;return c('React').createElement('div',{className:"_2pic"},c('React').createElement(c('BUIAdoptionButton.react'),{label:j._("Request Manual Review"),onClick:this.$AdsReviewAPITextOverlayNotice2}));};o.prototype.$AdsReviewAPITextOverlayNotice3=function(){var p=this.state.exceptionMarked?'notify':'recommend',q=this.state.exceptionMarked?this.$AdsReviewAPITextOverlayNotice8():this.$AdsReviewAPITextOverlayNotice9(),r=this.state.exceptionMarked?null:c('React').createElement(c('BUIAdoptionXUIText.react'),{className:"_3-8m",size:'medium',weight:'bold'},this.$AdsReviewAPITextOverlayNotice10());return {bannerContent:q,bannerTitle:r,bannerUse:p};};o.prototype.$AdsReviewAPITextOverlayNotice9=function(){return c('React').createElement(c('AdsReviewAPIBannerBody.react'),this.props,this.$AdsReviewAPITextOverlayNotice5());};o.prototype.$AdsReviewAPITextOverlayNotice8=function(){return c('React').createElement('div',{className:"_3-8m"},this.$AdsReviewAPITextOverlayNotice11());};o.prototype.$AdsReviewAPITextOverlayNotice11=function(){return j._("You've requested a review of your boosted post's image text. We'll update you within 24 hours if we think your image has too much text. If your image text is fine, you won't be notified and your boosted post will keep running.");};o.prototype.$AdsReviewAPITextOverlayNotice10=function(){if(this.props.title)return this.props.title;switch(this.props.objectName){case 'ad':return this.$AdsReviewAPITextOverlayNotice12();case 'post':return this.$AdsReviewAPITextOverlayNotice13();default:return this.$AdsReviewAPITextOverlayNotice14();}};o.prototype.$AdsReviewAPITextOverlayNotice12=function(){switch(this.props.crowReason){case c('CROWAdDisapprovalReasons').TEXT_PENALTY_HIGH:return j._("Your Ad May Not Run");case c('CROWAdDisapprovalReasons').TEXT_PENALTY_MEDIUM:return j._("Your Ad's Reach May Be Lower");default:return j._("Your Ad's Reach May Be Slightly Lower");}};o.prototype.$AdsReviewAPITextOverlayNotice13=function(){switch(this.props.crowReason){case c('CROWAdDisapprovalReasons').TEXT_PENALTY_HIGH:return j._("Your Boosted Post May Not Run");case c('CROWAdDisapprovalReasons').TEXT_PENALTY_MEDIUM:return j._("Your Boosted Post's Reach May Be Lower");default:return j._("Your Boosted Post's Reach May Be Slightly Lower");}};o.prototype.$AdsReviewAPITextOverlayNotice14=function(){switch(this.props.crowReason){case c('CROWAdDisapprovalReasons').TEXT_PENALTY_HIGH:return j._("Your Promotion May Not Run");case c('CROWAdDisapprovalReasons').TEXT_PENALTY_MEDIUM:return j._("Your Promotion's Reach May Be Lower");default:return j._("Your Promotion's Reach May Be Slightly Lower");}};o.propTypes={accountID:n.string.isRequired,adStatus:n.string,crowReason:n.oneOf([c('CROWAdDisapprovalReasons').TEXT_PENALTY_HIGH,c('CROWAdDisapprovalReasons').TEXT_PENALTY_MEDIUM,c('CROWAdDisapprovalReasons').TEXT_PENALTY_LOW]).isRequired,loadState:n.oneOf(Object.keys(c('AdsLoadState'))),objectName:n.oneOf(['ad','post','promotion']).isRequired,title:n.string};f.exports=o;}),null);
__d('AdsConversionPixelActions',['AdsActionTypes','AdsDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={conversionPixelBatchLoaded:function i(j){c('AdsDispatcher').handleUpdateFromServerResponse({conversionPixels:j,type:c('AdsActionTypes').CONVERSION_PIXEL.BATCH_LOADED});},conversionPixelBatchLoadError:function i(j){c('AdsDispatcher').handleUpdateFromServerResponse({errors:j,type:c('AdsActionTypes').CONVERSION_PIXEL.BATCH_LOAD_ERROR});},conversionPixelBatchCreated:function i(j,k){c('AdsDispatcher').handleUpdateFromServerResponse({accountID:j,pixelIDs:k,type:c('AdsActionTypes').CONVERSION_PIXEL.BATCH_CREATED});}};f.exports=h;}),null);
__d('AdsVideoActions',['invariant','AdsActionTypes','AdsDispatcher'],(function a(b,c,d,e,f,g,h){'use strict';var i={openSelector:function j(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsActionTypes').VIDEO.OPEN_SELECTOR});},videoBatchLoaded:function j(k){c('AdsDispatcher').handleUpdateFromServerResponse({videos:k,type:c('AdsActionTypes').VIDEO.BATCH_LOADED});},videoBatchLoadError:function j(k){c('AdsDispatcher').handleUpdateFromServerResponse({errors:k,type:c('AdsActionTypes').VIDEO.BATCH_LOAD_ERROR});},videoClicked:function j(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsActionTypes').VIDEO.ITEM_CLICKED});},startUpload:function j(k,l){l||h(0);c('AdsDispatcher').handleUpdateFromViewAction({fileInput:k,accountID:l,type:c('AdsActionTypes').VIDEO.UPLOAD_START});},startImport:function j(k,l,m){c('AdsDispatcher').handleUpdateFromViewAction({title:k,url:l,accountID:m,type:c('AdsActionTypes').VIDEO.UPLOAD_START});},cancelUpload:function j(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsActionTypes').VIDEO.UPLOAD_CANCEL});},uploadProgress:function j(k){c('AdsDispatcher').handleUpdateFromServerResponse({progress:k,type:c('AdsActionTypes').VIDEO.UPLOAD_PROGRESS});},uploadSuccess:function j(k,l){c('AdsDispatcher').handleUpdateFromServerResponse({type:c('AdsActionTypes').VIDEO.UPLOAD_SUCCESS,videoID:k,isVideoGif:l});},uploadError:function j(k,l){var m=void 0;if(k)m=k.error||k.error_description||k.message&&JSON.parse(k.message);c('AdsDispatcher').handleUpdateFromServerResponse({errorMessage:m,isVideoGif:l,type:c('AdsActionTypes').VIDEO.UPLOAD_ERROR});},encodingSuccess:function j(k,l,m){c('AdsDispatcher').handleUpdateFromServerResponse({type:c('AdsActionTypes').VIDEO.ENCODING_SUCCESS,video:k,accountID:l,isVideoGif:m});},videoTabSwitch:function j(k){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsActionTypes').VIDEO.SWITCH_TAB,tabKey:k});}};f.exports=i;}),null);
__d('AdsVideoAlternativesActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({SET_VIDEO_ALTERNATIVES:null});f.exports=h;}),null);
__d('AdsConversionPixelDataManager',['fbt','AdsAPIOffsitePixelFields','AdsConversionPixelActions','AdsBaseDataManager','AdsGraphAPI','Map'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=[c('AdsAPIOffsitePixelFields').ID,c('AdsAPIOffsitePixelFields').JS_PIXEL,c('AdsAPIOffsitePixelFields').LAST_FIRING_TIME,c('AdsAPIOffsitePixelFields').NAME,c('AdsAPIOffsitePixelFields').TAG];i=babelHelpers.inherits(l,c('AdsBaseDataManager'));j=i&&i.prototype;l.prototype.loadAll=function(n){n.forEach(function(o){return this.load(o);}.bind(this));};l.prototype.load=function(n){c('AdsGraphAPI').get(f.id).object('offsitePixel',n).batched().get({fields:k}).done(this.__handleSuccess.bind(this,['load'],n,null),this.__handleError.bind(this,['load'],n,null));};l.prototype.__onBatchLoaded=function(n){c('AdsConversionPixelActions').conversionPixelBatchLoaded(n);};l.prototype.__onBatchLoadError=function(n){var o=new (c('Map'))();n.forEach(function(p,q){o.set(q,this.__getObjectError(q,p));}.bind(this));c('AdsConversionPixelActions').conversionPixelBatchLoadError(o);};l.prototype.__getObjectTypeLabel=function(){return h._("Ads Pixel");};function l(){i.apply(this,arguments);}var m=new l();f.exports=m;}),null);
__d('AdsVideoDataManager',['AdsBaseDataManager','AdsVideoActions','AdsVideoFetcher','AdsGraphAPI','VideoGraphFields','Map'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=[c('VideoGraphFields').CAPTIONS,c('VideoGraphFields').CREATOR_PRODUCT,c('VideoGraphFields').DESCRIPTION,c('VideoGraphFields').FORMAT,c('VideoGraphFields').HAS_SOUND,c('VideoGraphFields').ID,c('VideoGraphFields').LENGTH,c('VideoGraphFields').SPHERICAL,c('VideoGraphFields').THUMBNAILS,c('VideoGraphFields').TITLE,c('VideoGraphFields').UPDATED_TIME,c('VideoGraphFields').HAS_HD_QUALITY];h=babelHelpers.inherits(k,c('AdsBaseDataManager'));i=h&&h.prototype;k.prototype.loadAll=function(l){l.forEach(function(m){return this.load(m);}.bind(this));};k.prototype.load=function(l){c('AdsGraphAPI').get(f.id).object('video',l).batched().get({fields:j}).done(this.__handleSuccess.bind(this,['load'],l,null),this.__handleError.bind(this,['load'],l,null));};k.prototype.__onBatchLoaded=function(l){var m=new (c('Map'))();l.forEach(function(n,o){m.set(o,c('AdsVideoFetcher').processFetchedVideo(n));});c('AdsVideoActions').videoBatchLoaded(m);};k.prototype.__onBatchLoadError=function(l){c('AdsVideoActions').videoBatchLoadError(l);};function k(){h.apply(this,arguments);}f.exports=new k();}),null);
__d('AdsImageInfoStore',['invariant','AdsAPIAdgroupPaths','AdsDispatcher','AdsImageDimensionStore','AdsImageIDClasses','AdsImageIDUtils','AdsImageLegacy','AdsImageStore','AdsLoadState','AdsShutterstockImageByIDStore','AdsShutterstockSearchStore','AdsSimpleImage','ApiAdCreativeFields','ApiAdCreativePlatformCustomizationFields','FluxDerivedStore','immutable','LoadObject','forEachObject','getByPath','keyMirror'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('keyMirror')({FULL_SIZE:null,FULL_SIZE_URL:null,NAME:null,PREVIEW:null,THUMBNAIL:null,HIGH_RES_THUMBNAIL:null}),l=new (c('immutable').Record)({displayHeight:null,displayWidth:null,height:null,name:null,realHeight:null,realWidth:null,url:null,width:null}),m=c('AdsImageIDClasses').AdsAccountImageID,n=c('AdsImageIDClasses').AdsExternalImageID,o=c('AdsImageIDClasses').AdsImageID,p=c('AdsImageIDClasses').AdsShutterstockImageID;i=babelHelpers.inherits(q,c('FluxDerivedStore'));j=i&&i.prototype;q.prototype.getName=function(r){var s=this.get({imageID:r,queryType:k.NAME});if(!s.hasValue())return s;return c('LoadObject').empty().setValue(s.getValueEnforcing().name);};q.prototype.getFullSizeURL=function(r){var s=this.get({imageID:r,queryType:k.FULL_SIZE_URL});if(!s.hasValue())return s;return c('LoadObject').empty().setValue(s.getValueEnforcing().url);};q.prototype.getFullSize=function(r){var s=this.get({imageID:r,queryType:k.FULL_SIZE});if(!s.hasValue())return s;var t=s.getValueEnforcing().toJS(),u=t.url,v=t.height,w=t.width;u&&v&&w||h(0);return c('LoadObject').empty().setValue(new (c('AdsSimpleImage'))({height:v,url:u,width:w}));};q.prototype.getPreview=function(r){var s=this.get({imageID:r,queryType:k.PREVIEW});if(!s.hasValue())return s;var t=s.getValueEnforcing().toJS(),u=t.url,v=t.height,w=t.width;u&&v&&w||h(0);return c('LoadObject').empty().setValue(new (c('AdsSimpleImage'))({height:v,url:u,width:w}));};q.prototype.getThumbnail=function(r){var s=this.get({imageID:r,queryType:k.THUMBNAIL});if(!s.hasValue())return s;var t=s.getValueEnforcing().toJS(),u=t.displayHeight,v=t.displayWidth,w=t.realHeight,x=t.realWidth,y=t.url;y&&x&&w&&v&&u||h(0);return c('LoadObject').empty().setValue({displayImage:new (c('AdsSimpleImage'))({height:u,url:y,width:v}),realImage:new (c('AdsSimpleImage'))({height:w,url:y,width:x})});};q.prototype.getHighResThumbnail=function(r){var s=this.get({imageID:r,queryType:k.HIGH_RES_THUMBNAIL});if(!s.hasValue())return s;var t=s.getValueEnforcing().toJS(),u=t.displayHeight,v=t.displayWidth,w=t.realHeight,x=t.realWidth,y=t.url;y&&x&&w&&v&&u||h(0);return c('LoadObject').empty().setValue({displayImage:new (c('AdsSimpleImage'))({height:u,url:y,width:v}),realImage:new (c('AdsSimpleImage'))({height:w,url:y,width:x})});};q.prototype.getFullSizeLegacyImage_DEPRECATED=function(r,s,t){if(r instanceof m)return this.$AdsImageInfoStore1(r,s,t);if(r instanceof p)return this.$AdsImageInfoStore2(r,s,t);r instanceof n||h(0);return this.$AdsImageInfoStore3(r,s,t);};q.prototype.getFullSizeLegacyImageForSingleImageAd_DEPRECATED=function(r,s){var t=r.toJS(),u=c('AdsImageIDUtils').getSingleImageID(r,s);if(!u)return c('LoadObject').empty();var v=c('getByPath')(t,c('AdsAPIAdgroupPaths').CREATIVE.OBJECT_STORY_SPEC.LINK_DATA.IMAGE_CROPS)||c('getByPath')(t,c('AdsAPIAdgroupPaths').CREATIVE.IMAGE_CROPS),w={};c('forEachObject')(c('ApiAdCreativePlatformCustomizationFields'),function(x){var y=c('AdsImageIDUtils').getPlatformImageID(r,s,x);if(!y)return;var z=c('getByPath')(r,[].concat(c('AdsAPIAdgroupPaths').CREATIVE.PLATFORM_CUSTOMIZATIONS.path,x,c('ApiAdCreativeFields').IMAGE_CROPS)),aa=this.getFullSizeLegacyImage_DEPRECATED(y,z);if(aa.hasValue())w[x]=aa.getValueEnforcing().toJSON();}.bind(this));return this.getFullSizeLegacyImage_DEPRECATED(u,v,w);};q.prototype.__getStores=function(){return [c('AdsImageDimensionStore'),c('AdsImageStore'),c('AdsShutterstockImageByIDStore'),c('AdsShutterstockSearchStore')];};q.prototype.__getData=function(r){var s=r.imageID,t=r.queryType;if(s instanceof m){var u=s.getAccountID(),v=s.getHash();return this.$AdsImageInfoStore4(u,v,t);}if(s instanceof p){var w=s.getShutterstockImageID();return this.$AdsImageInfoStore5(w,t);}if(s instanceof n){var x=s.getUrl();return this.$AdsImageInfoStore6(x,t);}h(0);};q.prototype.__computeResult=function(r,s){return s;};q.prototype.$AdsImageInfoStore1=function(r,s,t){var u=this.getFullSize(r),v=this.getThumbnail(r);if(!u.hasValue())return u;if(!v.hasValue())return v;var w=u.getValueEnforcing(),x=v.getValueEnforcing();return c('LoadObject').empty().setValue(new (c('AdsImageLegacy'))({crops:s,hash:r.getHash(),height:w.height,platformImageObjects:t,url:w.url,url_128:x.displayImage.url,width:w.width}));};q.prototype.$AdsImageInfoStore2=function(r,s,t){var u=this.getFullSize(r),v=this.getThumbnail(r),w=this.getPreview(r);if(!u.hasValue())return u;if(!v.hasValue())return v;if(!w.hasValue())return w;var x=u.getValueEnforcing(),y=w.getValueEnforcing(),z=v.getValueEnforcing();return c('LoadObject').empty().setValue(new (c('AdsImageLegacy'))({crops:s,fullSizeHeight:x.height,fullSizeUrl:x.url,fullSizeWidth:x.width,height:z.realImage.height,platformImageObjects:t,previewHeight:y.height,previewUrl:y.url,previewWidth:y.width,stockImageID:r.getShutterstockImageID(),thumbHeight:z.displayImage.height,thumbWidth:z.displayImage.width,url:z.realImage.url,width:z.realImage.width}));};q.prototype.$AdsImageInfoStore3=function(r,s,t){var u=this.getFullSize(r);if(!u.hasValue())return u;var v=u.getValueEnforcing();return c('LoadObject').empty().setValue(new (c('AdsImageLegacy'))({crops:s,height:v.height,platformImageObjects:t,url:v.url,width:v.width}));};q.prototype.$AdsImageInfoStore4=function(r,s,t){if(t===k.PREVIEW)return c('LoadObject').empty();var u=c('AdsImageStore').getOneFor(r,s),v=typeof u==='string'?u:u.loadState,w=typeof u!=='string'?u:null;if(v===c('AdsLoadState').LOADING)return c('LoadObject').loading();if(v!==c('AdsLoadState').LOADED)return c('LoadObject').empty().setError(new Error('Cannot load image data for accountID: '+r+', hash: '+s));w||h(0);switch(t){case k.FULL_SIZE:var x=w.url,y=w.width,z=w.height;return c('LoadObject').empty().setValue(new l({url:x,width:y,height:z}));case k.FULL_SIZE_URL:return c('LoadObject').empty().setValue(new l({url:w.url}));case k.NAME:var aa=w.name;if(!aa)return c('LoadObject').empty();return c('LoadObject').empty().setValue(new l({name:aa}));case k.THUMBNAIL:var ba=w.url_128;if(!ba)return c('LoadObject').empty();return this.$AdsImageInfoStore7(ba,null,null);case k.HIGH_RES_THUMBNAIL:var ca=w.url_256,da=w.url_256_width,ea=w.url_256_height;if(!ca)return c('LoadObject').empty();return this.$AdsImageInfoStore7(ca,da,ea);}h(0);};q.prototype.$AdsImageInfoStore5=function(r,s){if(s===k.NAME)return c('LoadObject').empty();if(s===k.PREVIEW)return this.$AdsImageInfoStore8(r);if(s===k.THUMBNAIL)return this.$AdsImageInfoStore9(r);var t=c('AdsShutterstockImageByIDStore').get(r);if(!t.hasValue())return t;var u=t.getValueEnforcing().toJS();switch(s){case k.FULL_SIZE:return this.$AdsImageInfoStore10(u.preview_url);case k.FULL_SIZE_URL:return c('LoadObject').empty().setValue(new l({url:u.preview_url}));}h(0);};q.prototype.$AdsImageInfoStore8=function(r){var s=c('AdsShutterstockSearchStore').getShutterstockImageByID(r);if(s)return c('LoadObject').empty().setValue(new l({height:s.getPreviewHeight(),url:s.getPreviewUrl(),width:s.getPreviewWidth()}));var t=c('AdsShutterstockImageByIDStore').get(r);if(!t.hasValue())return t;var u=t.getValueEnforcing().toJS();return c('LoadObject').empty().setValue(new l({height:u.preview.height,url:u.preview.url,width:u.preview.width}));};q.prototype.$AdsImageInfoStore9=function(r){var s=c('AdsShutterstockSearchStore').getShutterstockImageByID(r);if(s&&s.getThumbnailUrl())return this.$AdsImageInfoStore7(s.getThumbnailUrl(),s.getThumbnailWidth(),s.getThumbnailHeight());var t=c('AdsShutterstockImageByIDStore').get(r);if(!t.hasValue())return t;var u=t.getValueEnforcing().toJS();return this.$AdsImageInfoStore7(u.thumbnail.url,u.thumbnail.width,u.thumbnail.height);};q.prototype.$AdsImageInfoStore6=function(r,s){switch(s){case k.FULL_SIZE:return this.$AdsImageInfoStore10(r);case k.FULL_SIZE_URL:return c('LoadObject').empty().setValue(new l({url:r}));case k.NAME:case k.PREVIEW:case k.THUMBNAIL:return c('LoadObject').empty();}h(0);};q.prototype.$AdsImageInfoStore10=function(r){var s=c('AdsImageDimensionStore').get(r);if(!s.hasValue())return s;var t=s.getValueEnforcing(),u=t.width,v=t.height;return c('LoadObject').empty().setValue(new l({height:v,url:r,width:u}));};q.prototype.$AdsImageInfoStore7=function(r,s,t){var u=c('AdsImageDimensionStore').get(r);if(!u.hasValue())return u;var v=u.getValueEnforcing(),w=v.width,x=v.height;return c('LoadObject').empty().setValue(new l({displayHeight:t||x,displayWidth:s||w,realHeight:x,realWidth:w,url:r}));};function q(){i.apply(this,arguments);}f.exports=new q(c('AdsDispatcher'));}),null);
__d('AdsVideoStore',['fbt','invariant','AdsActionTypes','AdsBaseDataStore','AdsLoadState','AdsVideoActionTypes','AdsVideoCaptionActions','AdsVideoDataManager','AdsVideoUploadStatus','Bootloader','Map','VideoAudienceRetentionUtil','VideoUploadFile','WebApiApplication'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('AdsBaseDataStore'));k=j&&j.prototype;function l(){k.constructor.call(this);this.$AdsVideoStore5();this.$AdsVideoStore3=null;this.$AdsVideoStore1=false;this.$AdsVideoStore2=null;}l.prototype.getDataManager=function(){return c('AdsVideoDataManager');};l.prototype.getUploadInfo=function(){return this.$AdsVideoStore4;};l.prototype.isEditingVideoCaption=function(){return this.$AdsVideoStore1;};l.prototype.getLastCaptionUploadErrorMessage=function(){if(!this.$AdsVideoStore2)return '';if(this.$AdsVideoStore2.error_user_msg){return this.$AdsVideoStore2.error_user_msg;}else switch(this.$AdsVideoStore2.error_code){case 200:return h._("You may not have permission to edit this video, please upload a new one and try again.");default:return h._("Caption Upload Failed.");}};l.prototype.getMockVideoData=function(m){var n=c('VideoAudienceRetentionUtil').getTimeSeries(m);return n.map(function(o,p){return 1200/Math.min(60,Math.pow(2,o));});};l.prototype.__onDispatch=function(m){var n=m.action;switch(n.actionType){case c('AdsVideoActionTypes').ADS_VIDEO_CAPTION_PUBLISHED:this.$AdsVideoStore1=true;c('AdsVideoCaptionActions').refreshCaption(n.videoID);this.__emitChange();break;case c('AdsActionTypes').ADGROUP.REMOVE_VIDEO_CAPTION:this.$AdsVideoStore2=null;this.$AdsVideoStore1=true;c('AdsVideoCaptionActions').removeCaption(n.videoID,n.locale,n.platform);this.__emitChange();break;case c('AdsActionTypes').ADGROUP.SET_VIDEO_DEFAULT_CAPTION:this.$AdsVideoStore1=true;c('AdsVideoCaptionActions').changeDefaultLocale(n.videoID,n.locale);this.__emitChange();break;case c('AdsActionTypes').ADGROUP.UPLOAD_VIDEO_CAPTION:this.$AdsVideoStore1=true;this.$AdsVideoStore2=null;c('AdsVideoCaptionActions').uploadCaption(n.videoID,n.fileInput,c('WebApiApplication').getAccessToken());this.__emitChange();break;case c('AdsActionTypes').ADGROUP.UPLOAD_VIDEO_CAPTIONS:this.$AdsVideoStore1=true;this.$AdsVideoStore2=null;c('AdsVideoCaptionActions').uploadCaptions(n.videoID,n.captionFiles,n.localesToRemove,n.defaultLocale,c('WebApiApplication').getAccessToken());this.__emitChange();break;case c('AdsVideoActionTypes').ADS_VIDEO_CAPTION_EDIT_SUCCESS:this.$AdsVideoStore1=false;this.$AdsVideoStore2=null;this.$AdsVideoStore6(n.data.video);this.__emitChange();break;case c('AdsVideoActionTypes').ADS_VIDEO_CAPTION_REMOVE_ERROR:case c('AdsVideoActionTypes').ADS_VIDEO_CAPTION_CHANGE_DEFAULT_LOCALE_ERROR:this.$AdsVideoStore1=false;this.__emitChange();break;case c('AdsVideoActionTypes').ADS_VIDEO_CAPTION_UPLOAD_ERROR:this.$AdsVideoStore2=n.error;this.$AdsVideoStore1=false;this.__emitChange();break;case c('AdsActionTypes').VIDEO.ENCODING_SUCCESS:if(this.$AdsVideoStore4)this.$AdsVideoStore7(n.video);break;case c('AdsActionTypes').VIDEO.ITEM_CLICKED:this.$AdsVideoStore4.initialSelectedVideoID=null;this.$AdsVideoStore2=null;this.__emitChange();break;case c('AdsActionTypes').VIDEO.BATCH_LOADED:this.__handleData(n.videos,c('AdsLoadState').LOADED);break;case c('AdsActionTypes').VIDEO.BATCH_LOAD_ERROR:this.__handleData(n.errors,c('AdsLoadState').ERROR);break;case c('AdsActionTypes').VIDEO.UPLOAD_CANCEL:this.$AdsVideoStore8();this.$AdsVideoStore5();this.__emitChange();break;case c('AdsActionTypes').VIDEO.UPLOAD_ERROR:if(this.$AdsVideoStore4){this.$AdsVideoStore4.status=c('AdsVideoUploadStatus').ERROR;this.$AdsVideoStore4.uploadTime=this.$AdsVideoStore3?this.$AdsVideoStore3.getUploadTime():null;this.$AdsVideoStore4.errorMessage=n.errorMessage;this.__emitChange();}break;case c('AdsActionTypes').VIDEO.UPLOAD_PROGRESS:if(this.$AdsVideoStore4){this.$AdsVideoStore4.progress=n.progress;this.__emitChange();}break;case c('AdsActionTypes').VIDEO.UPLOAD_START:n.fileInput!=null||n.title!=null&&n.url!=null||i(0);if(n.fileInput!=null){this.$AdsVideoStore9(n.fileInput,n.accountID);}else this.$AdsVideoStore10(n.url,n.title,n.accountID);this.__emitChange();break;case c('AdsActionTypes').VIDEO.UPLOAD_SUCCESS:if(this.$AdsVideoStore3&&this.$AdsVideoStore4){this.$AdsVideoStore4.status=c('AdsVideoUploadStatus').ENCODING;this.$AdsVideoStore4.progress=1;this.$AdsVideoStore4.uploadTime=this.$AdsVideoStore3.getUploadTime();this.__emitChange();}break;}};l.prototype.$AdsVideoStore10=function(m,n,o){this.$AdsVideoStore4.status==c('AdsVideoUploadStatus').NONE||this.$AdsVideoStore4.status==c('AdsVideoUploadStatus').ERROR||i(0);c('Bootloader').loadModules(["AdsVideoUploaderWrapper"],function(p){this.$AdsVideoStore3=new p();var q=this.$AdsVideoStore3;q.remoteUpload(m,n,o);this.$AdsVideoStore4={title:q.getVideoTitle(),status:c('AdsVideoUploadStatus').UPLOADING,progress:0,uploadTime:null,encodingTime:null,errorMessage:null,initialSelectedVideoID:null};}.bind(this),'AdsVideoStore');};l.prototype.$AdsVideoStore9=function(m,n){this.$AdsVideoStore4.status==c('AdsVideoUploadStatus').NONE||this.$AdsVideoStore4.status==c('AdsVideoUploadStatus').ERROR||i(0);if(!m.value)return;c('Bootloader').loadModules(["AdsVideoUploaderWrapper"],function(o){this.$AdsVideoStore3=new o();var p=this.$AdsVideoStore3;if(p){this.$AdsVideoStore4={title:null,status:c('AdsVideoUploadStatus').UPLOADING,progress:0,uploadTime:null,encodingTime:null,errorMessage:null,initialSelectedVideoID:null};p.upload(c('VideoUploadFile').fromFileInput(m),n);this.$AdsVideoStore4.title=p.getVideoTitle();}}.bind(this),'AdsVideoStore');};l.prototype.$AdsVideoStore7=function(m){this.$AdsVideoStore4.status=c('AdsVideoUploadStatus').NONE;this.$AdsVideoStore4.encodingTime=this.$AdsVideoStore3?this.$AdsVideoStore3.getEncodingTime():null;this.$AdsVideoStore4.initialSelectedVideoID=m.id;this.__handleData(new (c('Map'))([[m.id,m]]),c('AdsLoadState').LOADED);};l.prototype.$AdsVideoStore6=function(m){this.__handleData(new (c('Map'))([[m.id,m]]),c('AdsLoadState').LOADED);};l.prototype.$AdsVideoStore5=function(){this.$AdsVideoStore4={title:null,status:c('AdsVideoUploadStatus').NONE,progress:0,uploadTime:null,encodingTime:null,errorMessage:null,initialSelectedVideoID:null};};l.prototype.$AdsVideoStore8=function(){if(this.$AdsVideoStore3){this.$AdsVideoStore3.abort();this.$AdsVideoStore3=null;}};f.exports=new l();}),null);
__d('AdsConversionPixelStore',['invariant','AdsAccountStoreWrapper_DEPRECATED','AdsAccountUtils','AdsActionTypes','AdsBaseDataStore','AdsCFActionTypes','AdsConversionPixelDataDispatcher','AdsConversionPixelDataManager','AdsLoadState','AdsPEActionTypes','AdsPixelConversionTypes','AdsPixelStats','AdsPixelViewActionTypes','AdsSelectedAccountGetter','ConversionPixelStatsTypes','immutable','ImmutableObject','getByPath'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').Seq(c('ConversionPixelStatsTypes')).mapEntries(function(n){var o=n[0],p=n[1];return [p,{}];}).toObject();i=babelHelpers.inherits(l,c('AdsBaseDataStore'));j=i&&i.prototype;function l(){j.constructor.call(this);this.$AdsConversionPixelStoreClass7();}l.prototype.$AdsConversionPixelStoreClass7=function(){this.$AdsConversionPixelStoreClass1={};this.$AdsConversionPixelStoreClass2=k;this.$AdsConversionPixelStoreClass3=c('AdsLoadState').NOT_LOADED;this.$AdsConversionPixelStoreClass5=c('AdsLoadState').NOT_LOADED;this.$AdsConversionPixelStoreClass6=c('AdsLoadState').NOT_LOADED;};l.prototype.getDataManager=function(){return c('AdsConversionPixelDataManager');};l.prototype.__onDispatch=function(n){var o=n.action,p=o.type||o.actionType;switch(p){case c('AdsActionTypes').CONVERSION_PIXEL.BATCH_LOADED:this.__handleData(o.conversionPixels,c('AdsLoadState').LOADED);break;case c('AdsActionTypes').CONVERSION_PIXEL.BATCH_LOAD_ERROR:this.$AdsConversionPixelStoreClass3=c('AdsLoadState').ERROR;this.__handleData(o.errors,c('AdsLoadState').ERROR);break;case c('AdsActionTypes').CONVERSION_PIXEL.UPDATE_PIXELS:o.pixels.forEach(function(q){q.type=c('AdsPixelConversionTypes').LEGACY;q.value=q.tag;q.pixelID=q.id;this.$AdsConversionPixelStoreClass1[q.id]=new (c('ImmutableObject'))(q);}.bind(this));this.$AdsConversionPixelStoreClass6=c('AdsLoadState').LOADED;this.$AdsConversionPixelStoreClass3=c('AdsLoadState').LOADED;this.__emitChange();break;case c('AdsActionTypes').CONVERSION_PIXEL.UPDATE_PIXEL_STATS:this.$AdsConversionPixelStoreClass8(o.statsType,o.pixelID,o.stats);this.__emitChange();break;case c('AdsCFActionTypes').DEFAULT_CONVERSION_PIXEL_LOADED:if(o.data.defaultPixelID){this.$AdsConversionPixelStoreClass4=String(o.data.defaultPixelID);}else this.$AdsConversionPixelStoreClass4=null;this.$AdsConversionPixelStoreClass5=c('AdsLoadState').LOADED;this.__emitChange();break;case c('AdsPixelViewActionTypes').REFRESH_CONVERSION_CODE_STATUS:this.$AdsConversionPixelStoreClass6=c('AdsLoadState').LOADING;this.$AdsConversionPixelStoreClass9(o.data.pixelID);this.__emitChange();break;case c('AdsPixelViewActionTypes').RESET_PIXEL_LIST:case c('AdsPEActionTypes').ACCOUNT.SELECT:this.$AdsConversionPixelStoreClass7();this.__emitChange();break;}};l.prototype.$AdsConversionPixelStoreClass9=function(n){c('AdsConversionPixelDataDispatcher').loadPixel(n);};l.prototype.$AdsConversionPixelStoreClass8=function(n,o,p){if(!(n in this.$AdsConversionPixelStoreClass2))return;this.$AdsConversionPixelStoreClass2[n][o]=new (c('AdsPixelStats'))(p,n);};l.prototype.getKeyedPixels=function(){var n=c('AdsAccountStoreWrapper_DEPRECATED').getAccountID();if(this.$AdsConversionPixelStoreClass3===c('AdsLoadState').NOT_LOADED){this.$AdsConversionPixelStoreClass3=c('AdsLoadState').LOADING;c('AdsConversionPixelDataDispatcher').loadPixels(n);}return this.$AdsConversionPixelStoreClass1;};l.prototype.canDeprecateConversionPixels=function(){var n=c('AdsSelectedAccountGetter').get({});return c('AdsAccountUtils').canDisableConversionTrackingPixels(n);};l.prototype.getPixelswithDeprecation=function(n){if(!this.canDeprecateConversionPixels())return n;var o={};Object.keys(n).forEach(function(p){var q=n[p];if(q.type!==c('AdsPixelConversionTypes').LEGACY)o[p]=q;});return new (c('ImmutableObject'))(o);};l.prototype.getDefaultPixelID=function(){return this.$AdsConversionPixelStoreClass4;};l.prototype.getPixels=function(){var n=this.getKeyedPixels();return Object.keys(n).map(function(o){return n[o];});};l.prototype.getPixelIDs=function(){return this.getPixels().map(function(n){return n.id;});};l.prototype.getPixel=function(n){if(!n)return null;var o=this.getKeyedPixels();return o[n];};l.prototype.getLoadState=function(){return this.$AdsConversionPixelStoreClass3;};l.prototype.getRefreshState=function(){return this.$AdsConversionPixelStoreClass6;};l.prototype.isListLoaded=function(){return this.$AdsConversionPixelStoreClass3===c('AdsLoadState').LOADED;};l.prototype.hasPixels=function(){return Object.keys(this.getKeyedPixels()).length>0;};l.prototype.getPixelLastFiringTime=function(n){return c('getByPath')(this.getKeyedPixels(),[n,'last_firing_time']);};l.prototype.getPixelCode=function(n){return c('getByPath')(this.getKeyedPixels(),[n,'js_pixel']);};l.prototype.getSevenDaysFiringCount=function(n){return c('getByPath')(this.getKeyedPixels(),[n,'seven_days_firing_count']);};l.prototype.getPixelStats=function(n,o){this.$AdsConversionPixelStoreClass10(n);if(!(o in this.$AdsConversionPixelStoreClass2[n])){this.$AdsConversionPixelStoreClass2[n][o]=undefined;c('AdsConversionPixelDataDispatcher').loadStats(n,o);}return this.$AdsConversionPixelStoreClass2[n][o];};l.prototype.isPixelStatsLoaded=function(n,o){this.$AdsConversionPixelStoreClass10(n);return o in this.$AdsConversionPixelStoreClass2[n]&&this.$AdsConversionPixelStoreClass2[n][o]!==undefined;};l.prototype.$AdsConversionPixelStoreClass10=function(n){n in this.$AdsConversionPixelStoreClass2||h(0);};var m=new l();f.exports=m;}),null);
__d('AdsTargetingViewConfig',['AdsTargetingSectionsLabels','ImmutableObject','keyMirror'],(function a(b,c,d,e,f,g){var h=c('keyMirror')({OFF:null,STRONG:null,WEAK:null,BROADEN:null,DANGEROUS:null}),i=13,j=65,k=['relationshipSingle','relationshipInA','relationshipMarried','relationshipEngaged','relationshipUnspecified'],l='cities',m='zips',n='regions',o=[],p=c('keyMirror')({getFeatureEffect:null}),q=c('keyMirror')({}),r={INTERESTS:{getFeatureEffect:function u(v){var w=v.keywords&&v.keywords.length||v.interests&&v.interests.length;return w?h.STRONG:h.OFF;}},CUSTOM_AUDIENCE:{getFeatureEffect:function u(v){return v.customAudiences&&v.customAudiences.length?h.STRONG:h.OFF;}},CONNECTIONS:{getFeatureEffect:function u(v){var w=v.connections&&v.connections.length||v.friendsOfConnections&&v.friendsOfConnections.length;return w?h.STRONG:h.OFF;}},CATEGORIES:{getFeatureEffect:function u(v){return v.userAdclusters&&v.userAdclusters.length?h.STRONG:h.OFF;}},LOCATION:{getFeatureEffect:function u(v){if(v.geoLocations){var w=v.geoLocations,x=w.cities&&w.cities.length,y=w.zips&&w.zips.length,z=w.regions&&w.regions.length,aa=v.excludedGeoLocations||{},ba=0;Object.keys(aa).forEach(function(ea){ba+=aa[ea].length||0;});if(x||y){return h.STRONG;}else if(z){return ba?h.STRONG:h.WEAK;}else if(w.countries&&w.countries.length>1)return ba?h.WEAK:h.BROADEN;return ba?h.WEAK:h.OFF;}var ca=v.locTargeting===m||v.locTargeting===l,da=v.cities&&v.cities.length||v.zips&&v.zips.length;if(ca&&da)return h.STRONG;if(v.locTargeting===n&&v.regions&&v.regions.length)return h.WEAK;if(v.countries&&v.countries.length>1)return h.BROADEN;return h.OFF;}},GENDER_AGE:{getFeatureEffect:function u(v){if(v.ageMax&&v.ageMax!==j||v.ageMin&&v.ageMin!==i||v.sex)return h.WEAK;return h.OFF;}},SCHOOL:{getFeatureEffect:function u(v){if(!v.educationStatus)return h.OFF;return h.WEAK;}},WORK:{getFeatureEffect:function u(v){return h.OFF;}},LANGUAGE:{getFeatureEffect:function u(v){return v.locales&&v.locales.length?h.WEAK:h.OFF;}},RELATIONSHIP:{getFeatureEffect:function u(v){var w=!!v.interestedIn&&!!v.interestedIn.length,x=false,y=true;k.forEach(function(z){x=x||v[z];y=y&&v[z];});if(y||!x)return w?h.WEAK:h.OFF;return w?h.STRONG:h.WEAK;}},DEVICE:{getFeatureEffect:function u(v){var w=0;if(v.wifiOnly)w++;var x=v.mobileDevices||[];if(x.length&&x.length!==3)w++;if(v.minIosVersion||v.minAndroidVersion)w++;if(w>1){return h.STRONG;}else if(w===1)return h.WEAK;return h.OFF;}},ADV_DEMO:{getFeatureEffect:function u(v){var w=!!Object.keys(c('AdsTargetingSectionsLabels')).filter(function(x){return o.indexOf(x)==-1&&v[x]&&v[x].length;}).length;return w?h.STRONG:h.OFF;}}},s={};Object.keys(r).forEach(function(u){r[u].KEY=u;s[u]=u;});var t={INTERFACE:p,OPTIONAL_INTERFACE:q,EFFECTS:h,FEATURES:s,getViewNames:function u(){return Object.keys(r);},getAllViewConfigs:function u(){return Object.keys(r).map(function(v){return new (c('ImmutableObject'))(r[v]);});},getViewConfigByName:function u(v){return new (c('ImmutableObject'))(r[v]);}};f.exports=t;}),null);
__d('AdsTargetingRatingUtils',['AdsAPICampaignPaths','AdsTargetingViewConfig','AdsUtils','ImmutableObject','AdsTargetingSpecOverallRating','keyMirror'],(function a(b,c,d,e,f,g){var h=c('AdsTargetingViewConfig').EFFECTS,i=c('keyMirror')({TOO_SMALL:null,SMALL:null,GOOD:null,TOO_BROAD:null}),j=c('keyMirror')({DANGEROUS:null,VAGUE:null,GOOD:null,GREAT:null,NONE:null}),k=1000*1000,l=100*k,m=2500,n=10000,o=3,p=2,q={SIZE_RATINGS:i,FEATURE_RATINGS:j,OVERALL_RATINGS:c('AdsTargetingSpecOverallRating'),getFeaturesByEffect:function r(s){var t=c('AdsTargetingViewConfig').getAllViewConfigs(),u={};Object.keys(h).forEach(function(v){u[v]=[];});t.forEach(function(v){var w=v.getFeatureEffect(s);u[w].push(v);});return u;},getConfigsWithFeature:function r(s){var t=c('AdsTargetingViewConfig').getAllViewConfigs();return t.map(function(u){return new (c('ImmutableObject'))(babelHelpers['extends']({},u,{EFFECT:u.getFeatureEffect(s)}));});},getAudienceSizeRating:function r(s){var t=i;if(s<=m){return t.TOO_SMALL;}else if(s<=n){return t.SMALL;}else if(s<l)return t.GOOD;return t.TOO_BROAD;},getFeaturesRating:function r(s){var t=j,u=this.getFeaturesByEffect(s);delete u[h.OFF];if(u[h.DANGEROUS].length)return t.DANGEROUS;var v=u[h.STRONG].length,w=u[h.WEAK].length;v+=Math.floor(w/o);if(v>=p){return t.GREAT;}else if(v){return t.GOOD;}else if(w)return t.VAGUE;return t.NONE;},getOverallRating:function r(s,t){var u=this.getFeaturesRating(s),v=this.getAudienceSizeRating(t),w=i,x=j,y=c('AdsTargetingSpecOverallRating');switch(v){case w.TOO_SMALL:return y.BAD_TOO_SMALL;case w.TOO_BROAD:switch(u){case x.NONE:case x.DANGEROUS:return y.BAD_TOO_BROAD;case x.VAGUE:case x.GOOD:return y.VAGUE;case x.GREAT:return y.GOOD;}break;case w.GOOD:switch(u){case x.DANGEROUS:return y.GOOD;case x.NONE:return y.BAD_TOO_BROAD;case x.VAGUE:return y.VAGUE;case x.GOOD:case x.GREAT:return y.GOOD;}break;case w.SMALL:switch(u){case x.DANGEROUS:return y.BAD_TOO_SMALL;case x.NONE:case x.VAGUE:return y.VAGUE;case x.GOOD:case x.GREAT:return y.GOOD;}}},getOverallRatingFromCampaign:function r(s,t){var u=s.getIn(c('AdsAPICampaignPaths').TARGETING.path),v=c('AdsUtils').underscoreToCamelCaseKeys(u&&u.toJS()||{});return q.getOverallRating(v,t);}};f.exports=q;}),null);
__d('AdsImageCollection',['invariant','AdsImageCollectionViews','ArbiterMixin','mixin'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function k(l){j.constructor.call(this);l=Object.assign({maxSelectedImages:1},l);this.$AdsImageCollection1=l.maxSelectedImages;this.$AdsImageCollection1%1===0||h(0);this.reset();}k.prototype.reset=function(){this.$AdsImageCollection2=[];this.$AdsImageCollection3={};this.$AdsImageCollection4=[];};k.prototype.addImagesToFront=function(l,m){this.$AdsImageCollection5(l);this.$AdsImageCollection6(l,0,m);};k.prototype.addImagesToBack=function(l,m){this.$AdsImageCollection5(l);this.addImagesToBack_UNSAFE(l,m);};k.prototype.addImagesToBack_UNSAFE=function(l,m){this.$AdsImageCollection6(l,this.$AdsImageCollection2.length,m);};k.prototype.$AdsImageCollection6=function(l,m,n){c('AdsImageCollectionViews').assertIsValidView(n);var o=l.filter(function(p){var q=this.$AdsImageCollection3[p.getUniqueIdentifier()];if(q){q.view=n;return false;}else{this.$AdsImageCollection3[p.getUniqueIdentifier()]={selected:false,view:n,image:p};return true;}},this);Array.prototype.splice.apply(this.$AdsImageCollection2,[m,0].concat(o));this.inform('onChange');};k.prototype.$AdsImageCollection5=function(l){l.forEach(function(m){var n=this.$AdsImageCollection3[m.getUniqueIdentifier()];if(n)0===(n.view&c('AdsImageCollectionViews').views.ALL)||h(0);}.bind(this));};k.prototype.isImageSelected=function(l){return !!this.$AdsImageCollection3[l.getUniqueIdentifier()].selected;};k.prototype.toggleImageSelected=function(l){var m=!this.isImageSelected(l);this.setImageSelected(l,m);return m;};k.prototype.setImageSelected=function(l,m){var n=this.$AdsImageCollection7(l,m);n&&this.inform('onChange');};k.prototype.setImagesSelected=function(l,m){var n=void 0;for(var o=0,p=l.length;o<p;o++)if(this.$AdsImageCollection7(l[o],m))n=true;n&&this.inform('onChange');};k.prototype.$AdsImageCollection7=function(l,m){l=this.$AdsImageCollection3[l.getUniqueIdentifier()].image;this.assertHasImage(l);if(m===this.isImageSelected(l))return false;if(m){this.$AdsImageCollection4.push(l);}else this.$AdsImageCollection4=this.$AdsImageCollection4.filter(function(o){return !l.equals(o);});this.$AdsImageCollection3[l.getUniqueIdentifier()].selected=m;if(this.$AdsImageCollection1>0)while(this.getSelectedImageCount()>this.$AdsImageCollection1){var n=this.$AdsImageCollection4.shift();this.$AdsImageCollection3[n.getUniqueIdentifier()].selected=false;}return true;};k.prototype.deselectAllImages=function(){if(!this.hasSelectedImages())return;this.getSelectedImages().forEach(function(l){this.$AdsImageCollection3[l.getUniqueIdentifier()].selected=false;},this);this.$AdsImageCollection4=[];this.inform('onChange');};k.prototype.clearImagesByViewBitmask=function(l){c('AdsImageCollectionViews').assertIsValidViewBitmask(l);var m=false;this.$AdsImageCollection2=this.$AdsImageCollection2.filter(function(n){var o=0!==(l&this.$AdsImageCollection3[n.getUniqueIdentifier()].view);if(o){m=true;if(this.isImageSelected(n)){this.$AdsImageCollection3[n.getUniqueIdentifier()].view=c('AdsImageCollectionViews').views.INVISIBLE;o=false;}else delete this.$AdsImageCollection3[n.getUniqueIdentifier()];}return !o;},this);if(m)this.inform('onChange');};k.prototype.hasImage=function(l){return this.$AdsImageCollection3[l.getUniqueIdentifier()]!==undefined;};k.prototype.hasImageInView=function(l,m){var n=this.$AdsImageCollection3[l.getUniqueIdentifier()];return !!n&&(n.view&m)!==0;};k.prototype.assertHasImage=function(l){this.hasImage(l)||h(0);};k.prototype.getSelectedImages=function(){return this.$AdsImageCollection4.slice(0);};k.prototype.getSelectedImageCount=function(){return this.$AdsImageCollection4.length;};k.prototype.hasSelectedImages=function(){return this.getSelectedImageCount()!==0;};k.prototype.getImageByIndex=function(l){return this.$AdsImageCollection2[l];};k.prototype.getImageByUniqueID=function(l){return this.$AdsImageCollection3[l]&&this.$AdsImageCollection3[l].image;};k.prototype.getImages=function(l){c('AdsImageCollectionViews').assertIsValidViewBitmask(l);return this.$AdsImageCollection2.filter(function(m){return 0!==(l&this.$AdsImageCollection3[m.getUniqueIdentifier()].view);},this);};k.prototype.getImageCount=function(l){return this.getImages(l).length;};k.prototype.isEmpty=function(){return this.getImageCount(c('AdsImageCollectionViews').views.ALL)===0;};f.exports=k;}),null);
__d('isInvalidFacebookCapitalization',[],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=!!/(\s|^)\b(?!Facebook)[Ff][Aa][Cc][Ee][Bb][Oo][Oo][Kk]\b(?!.com)/.test(i);return j;}f.exports=h;}),null);
__d('messagePageCTAUtils',['Promise','AdsGraphAPI'],(function a(b,c,d,e,f,g){'use strict';function h(j,k){return c('AdsGraphAPI').get(f.id).object('page',j).edge('settings').post({access_token:k,option:{USERS_CAN_MESSAGE:true}});}function i(j,k){return c('AdsGraphAPI').get(f.id).object('page',j).edge('settings').get({access_token:k}).then(function(l){var m=void 0;if(l.data)l.data.some(function(n){if(n.setting==='USERS_CAN_MESSAGE'){m=n;return true;}});if(!m)return c('Promise').reject();return c('Promise').resolve(m.value);});}f.exports={enableMessaging:h,isMessagingEnabled:i};}),null);